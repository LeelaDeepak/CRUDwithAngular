"use strict";(self.webpackChunkFirebaseCRUDApp=self.webpackChunkFirebaseCRUDApp||[]).push([[179],{939:(Li,Tn,xe)=>{xe.d(Tn,{$:()=>Zp,A:()=>ie,G:()=>yt,K:()=>Lp,L:()=>Ts,N:()=>Wi,P:()=>Yv,R:()=>Zv,U:()=>Ie,V:()=>Ci,W:()=>vt,X:()=>ec,Y:()=>Pd,Z:()=>wr,_:()=>bs,a:()=>Mn,a0:()=>$a,a1:()=>rc,a2:()=>Jp,a3:()=>Xp,a4:()=>Nv,a5:()=>qr,a6:()=>eg,a7:()=>xv,a8:()=>Xt,a9:()=>ze,aA:()=>Ye,aB:()=>Dt,aC:()=>te,aD:()=>ho,aE:()=>W,aF:()=>Ve,aG:()=>bg,aH:()=>Cg,aI:()=>iI,aJ:()=>Jt,aN:()=>qo,aQ:()=>io,aa:()=>Ti,ab:()=>tr,ac:()=>Bo,ad:()=>Rs,ae:()=>jo,af:()=>$o,ag:()=>Wa,ah:()=>Zi,ak:()=>fs,al:()=>qa,am:()=>st,ap:()=>Pv,aq:()=>Dr,as:()=>S0,at:()=>ug,au:()=>Bt,av:()=>ge,aw:()=>k,ax:()=>nt,ay:()=>cu,az:()=>Mg,b:()=>Vv,c:()=>eI,d:()=>tI,e:()=>Dg,f:()=>Y,g:()=>iu,h:()=>Kr,i:()=>Bv,j:()=>Yd,k:()=>Qo,l:()=>Qv,m:()=>sh,o:()=>Hg,p:()=>Vt,r:()=>Eg,s:()=>Kv,u:()=>hc});var D=xe(861),G=xe(58),N=xe(534),Ce=xe(879),_t=xe(582),qt=xe(537);const Vt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ie={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const yt=function De(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},An=function He(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ot=new G.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Be=new Ce.Yd("@firebase/auth");function Zt(f,...c){Be.logLevel<=Ce.in.ERROR&&Be.error(`Auth (${N.SDK_VERSION}): ${f}`,...c)}function nt(f,...c){throw Ze(f,...c)}function Dt(f,...c){return Ze(f,...c)}function Vr(f,c,d){const p=Object.assign(Object.assign({},An()),{[c]:d});return new G.LL("auth","Firebase",p).create(c,{appName:f.name})}function _n(f,c,d){if(!(c instanceof d))throw d.name!==c.constructor.name&&nt(f,"argument-error"),Vr(f,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ze(f,...c){if("string"!=typeof f){const d=c[0],p=[...c.slice(1)];return p[0]&&(p[0].appName=f.name),f._errorFactory.create(d,...p)}return ot.create(f,...c)}function te(f,c,...d){if(!f)throw Ze(c,...d)}function ut(f){const c="INTERNAL ASSERTION FAILED: "+f;throw Zt(c),new Error(c)}function Bt(f,c){f||ut(c)}function un(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.href)||""}function fn(){return"http:"===_i()||"https:"===_i()}function _i(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.protocol)||null}class Fr{constructor(c,d){this.shortDelay=c,this.longDelay=d,Bt(d>c,"Short delay should be less than long delay!"),this.isMobile=(0,G.uI)()||(0,G.b$)()}get(){return function yi(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(fn()||(0,G.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ui(f,c){Bt(f.emulator,"Emulator should always be set here");const{url:d}=f.emulator;return c?`${d}${c.startsWith("/")?c.slice(1):c}`:d}class L{static initialize(c,d,p){this.fetchImpl=c,d&&(this.headersImpl=d),p&&(this.responseImpl=p)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void ut("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void ut("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void ut("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const j={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},H=new Fr(3e4,6e4);function F(f,c){return f.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:f.tenantId}):c}function Q(f,c,d,p){return K.apply(this,arguments)}function K(){return(K=(0,D.Z)(function*(f,c,d,p,_={}){return ce(f,_,(0,D.Z)(function*(){let E={},P={};p&&("GET"===c?P=p:E={body:JSON.stringify(p)});const U=(0,G.xO)(Object.assign({key:f.config.apiKey},P)).slice(1),ee=yield f._getAdditionalHeaders();return ee["Content-Type"]="application/json",f.languageCode&&(ee["X-Firebase-Locale"]=f.languageCode),L.fetch()(dt(f,f.config.apiHost,d,U),Object.assign({method:c,headers:ee,referrerPolicy:"no-referrer"},E))}))})).apply(this,arguments)}function ce(f,c,d){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,D.Z)(function*(f,c,d){f._canInitEmulator=!1;const p=Object.assign(Object.assign({},j),c);try{const _=new Mt(f),E=yield Promise.race([d(),_.promise]);_.clearNetworkTimeout();const P=yield E.json();if("needConfirmation"in P)throw Kt(f,"account-exists-with-different-credential",P);if(E.ok&&!("errorMessage"in P))return P;{const U=E.ok?P.errorMessage:P.error.message,[ee,ye]=U.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ee)throw Kt(f,"credential-already-in-use",P);if("EMAIL_EXISTS"===ee)throw Kt(f,"email-already-in-use",P);if("USER_DISABLED"===ee)throw Kt(f,"user-disabled",P);const be=p[ee]||ee.toLowerCase().replace(/[_\s]+/g,"-");if(ye)throw Vr(f,be,ye);nt(f,be)}}catch(_){if(_ instanceof G.ZR)throw _;nt(f,"network-request-failed",{message:String(_)})}})).apply(this,arguments)}function me(f,c,d,p){return Re.apply(this,arguments)}function Re(){return(Re=(0,D.Z)(function*(f,c,d,p,_={}){const E=yield Q(f,c,d,p,_);return"mfaPendingCredential"in E&&nt(f,"multi-factor-auth-required",{_serverResponse:E}),E})).apply(this,arguments)}function dt(f,c,d,p){const _=`${c}${d}?${p}`;return f.config.emulator?Ui(f.config,_):`${f.config.apiScheme}://${_}`}function $t(f){switch(f){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Mt{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((d,p)=>{this.timer=setTimeout(()=>p(Dt(this.auth,"network-request-failed")),H.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Kt(f,c,d){const p={appName:f.name};d.email&&(p.email=d.email),d.phoneNumber&&(p.phoneNumber=d.phoneNumber);const _=Dt(f,c,p);return _.customData._tokenResponse=d,_}function Sn(f){return void 0!==f&&void 0!==f.getResponse}function Rn(f){return void 0!==f&&void 0!==f.enterprise}class Un{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===c)return $t(d.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function vi(){return(vi=(0,D.Z)(function*(f){return(yield Q(f,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Bi(f,c){return ht.apply(this,arguments)}function ht(){return(ht=(0,D.Z)(function*(f,c){return Q(f,"GET","/v2/recaptchaConfig",F(f,c))})).apply(this,arguments)}function $i(){return($i=(0,D.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function Ei(){return(Ei=(0,D.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Lr(){return(Lr=(0,D.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function Ur(f){if(f)try{const c=new Date(Number(f));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function Ct(){return(Ct=(0,D.Z)(function*(f,c=!1){const d=(0,G.m9)(f),p=yield d.getIdToken(c),_=pn(p);te(_&&_.exp&&_.auth_time&&_.iat,d.auth,"internal-error");const E="object"==typeof _.firebase?_.firebase:void 0,P=E?.sign_in_provider;return{claims:_,token:p,authTime:Ur(jr(_.auth_time)),issuedAtTime:Ur(jr(_.iat)),expirationTime:Ur(jr(_.exp)),signInProvider:P||null,signInSecondFactor:E?.sign_in_second_factor||null}})).apply(this,arguments)}function jr(f){return 1e3*Number(f)}function pn(f){const[c,d,p]=f.split(".");if(void 0===c||void 0===d||void 0===p)return Zt("JWT malformed, contained fewer than 3 sections"),null;try{const _=(0,G.tV)(d);return _?JSON.parse(_):(Zt("Failed to decode base64 JWT payload"),null)}catch(_){return Zt("Caught error parsing JWT payload as JSON",_?.toString()),null}}function Qt(f,c){return gn.apply(this,arguments)}function gn(){return(gn=(0,D.Z)(function*(f,c,d=!1){if(d)return c;try{return yield c}catch(p){throw p instanceof G.ZR&&function Hi({code:f}){return"auth/user-disabled"===f||"auth/user-token-expired"===f}(p)&&f.auth.currentUser===f&&(yield f.auth.signOut()),p}})).apply(this,arguments)}class zi{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var d;if(c){const p=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),p}{this.errorBackoff=3e4;const _=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,_)}}schedule(c=!1){var d=this;if(!this.isRunning)return;const p=this.getInterval(c);this.timerId=setTimeout((0,D.Z)(function*(){yield d.iteration()}),p)}iteration(){var c=this;return(0,D.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&c.schedule(!0))}c.schedule()})()}}class wi{constructor(c,d){this.createdAt=c,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ur(this.lastLoginAt),this.creationTime=Ur(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Pn(f){return yn.apply(this,arguments)}function yn(){return yn=(0,D.Z)(function*(f){var c;const d=f.auth,p=yield f.getIdToken(),_=yield Qt(f,function Qn(f,c){return Lr.apply(this,arguments)}(d,{idToken:p}));te(_?.users.length,d,"internal-error");const E=_.users[0];f._notifyReloadListener(E);const P=null!==(c=E.providerUserInfo)&&void 0!==c&&c.length?function Cs(f){return f.map(c=>{var{providerId:d}=c,p=(0,_t._T)(c,["providerId"]);return{providerId:d,uid:p.rawId||"",displayName:p.displayName||null,email:p.email||null,phoneNumber:p.phoneNumber||null,photoURL:p.photoUrl||null}})}(E.providerUserInfo):[],U=function Fo(f,c){return[...f.filter(p=>!c.some(_=>_.providerId===p.providerId)),...c]}(f.providerData,P),be=!!f.isAnonymous&&!(f.email&&E.passwordHash||U?.length),et={uid:E.localId,displayName:E.displayName||null,photoURL:E.photoUrl||null,email:E.email||null,emailVerified:E.emailVerified||!1,phoneNumber:E.phoneNumber||null,tenantId:E.tenantId||null,providerData:U,metadata:new wi(E.createdAt,E.lastLoginAt),isAnonymous:be};Object.assign(f,et)}),yn.apply(this,arguments)}function $r(){return($r=(0,D.Z)(function*(f){const c=(0,G.m9)(f);yield Pn(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function Gi(){return(Gi=(0,D.Z)(function*(f,c){const d=yield ce(f,{},(0,D.Z)(function*(){const p=(0,G.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:_,apiKey:E}=f.config,P=dt(f,_,"/v1/token",`key=${E}`),U=yield f._getAdditionalHeaders();return U["Content-Type"]="application/x-www-form-urlencoded",L.fetch()(P,{method:"POST",headers:U,body:p})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function T(){return(T=(0,D.Z)(function*(f,c){return Q(f,"POST","/v2/accounts:revokeToken",F(f,c))})).apply(this,arguments)}class I{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){te(c.idToken,"internal-error"),te(typeof c.idToken<"u","internal-error"),te(typeof c.refreshToken<"u","internal-error");const d="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):function Na(f){const c=pn(f);return te(c,"internal-error"),te(typeof c.exp<"u","internal-error"),te(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,d)}getToken(c,d=!1){var p=this;return(0,D.Z)(function*(){return te(!p.accessToken||p.refreshToken,c,"user-token-expired"),d||!p.accessToken||p.isExpired?p.refreshToken?(yield p.refresh(c,p.refreshToken),p.accessToken):null:p.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,d){var p=this;return(0,D.Z)(function*(){const{accessToken:_,refreshToken:E,expiresIn:P}=yield function eo(f,c){return Gi.apply(this,arguments)}(c,d);p.updateTokensAndExpiration(_,E,Number(P))})()}updateTokensAndExpiration(c,d,p){this.refreshToken=d||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*p}static fromJSON(c,d){const{refreshToken:p,accessToken:_,expirationTime:E}=d,P=new I;return p&&(te("string"==typeof p,"internal-error",{appName:c}),P.refreshToken=p),_&&(te("string"==typeof _,"internal-error",{appName:c}),P.accessToken=_),E&&(te("number"==typeof E,"internal-error",{appName:c}),P.expirationTime=E),P}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new I,this.toJSON())}_performRefresh(){return ut("not implemented")}}function w(f,c){te("string"==typeof f||typeof f>"u","internal-error",{appName:c})}class v{constructor(c){var{uid:d,auth:p,stsTokenManager:_}=c,E=(0,_t._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=p,this.stsTokenManager=_,this.accessToken=_.accessToken,this.displayName=E.displayName||null,this.email=E.email||null,this.emailVerified=E.emailVerified||!1,this.phoneNumber=E.phoneNumber||null,this.photoURL=E.photoURL||null,this.isAnonymous=E.isAnonymous||!1,this.tenantId=E.tenantId||null,this.providerData=E.providerData?[...E.providerData]:[],this.metadata=new wi(E.createdAt||void 0,E.lastLoginAt||void 0)}getIdToken(c){var d=this;return(0,D.Z)(function*(){const p=yield Qt(d,d.stsTokenManager.getToken(d.auth,c));return te(p,d.auth,"internal-error"),d.accessToken!==p&&(d.accessToken=p,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),p})()}getIdTokenResult(c){return function Bn(f){return Ct.apply(this,arguments)}(this,c)}reload(){return function Yn(f){return $r.apply(this,arguments)}(this)}_assign(c){this!==c&&(te(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(d=>Object.assign({},d)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const d=new v(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(c){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,d=!1){var p=this;return(0,D.Z)(function*(){let _=!1;c.idToken&&c.idToken!==p.stsTokenManager.accessToken&&(p.stsTokenManager.updateFromServerResponse(c),_=!0),d&&(yield Pn(p)),yield p.auth._persistUserIfCurrent(p),_&&p.auth._notifyListenersIfCurrent(p)})()}delete(){var c=this;return(0,D.Z)(function*(){const d=yield c.getIdToken();return yield Qt(c,function ji(f,c){return $i.apply(this,arguments)}(c.auth,{idToken:d})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,d){var p,_,E,P,U,ee,ye,be;const et=null!==(p=d.displayName)&&void 0!==p?p:void 0,Tr=null!==(_=d.email)&&void 0!==_?_:void 0,Si=null!==(E=d.phoneNumber)&&void 0!==E?E:void 0,Xi=null!==(P=d.photoURL)&&void 0!==P?P:void 0,zg=null!==(U=d.tenantId)&&void 0!==U?U:void 0,Ac=null!==(ee=d._redirectEventId)&&void 0!==ee?ee:void 0,ch=null!==(ye=d.createdAt)&&void 0!==ye?ye:void 0,Yo=null!==(be=d.lastLoginAt)&&void 0!==be?be:void 0,{uid:lh,emailVerified:ir,isAnonymous:Gg,providerData:Nn,stsTokenManager:bc}=d;te(lh&&bc,c,"internal-error");const _I=I.fromJSON(this.name,bc);te("string"==typeof lh,c,"internal-error"),w(et,c.name),w(Tr,c.name),te("boolean"==typeof ir,c,"internal-error"),te("boolean"==typeof Gg,c,"internal-error"),w(Si,c.name),w(Xi,c.name),w(zg,c.name),w(Ac,c.name),w(ch,c.name),w(Yo,c.name);const Sc=new v({uid:lh,auth:c,email:Tr,emailVerified:ir,displayName:et,isAnonymous:Gg,photoURL:Xi,phoneNumber:Si,tenantId:zg,stsTokenManager:_I,createdAt:ch,lastLoginAt:Yo});return Nn&&Array.isArray(Nn)&&(Sc.providerData=Nn.map(Rc=>Object.assign({},Rc))),Ac&&(Sc._redirectEventId=Ac),Sc}static _fromIdTokenResponse(c,d,p=!1){return(0,D.Z)(function*(){const _=new I;_.updateFromServerResponse(d);const E=new v({uid:d.localId,auth:c,stsTokenManager:_,isAnonymous:p});return yield Pn(E),E})()}}const A=new Map;function W(f){Bt(f instanceof Function,"Expected a class definition");let c=A.get(f);return c?(Bt(c instanceof f,"Instance stored in cache mismatched with class"),c):(c=new f,A.set(f,c),c)}const Ie=(()=>{class f{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,D.Z)(function*(){return!0})()}_set(d,p){var _=this;return(0,D.Z)(function*(){_.storage[d]=p})()}_get(d){var p=this;return(0,D.Z)(function*(){const _=p.storage[d];return void 0===_?null:_})()}_remove(d){var p=this;return(0,D.Z)(function*(){delete p.storage[d]})()}_addListener(d,p){}_removeListener(d,p){}}return f.type="NONE",f})();function Ve(f,c,d){return`firebase:${f}:${c}:${d}`}class ft{constructor(c,d,p){this.persistence=c,this.auth=d,this.userKey=p;const{config:_,name:E}=this.auth;this.fullUserKey=Ve(this.userKey,_.apiKey,E),this.fullPersistenceKey=Ve("persistence",_.apiKey,E),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,D.Z)(function*(){const d=yield c.persistence._get(c.fullUserKey);return d?v._fromJSON(c.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var d=this;return(0,D.Z)(function*(){if(d.persistence===c)return;const p=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=c,p?d.setCurrentUser(p):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,d,p="authUser"){return(0,D.Z)(function*(){if(!d.length)return new ft(W(Ie),c,p);const _=(yield Promise.all(d.map(function(){var ye=(0,D.Z)(function*(be){if(yield be._isAvailable())return be});return function(be){return ye.apply(this,arguments)}}()))).filter(ye=>ye);let E=_[0]||W(Ie);const P=Ve(p,c.config.apiKey,c.name);let U=null;for(const ye of d)try{const be=yield ye._get(P);if(be){const et=v._fromJSON(c,be);ye!==E&&(U=et),E=ye;break}}catch{}const ee=_.filter(ye=>ye._shouldAllowMigration);return E._shouldAllowMigration&&ee.length?(E=ee[0],U&&(yield E._set(P,U.toJSON())),yield Promise.all(d.map(function(){var ye=(0,D.Z)(function*(be){if(be!==E)try{yield be._remove(P)}catch{}});return function(be){return ye.apply(this,arguments)}}())),new ft(E,c,p)):new ft(E,c,p)})()}}function fe(f){const c=f.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(to(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(Rt(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(R(c))return"Blackberry";if(J(c))return"Webos";if(Te(c))return"Safari";if((c.includes("chrome/")||Vn(c))&&!c.includes("edge/"))return"Chrome";if(k(c))return"Android";{const p=f.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===p?.length)return p[1]}return"Other"}function Rt(f=(0,G.z$)()){return/firefox\//i.test(f)}function Te(f=(0,G.z$)()){const c=f.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function Vn(f=(0,G.z$)()){return/crios\//i.test(f)}function to(f=(0,G.z$)()){return/iemobile/i.test(f)}function k(f=(0,G.z$)()){return/android/i.test(f)}function R(f=(0,G.z$)()){return/blackberry/i.test(f)}function J(f=(0,G.z$)()){return/webos/i.test(f)}function ge(f=(0,G.z$)()){return/iphone|ipad|ipod/i.test(f)||/macintosh/i.test(f)&&/mobile/i.test(f)}function Ye(f=(0,G.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(f)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(f)}function Yt(f=(0,G.z$)()){return ge(f)||k(f)||J(f)||R(f)||/windows phone/i.test(f)||to(f)}function Je(f,c=[]){let d;switch(f){case"Browser":d=fe((0,G.z$)());break;case"Worker":d=`${fe((0,G.z$)())}-${f}`;break;default:d=f}const p=c.length?c.join(","):"FirebaseCore-web";return`${d}/JsCore/${N.SDK_VERSION}/${p}`}class xa{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,d){const p=E=>new Promise((P,U)=>{try{P(c(E))}catch(ee){U(ee)}});p.onAbort=d,this.queue.push(p);const _=this.queue.length-1;return()=>{this.queue[_]=()=>Promise.resolve()}}runMiddleware(c){var d=this;return(0,D.Z)(function*(){if(d.auth.currentUser===c)return;const p=[];try{for(const _ of d.queue)yield _(c),_.onAbort&&p.push(_.onAbort)}catch(_){p.reverse();for(const E of p)try{E()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:_?.message})}})()}}function wd(){return(wd=(0,D.Z)(function*(f,c={}){return Q(f,"GET","/v2/passwordPolicy",F(f,c))})).apply(this,arguments)}class Hr{constructor(c){var d,p,_,E;const P=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=P.minPasswordLength)&&void 0!==d?d:6,P.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=P.maxPasswordLength),void 0!==P.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=P.containsLowercaseCharacter),void 0!==P.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=P.containsUppercaseCharacter),void 0!==P.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=P.containsNumericCharacter),void 0!==P.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=P.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(_=null===(p=c.allowedNonAlphanumericCharacters)||void 0===p?void 0:p.join(""))&&void 0!==_?_:"",this.forceUpgradeOnSignin=null!==(E=c.forceUpgradeOnSignin)&&void 0!==E&&E,this.schemaVersion=c.schemaVersion}validatePassword(c){var d,p,_,E,P,U;const ee={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,ee),this.validatePasswordCharacterOptions(c,ee),ee.isValid&&(ee.isValid=null===(d=ee.meetsMinPasswordLength)||void 0===d||d),ee.isValid&&(ee.isValid=null===(p=ee.meetsMaxPasswordLength)||void 0===p||p),ee.isValid&&(ee.isValid=null===(_=ee.containsLowercaseLetter)||void 0===_||_),ee.isValid&&(ee.isValid=null===(E=ee.containsUppercaseLetter)||void 0===E||E),ee.isValid&&(ee.isValid=null===(P=ee.containsNumericCharacter)||void 0===P||P),ee.isValid&&(ee.isValid=null===(U=ee.containsNonAlphanumericCharacter)||void 0===U||U),ee}validatePasswordLengthOptions(c,d){const p=this.customStrengthOptions.minPasswordLength,_=this.customStrengthOptions.maxPasswordLength;p&&(d.meetsMinPasswordLength=c.length>=p),_&&(d.meetsMaxPasswordLength=c.length<=_)}validatePasswordCharacterOptions(c,d){let p;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let _=0;_<c.length;_++)p=c.charAt(_),this.updatePasswordCharacterOptionsStatuses(d,p>="a"&&p<="z",p>="A"&&p<="Z",p>="0"&&p<="9",this.allowedNonAlphanumericCharacters.includes(p))}updatePasswordCharacterOptionsStatuses(c,d,p,_,E){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=p)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=_)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=E))}}class p0{constructor(c,d,p,_){this.app=c,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=p,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Iv(this),this.idTokenSubscription=new Iv(this),this.beforeStateQueue=new xa(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ot,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(c,d){var p=this;return d&&(this._popupRedirectResolver=W(d)),this._initializationPromise=this.queue((0,D.Z)(function*(){var _,E;if(!p._deleted&&(p.persistenceManager=yield ft.create(p,c),!p._deleted)){if(null!==(_=p._popupRedirectResolver)&&void 0!==_&&_._shouldInitProactively)try{yield p._popupRedirectResolver._initialize(p)}catch{}yield p.initializeCurrentUser(d),p.lastNotifiedUid=(null===(E=p.currentUser)||void 0===E?void 0:E.uid)||null,!p._deleted&&(p._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,D.Z)(function*(){if(c._deleted)return;const d=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||d){if(c.currentUser&&d&&c.currentUser.uid===d.uid)return c._currentUser._assign(d),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(d,!0)}})()}initializeCurrentUser(c){var d=this;return(0,D.Z)(function*(){var p;const _=yield d.assertedPersistence.getCurrentUser();let E=_,P=!1;if(c&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const U=null===(p=d.redirectUser)||void 0===p?void 0:p._redirectEventId,ee=E?._redirectEventId,ye=yield d.tryRedirectSignIn(c);(!U||U===ee)&&ye?.user&&(E=ye.user,P=!0)}if(!E)return d.directlySetCurrentUser(null);if(!E._redirectEventId){if(P)try{yield d.beforeStateQueue.runMiddleware(E)}catch(U){E=_,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(U))}return E?d.reloadAndSetCurrentUserOrClear(E):d.directlySetCurrentUser(null)}return te(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===E._redirectEventId?d.directlySetCurrentUser(E):d.reloadAndSetCurrentUserOrClear(E)})()}tryRedirectSignIn(c){var d=this;return(0,D.Z)(function*(){let p=null;try{p=yield d._popupRedirectResolver._completeRedirectFn(d,c,!0)}catch{yield d._setRedirectUser(null)}return p})()}reloadAndSetCurrentUserOrClear(c){var d=this;return(0,D.Z)(function*(){try{yield Pn(c)}catch(p){if("auth/network-request-failed"!==p?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function qe(){if(typeof navigator>"u")return null;const f=navigator;return f.languages&&f.languages[0]||f.language||null}()}_delete(){var c=this;return(0,D.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var d=this;return(0,D.Z)(function*(){const p=c?(0,G.m9)(c):null;return p&&te(p.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(p&&p._clone(d))})()}_updateCurrentUser(c,d=!1){var p=this;return(0,D.Z)(function*(){if(!p._deleted)return c&&te(p.tenantId===c.tenantId,p,"tenant-id-mismatch"),d||(yield p.beforeStateQueue.runMiddleware(c)),p.queue((0,D.Z)(function*(){yield p.directlySetCurrentUser(c),p.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,D.Z)(function*(){return yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0)})()}setPersistence(c){var d=this;return this.queue((0,D.Z)(function*(){yield d.assertedPersistence.setPersistence(W(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var d=this;return(0,D.Z)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const p=d._getPasswordPolicyInternal();return p.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):p.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,D.Z)(function*(){const d=yield function f0(f){return wd.apply(this,arguments)}(c),p=new Hr(d);null===c.tenantId?c._projectPasswordPolicy=p:c._tenantPasswordPolicies[c.tenantId]=p})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new G.LL("auth","Firebase",c())}onAuthStateChanged(c,d,p){return this.registerStateListener(this.authStateSubscription,c,d,p)}beforeAuthStateChanged(c,d){return this.beforeStateQueue.pushCallback(c,d)}onIdTokenChanged(c,d,p){return this.registerStateListener(this.idTokenSubscription,c,d,p)}authStateReady(){return new Promise((c,d)=>{if(this.currentUser)c();else{const p=this.onAuthStateChanged(()=>{p(),c()},d)}})}revokeAccessToken(c){var d=this;return(0,D.Z)(function*(){if(d.currentUser){const p=yield d.currentUser.getIdToken(),_={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:p};null!=d.tenantId&&(_.tenantId=d.tenantId),yield function b(f,c){return T.apply(this,arguments)}(d,_)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,d){var p=this;return(0,D.Z)(function*(){const _=yield p.getOrInitRedirectPersistenceManager(d);return null===c?_.removeCurrentUser():_.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var d=this;return(0,D.Z)(function*(){if(!d.redirectPersistenceManager){const p=c&&W(c)||d._popupRedirectResolver;te(p,d,"argument-error"),d.redirectPersistenceManager=yield ft.create(d,[W(p._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(c){var d=this;return(0,D.Z)(function*(){var p,_;return d._isInitialized&&(yield d.queue((0,D.Z)(function*(){}))),(null===(p=d._currentUser)||void 0===p?void 0:p._redirectEventId)===c?d._currentUser:(null===(_=d.redirectUser)||void 0===_?void 0:_._redirectEventId)===c?d.redirectUser:null})()}_persistUserIfCurrent(c){var d=this;return(0,D.Z)(function*(){if(c===d.currentUser)return d.queue((0,D.Z)(function*(){return d.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const p=null!==(d=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==p&&(this.lastNotifiedUid=p,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,d,p,_){if(this._deleted)return()=>{};const E="function"==typeof d?d:d.next.bind(d);let P=!1;const U=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(U,this,"internal-error"),U.then(()=>{P||E(this.currentUser)}),"function"==typeof d){const ee=c.addObserver(d,p,_);return()=>{P=!0,ee()}}{const ee=c.addObserver(d);return()=>{P=!0,ee()}}}directlySetCurrentUser(c){var d=this;return(0,D.Z)(function*(){d.currentUser&&d.currentUser!==c&&d._currentUser._stopProactiveRefresh(),c&&d.isProactiveRefreshEnabled&&c._startProactiveRefresh(),d.currentUser=c,c?yield d.assertedPersistence.setCurrentUser(c):yield d.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=Je(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,D.Z)(function*(){var d;const p={"X-Client-Version":c.clientVersion};c.app.options.appId&&(p["X-Firebase-gmpid"]=c.app.options.appId);const _=yield null===(d=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();_&&(p["X-Firebase-Client"]=_);const E=yield c._getAppCheckToken();return E&&(p["X-Firebase-AppCheck"]=E),p})()}_getAppCheckToken(){var c=this;return(0,D.Z)(function*(){var d;const p=yield null===(d=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return p?.error&&function bn(f,...c){Be.logLevel<=Ce.in.WARN&&Be.warn(`Auth (${N.SDK_VERSION}): ${f}`,...c)}(`Error while retrieving App Check token: ${p.error}`),p?.token})()}}function Jt(f){return(0,G.m9)(f)}class Iv{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,G.ne)(d=>this.observer=d)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Di={loadJS:()=>(0,D.Z)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Op(f){return Di.loadJS(f)}function wv(f){return`__${f}${Math.floor(1e6*Math.random())}`}class zr{constructor(c){this.type="recaptcha-enterprise",this.auth=Jt(c)}verify(c="verify",d=!1){var p=this;return(0,D.Z)(function*(){function E(){return E=(0,D.Z)(function*(U){if(!d){if(null==U.tenantId&&null!=U._agentRecaptchaConfig)return U._agentRecaptchaConfig.siteKey;if(null!=U.tenantId&&void 0!==U._tenantRecaptchaConfigs[U.tenantId])return U._tenantRecaptchaConfigs[U.tenantId].siteKey}return new Promise(function(){var ee=(0,D.Z)(function*(ye,be){Bi(U,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(et=>{if(void 0!==et.recaptchaKey){const Tr=new Un(et);return null==U.tenantId?U._agentRecaptchaConfig=Tr:U._tenantRecaptchaConfigs[U.tenantId]=Tr,ye(Tr.siteKey)}be(new Error("recaptcha Enterprise site key undefined"))}).catch(et=>{be(et)})});return function(ye,be){return ee.apply(this,arguments)}}())}),E.apply(this,arguments)}function P(U,ee,ye){const be=window.grecaptcha;Rn(be)?be.enterprise.ready(()=>{be.enterprise.execute(U,{action:c}).then(et=>{ee(et)}).catch(()=>{ee("NO_RECAPTCHA")})}):ye(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((U,ee)=>{(function _(U){return E.apply(this,arguments)})(p.auth).then(ye=>{if(!d&&Rn(window.grecaptcha))P(ye,U,ee);else{if(typeof window>"u")return void ee(new Error("RecaptchaVerifier is only supported in browser"));let be=function _0(){return Di.recaptchaEnterpriseScript}();0!==be.length&&(be+=ye),Op(be).then(()=>{P(ye,U,ee)}).catch(et=>{ee(et)})}}).catch(ye=>{ee(ye)})})})()}}function Fe(f,c,d){return kp.apply(this,arguments)}function kp(){return(kp=(0,D.Z)(function*(f,c,d,p=!1){const _=new zr(f);let E;try{E=yield _.verify(d)}catch{E=yield _.verify(d,!0)}const P=Object.assign({},c);return Object.assign(P,p?{captchaResp:E}:{captchaResponse:E}),Object.assign(P,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(P,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),P})).apply(this,arguments)}function Yu(f,c,d,p){return Vp.apply(this,arguments)}function Vp(){return Vp=(0,D.Z)(function*(f,c,d,p){var _;if(null!==(_=f._getRecaptchaConfig())&&void 0!==_&&_.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const E=yield Fe(f,c,d,"getOobCode"===d);return p(f,E)}return p(f,c).catch(function(){var E=(0,D.Z)(function*(P){if("auth/missing-recaptcha-token"===P.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const U=yield Fe(f,c,d,"getOobCode"===d);return p(f,U)}return Promise.reject(P)});return function(P){return E.apply(this,arguments)}}())}),Vp.apply(this,arguments)}function Lp(f,c,d){const p=Jt(f);te(p._canInitEmulator,p,"emulator-config-failed"),te(/^https?:\/\//.test(c),p,"invalid-emulator-scheme");const _=!!d?.disableWarnings,E=Cd(c),{host:P,port:U}=function Cv(f){const c=Cd(f),d=/(\/\/)?([^?#/]+)/.exec(f.substr(c.length));if(!d)return{host:"",port:null};const p=d[2].split("@").pop()||"",_=/^(\[[^\]]+\])(:|$)/.exec(p);if(_){const E=_[1];return{host:E,port:Oa(p.substr(E.length+1))}}{const[E,P]=p.split(":");return{host:E,port:Oa(P)}}}(c);p.config.emulator={url:`${E}//${P}${null===U?"":`:${U}`}/`},p.settings.appVerificationDisabledForTesting=!0,p.emulatorConfig=Object.freeze({host:P,port:U,protocol:E.replace(":",""),options:Object.freeze({disableWarnings:_})}),_||function Xu(){function f(){const c=document.createElement("p"),d=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",f):f())}()}function Cd(f){const c=f.indexOf(":");return c<0?"":f.substr(0,c+1)}function Oa(f){if(!f)return null;const c=Number(f);return isNaN(c)?null:c}class Ts{constructor(c,d){this.providerId=c,this.signInMethod=d}toJSON(){return ut("not implemented")}_getIdTokenResponse(c){return ut("not implemented")}_linkToIdToken(c,d){return ut("not implemented")}_getReauthenticationResolver(c){return ut("not implemented")}}function Td(f,c){return Ad.apply(this,arguments)}function Ad(){return(Ad=(0,D.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:resetPassword",F(f,c))})).apply(this,arguments)}function ka(){return(ka=(0,D.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Up(f,c){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,D.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function jp(){return(jp=(0,D.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:update",F(f,c))})).apply(this,arguments)}function Ft(f,c){return $p.apply(this,arguments)}function $p(){return($p=(0,D.Z)(function*(f,c){return me(f,"POST","/v1/accounts:signInWithPassword",F(f,c))})).apply(this,arguments)}function bd(f,c){return ae.apply(this,arguments)}function ae(){return(ae=(0,D.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:sendOobCode",F(f,c))})).apply(this,arguments)}function Va(){return(Va=(0,D.Z)(function*(f,c){return bd(f,c)})).apply(this,arguments)}function Hp(f,c){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,D.Z)(function*(f,c){return bd(f,c)})).apply(this,arguments)}function Tv(f,c){return La.apply(this,arguments)}function La(){return(La=(0,D.Z)(function*(f,c){return bd(f,c)})).apply(this,arguments)}function zp(){return(zp=(0,D.Z)(function*(f,c){return bd(f,c)})).apply(this,arguments)}function Gp(){return(Gp=(0,D.Z)(function*(f,c){return me(f,"POST","/v1/accounts:signInWithEmailLink",F(f,c))})).apply(this,arguments)}function no(){return(no=(0,D.Z)(function*(f,c){return me(f,"POST","/v1/accounts:signInWithEmailLink",F(f,c))})).apply(this,arguments)}class ro extends Ts{constructor(c,d,p,_=null){super("password",p),this._email=c,this._password=d,this._tenantId=_}static _fromEmailAndPassword(c,d){return new ro(c,d,"password")}static _fromEmailAndCode(c,d,p=null){return new ro(c,d,"emailLink",p)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(c){var d=this;return(0,D.Z)(function*(){switch(d.signInMethod){case"password":return Yu(c,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ft);case"emailLink":return function I0(f,c){return Gp.apply(this,arguments)}(c,{email:d._email,oobCode:d._password});default:nt(c,"internal-error")}})()}_linkToIdToken(c,d){var p=this;return(0,D.Z)(function*(){switch(p.signInMethod){case"password":return Yu(c,{idToken:d,returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Up);case"emailLink":return function E0(f,c){return no.apply(this,arguments)}(c,{idToken:d,email:p._email,oobCode:p._password});default:nt(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function si(f,c){return Rd.apply(this,arguments)}function Rd(){return(Rd=(0,D.Z)(function*(f,c){return me(f,"POST","/v1/accounts:signInWithIdp",F(f,c))})).apply(this,arguments)}class Wi extends Ts{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const d=new Wi(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(d.idToken=c.idToken),c.accessToken&&(d.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(d.nonce=c.nonce),c.pendingToken&&(d.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(d.accessToken=c.oauthToken,d.secret=c.oauthTokenSecret):nt("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:_}=d,E=(0,_t._T)(d,["providerId","signInMethod"]);if(!p||!_)return null;const P=new Wi(p,_);return P.idToken=E.idToken||void 0,P.accessToken=E.accessToken||void 0,P.secret=E.secret,P.nonce=E.nonce,P.pendingToken=E.pendingToken||null,P}_getIdTokenResponse(c){return si(c,this.buildRequest())}_linkToIdToken(c,d){const p=this.buildRequest();return p.idToken=d,si(c,p)}_getReauthenticationResolver(c){const d=this.buildRequest();return d.autoCreate=!1,si(c,d)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),c.postBody=(0,G.xO)(d)}return c}}function As(){return(As=(0,D.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:sendVerificationCode",F(f,c))})).apply(this,arguments)}function qi(){return(qi=(0,D.Z)(function*(f,c){return me(f,"POST","/v1/accounts:signInWithPhoneNumber",F(f,c))})).apply(this,arguments)}function oe(){return(oe=(0,D.Z)(function*(f,c){const d=yield me(f,"POST","/v1/accounts:signInWithPhoneNumber",F(f,c));if(d.temporaryProof)throw Kt(f,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const qp={USER_NOT_FOUND:"user-not-found"};function Lo(){return(Lo=(0,D.Z)(function*(f,c){return me(f,"POST","/v1/accounts:signInWithPhoneNumber",F(f,Object.assign(Object.assign({},c),{operation:"REAUTH"})),qp)})).apply(this,arguments)}class ls extends Ts{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,d){return new ls({verificationId:c,verificationCode:d})}static _fromTokenResponse(c,d){return new ls({phoneNumber:c,temporaryProof:d})}_getIdTokenResponse(c){return function bv(f,c){return qi.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,d){return function Sv(f,c){return oe.apply(this,arguments)}(c,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function we(f,c){return Lo.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:d,verificationId:p,verificationCode:_}=this.params;return c&&d?{temporaryProof:c,phoneNumber:d}:{sessionInfo:p,code:_}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:d,verificationCode:p,phoneNumber:_,temporaryProof:E}=c;return p||d||_||E?new ls({verificationId:d,verificationCode:p,phoneNumber:_,temporaryProof:E}):null}}class Ba{constructor(c){var d,p,_,E,P,U;const ee=(0,G.zd)((0,G.pd)(c)),ye=null!==(d=ee.apiKey)&&void 0!==d?d:null,be=null!==(p=ee.oobCode)&&void 0!==p?p:null,et=function Ua(f){switch(f){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(_=ee.mode)&&void 0!==_?_:null);te(ye&&be&&et,"argument-error"),this.apiKey=ye,this.operation=et,this.code=be,this.continueUrl=null!==(E=ee.continueUrl)&&void 0!==E?E:null,this.languageCode=null!==(P=ee.languageCode)&&void 0!==P?P:null,this.tenantId=null!==(U=ee.tenantId)&&void 0!==U?U:null}static parseLink(c){const d=function Rv(f){const c=(0,G.zd)((0,G.pd)(f)).link,d=c?(0,G.zd)((0,G.pd)(c)).deep_link_id:null,p=(0,G.zd)((0,G.pd)(f)).deep_link_id;return(p?(0,G.zd)((0,G.pd)(p)).link:null)||p||d||c||f}(c);try{return new Ba(d)}catch{return null}}}let Ci=(()=>{class f{constructor(){this.providerId=f.PROVIDER_ID}static credential(d,p){return ro._fromEmailAndPassword(d,p)}static credentialWithLink(d,p){const _=Ba.parseLink(p);return te(_,"argument-error"),ro._fromEmailAndCode(d,_.code,_.tenantId)}}return f.PROVIDER_ID="password",f.EMAIL_PASSWORD_SIGN_IN_METHOD="password",f.EMAIL_LINK_SIGN_IN_METHOD="emailLink",f})();class oi{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class Xn extends oi{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class wr extends Xn{static credentialFromJSON(c){const d="string"==typeof c?JSON.parse(c):c;return te("providerId"in d&&"signInMethod"in d,"argument-error"),Wi._fromParams(d)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return te(c.idToken||c.accessToken,"argument-error"),Wi._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return wr.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return wr.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:d,oauthAccessToken:p,oauthTokenSecret:_,pendingToken:E,nonce:P,providerId:U}=c;if(!p&&!_&&!d&&!E||!U)return null;try{return new wr(U)._credential({idToken:d,accessToken:p,nonce:P,pendingToken:E})}catch{return null}}}let vt=(()=>{class f extends Xn{constructor(){super("facebook.com")}static credential(d){return Wi._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return f.credential(d.oauthAccessToken)}catch{return null}}}return f.FACEBOOK_SIGN_IN_METHOD="facebook.com",f.PROVIDER_ID="facebook.com",f})(),ec=(()=>{class f extends Xn{constructor(){super("google.com"),this.addScope("profile")}static credential(d,p){return Wi._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:p})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:p,oauthAccessToken:_}=d;if(!p&&!_)return null;try{return f.credential(p,_)}catch{return null}}}return f.GOOGLE_SIGN_IN_METHOD="google.com",f.PROVIDER_ID="google.com",f})(),Pd=(()=>{class f extends Xn{constructor(){super("github.com")}static credential(d){return Wi._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return f.credential(d.oauthAccessToken)}catch{return null}}}return f.GITHUB_SIGN_IN_METHOD="github.com",f.PROVIDER_ID="github.com",f})();class io extends Ts{constructor(c,d){super(c,c),this.pendingToken=d}_getIdTokenResponse(c){return si(c,this.buildRequest())}_linkToIdToken(c,d){const p=this.buildRequest();return p.idToken=d,si(c,p)}_getReauthenticationResolver(c){const d=this.buildRequest();return d.autoCreate=!1,si(c,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:_,pendingToken:E}=d;return p&&_&&E&&p===_?new io(p,E):null}static _create(c,d){return new io(c,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class bs extends oi{constructor(c){te(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return bs.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return bs.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const d=io.fromJSON(c);return te(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:d,providerId:p}=c;if(!d||!p)return null;try{return io._create(p,d)}catch{return null}}}let Zp=(()=>{class f extends Xn{constructor(){super("twitter.com")}static credential(d,p){return Wi._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:p})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:p,oauthTokenSecret:_}=d;if(!p||!_)return null;try{return f.credential(p,_)}catch{return null}}}return f.TWITTER_SIGN_IN_METHOD="twitter.com",f.PROVIDER_ID="twitter.com",f})();function Nd(f,c){return ja.apply(this,arguments)}function ja(){return(ja=(0,D.Z)(function*(f,c){return me(f,"POST","/v1/accounts:signUp",F(f,c))})).apply(this,arguments)}class Gr{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,d,p,_=!1){return(0,D.Z)(function*(){const E=yield v._fromIdTokenResponse(c,p,_),P=xd(p);return new Gr({user:E,providerId:P,_tokenResponse:p,operationType:d})})()}static _forOperation(c,d,p){return(0,D.Z)(function*(){yield c._updateTokensIfNecessary(p,!0);const _=xd(p);return new Gr({user:c,providerId:_,_tokenResponse:p,operationType:d})})()}}function xd(f){return f.providerId?f.providerId:"phoneNumber"in f?"phone":null}function $a(f){return tc.apply(this,arguments)}function tc(){return(tc=(0,D.Z)(function*(f){var c;const d=Jt(f);if(yield d._initializationPromise,null!==(c=d.currentUser)&&void 0!==c&&c.isAnonymous)return new Gr({user:d.currentUser,providerId:null,operationType:"signIn"});const p=yield Nd(d,{returnSecureToken:!0}),_=yield Gr._fromIdTokenResponse(d,"signIn",p,!0);return yield d._updateCurrentUser(_.user),_})).apply(this,arguments)}class Ha extends G.ZR{constructor(c,d,p,_){var E;super(d.code,d.message),this.operationType=p,this.user=_,Object.setPrototypeOf(this,Ha.prototype),this.customData={appName:c.name,tenantId:null!==(E=c.tenantId)&&void 0!==E?E:void 0,_serverResponse:d.customData._serverResponse,operationType:p}}static _fromErrorAndOperation(c,d,p,_){return new Ha(c,d,p,_)}}function Kp(f,c,d,p){return("reauthenticate"===c?d._getReauthenticationResolver(f):d._getIdTokenResponse(f)).catch(E=>{throw"auth/multi-factor-auth-required"===E.code?Ha._fromErrorAndOperation(f,E,c,p):E})}function Od(f){return new Set(f.map(({providerId:c})=>c).filter(c=>!!c))}function Pv(f,c){return kd.apply(this,arguments)}function kd(){return kd=(0,D.Z)(function*(f,c){const d=(0,G.m9)(f);yield za(!0,d,c);const{providerUserInfo:p}=yield function Ii(f,c){return Ei.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[c]}),_=Od(p||[]);return d.providerData=d.providerData.filter(E=>_.has(E.providerId)),_.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),kd.apply(this,arguments)}function Wr(f,c){return Vd.apply(this,arguments)}function Vd(){return(Vd=(0,D.Z)(function*(f,c,d=!1){const p=yield Qt(f,c._linkToIdToken(f.auth,yield f.getIdToken()),d);return Gr._forOperation(f,"link",p)})).apply(this,arguments)}function za(f,c,d){return Fd.apply(this,arguments)}function Fd(){return(Fd=(0,D.Z)(function*(f,c,d){yield Pn(c);const _=!1===f?"provider-already-linked":"no-such-provider";te(Od(c.providerData).has(d)===f,c.auth,_)})).apply(this,arguments)}function Qp(f,c){return Ld.apply(this,arguments)}function Ld(){return(Ld=(0,D.Z)(function*(f,c,d=!1){const{auth:p}=f,_="reauthenticate";try{const E=yield Qt(f,Kp(p,_,c,f),d);te(E.idToken,p,"internal-error");const P=pn(E.idToken);te(P,p,"internal-error");const{sub:U}=P;return te(f.uid===U,p,"user-mismatch"),Gr._forOperation(f,_,E)}catch(E){throw"auth/user-not-found"===E?.code&&nt(p,"user-mismatch"),E}})).apply(this,arguments)}function Yp(f,c){return nc.apply(this,arguments)}function nc(){return(nc=(0,D.Z)(function*(f,c,d=!1){const p="signIn",_=yield Kp(f,p,c),E=yield Gr._fromIdTokenResponse(f,p,_);return d||(yield f._updateCurrentUser(E.user)),E})).apply(this,arguments)}function rc(f,c){return Ud.apply(this,arguments)}function Ud(){return(Ud=(0,D.Z)(function*(f,c){return Yp(Jt(f),c)})).apply(this,arguments)}function Jp(f,c){return hs.apply(this,arguments)}function hs(){return(hs=(0,D.Z)(function*(f,c){const d=(0,G.m9)(f);return yield za(!1,d,c.providerId),Wr(d,c)})).apply(this,arguments)}function Xp(f,c){return Bd.apply(this,arguments)}function Bd(){return(Bd=(0,D.Z)(function*(f,c){return Qp((0,G.m9)(f),c)})).apply(this,arguments)}function lr(){return(lr=(0,D.Z)(function*(f,c){return me(f,"POST","/v1/accounts:signInWithCustomToken",F(f,c))})).apply(this,arguments)}function Nv(f,c){return ic.apply(this,arguments)}function ic(){return ic=(0,D.Z)(function*(f,c){const d=Jt(f),p=yield function Mv(f,c){return lr.apply(this,arguments)}(d,{token:c,returnSecureToken:!0}),_=yield Gr._fromIdTokenResponse(d,"signIn",p);return yield d._updateCurrentUser(_.user),_}),ic.apply(this,arguments)}class Oe{constructor(c,d){this.factorId=c,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(c,d){return"phoneInfo"in d?er._fromServerResponse(c,d):"totpInfo"in d?at._fromServerResponse(c,d):nt(c,"internal-error")}}class er extends Oe{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,d){return new er(d)}}class at extends Oe{constructor(c){super("totp",c)}static _fromServerResponse(c,d){return new at(d)}}function vn(f,c,d){var p;te((null===(p=d.url)||void 0===p?void 0:p.length)>0,f,"invalid-continue-uri"),te(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,f,"invalid-dynamic-link-domain"),c.continueUrl=d.url,c.dynamicLinkDomain=d.dynamicLinkDomain,c.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(te(d.iOS.bundleId.length>0,f,"missing-ios-bundle-id"),c.iOSBundleId=d.iOS.bundleId),d.android&&(te(d.android.packageName.length>0,f,"missing-android-pkg-name"),c.androidInstallApp=d.android.installApp,c.androidMinimumVersionCode=d.android.minimumVersion,c.androidPackageName=d.android.packageName)}function jn(f){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,D.Z)(function*(f){const c=Jt(f);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function qr(f,c,d){return sc.apply(this,arguments)}function sc(){return(sc=(0,D.Z)(function*(f,c,d){const p=Jt(f),_={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};d&&vn(p,_,d),yield Yu(p,_,"getOobCode",Hp)})).apply(this,arguments)}function eg(f,c,d){return Uo.apply(this,arguments)}function Uo(){return Uo=(0,D.Z)(function*(f,c,d){yield Td((0,G.m9)(f),{oobCode:c,newPassword:d}).catch(function(){var p=(0,D.Z)(function*(_){throw"auth/password-does-not-meet-requirements"===_.code&&jn(f),_});return function(_){return p.apply(this,arguments)}}())}),Uo.apply(this,arguments)}function xv(f,c){return jd.apply(this,arguments)}function jd(){return jd=(0,D.Z)(function*(f,c){yield function Bp(f,c){return jp.apply(this,arguments)}((0,G.m9)(f),{oobCode:c})}),jd.apply(this,arguments)}function Xt(f,c){return he.apply(this,arguments)}function he(){return(he=(0,D.Z)(function*(f,c){const d=(0,G.m9)(f),p=yield Td(d,{oobCode:c}),_=p.requestType;switch(te(_,d,"internal-error"),_){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(p.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(p.mfaInfo,d,"internal-error");default:te(p.email,d,"internal-error")}let E=null;return p.mfaInfo&&(E=Oe._fromServerResponse(Jt(d),p.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.newEmail:p.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.email:p.newEmail)||null,multiFactorInfo:E},operation:_}})).apply(this,arguments)}function ze(f,c){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,D.Z)(function*(f,c){const{data:d}=yield Xt((0,G.m9)(f),c);return d.email})).apply(this,arguments)}function Ti(f,c,d){return so.apply(this,arguments)}function so(){return(so=(0,D.Z)(function*(f,c,d){const p=Jt(f),P=yield Yu(p,{returnSecureToken:!0,email:c,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Nd).catch(ee=>{throw"auth/password-does-not-meet-requirements"===ee.code&&jn(f),ee}),U=yield Gr._fromIdTokenResponse(p,"signIn",P);return yield p._updateCurrentUser(U.user),U})).apply(this,arguments)}function tr(f,c,d){return rc((0,G.m9)(f),Ci.credential(c,d)).catch(function(){var p=(0,D.Z)(function*(_){throw"auth/password-does-not-meet-requirements"===_.code&&jn(f),_});return function(_){return p.apply(this,arguments)}}())}function Bo(f,c,d){return en.apply(this,arguments)}function en(){return(en=(0,D.Z)(function*(f,c,d){const p=Jt(f),_={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function E(P,U){te(U.handleCodeInApp,p,"argument-error"),U&&vn(p,P,U)})(_,d),yield Yu(p,_,"getOobCode",Tv)})).apply(this,arguments)}function Rs(f,c){const d=Ba.parseLink(c);return"EMAIL_SIGNIN"===d?.operation}function jo(f,c,d){return Le.apply(this,arguments)}function Le(){return(Le=(0,D.Z)(function*(f,c,d){const p=(0,G.m9)(f),_=Ci.credentialWithLink(c,d||un());return te(_._tenantId===(p.tenantId||null),p,"tenant-id-mismatch"),rc(p,_)})).apply(this,arguments)}function oc(){return(oc=(0,D.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:createAuthUri",F(f,c))})).apply(this,arguments)}function $o(f,c){return tn.apply(this,arguments)}function tn(){return tn=(0,D.Z)(function*(f,c){const p={identifier:c,continueUri:fn()?un():"http://localhost"},{signinMethods:_}=yield function Ga(f,c){return oc.apply(this,arguments)}((0,G.m9)(f),p);return _||[]}),tn.apply(this,arguments)}function Wa(f,c){return Ps.apply(this,arguments)}function Ps(){return Ps=(0,D.Z)(function*(f,c){const d=(0,G.m9)(f),_={requestType:"VERIFY_EMAIL",idToken:yield f.getIdToken()};c&&vn(d.auth,_,c);const{email:E}=yield function Sd(f,c){return Va.apply(this,arguments)}(d.auth,_);E!==f.email&&(yield f.reload())}),Ps.apply(this,arguments)}function Zi(f,c,d){return oo.apply(this,arguments)}function oo(){return oo=(0,D.Z)(function*(f,c,d){const p=(0,G.m9)(f),E={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield f.getIdToken(),newEmail:c};d&&vn(p.auth,E,d);const{email:P}=yield function v0(f,c){return zp.apply(this,arguments)}(p.auth,E);P!==f.email&&(yield f.reload())}),oo.apply(this,arguments)}function Ki(){return(Ki=(0,D.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function fs(f,c){return ao.apply(this,arguments)}function ao(){return ao=(0,D.Z)(function*(f,{displayName:c,photoURL:d}){if(void 0===c&&void 0===d)return;const p=(0,G.m9)(f),E={idToken:yield p.getIdToken(),displayName:c,photoUrl:d,returnSecureToken:!0},P=yield Qt(p,function tg(f,c){return Ki.apply(this,arguments)}(p.auth,E));p.displayName=P.displayName||null,p.photoURL=P.photoUrl||null;const U=p.providerData.find(({providerId:ee})=>"password"===ee);U&&(U.displayName=p.displayName,U.photoURL=p.photoURL),yield p._updateTokensIfNecessary(P)}),ao.apply(this,arguments)}function qa(f,c){return Ov((0,G.m9)(f),c,null)}function st(f,c){return Ov((0,G.m9)(f),null,c)}function Ov(f,c,d){return Za.apply(this,arguments)}function Za(){return Za=(0,D.Z)(function*(f,c,d){const{auth:p}=f,E={idToken:yield f.getIdToken(),returnSecureToken:!0};c&&(E.email=c),d&&(E.password=d);const P=yield Qt(f,function it(f,c){return ka.apply(this,arguments)}(p,E));yield f._updateTokensIfNecessary(P,!0)}),Za.apply(this,arguments)}class dr{constructor(c,d,p={}){this.isNewUser=c,this.providerId=d,this.profile=p}}class Ka extends dr{constructor(c,d,p,_){super(c,d,p),this.username=_}}class Ho extends dr{constructor(c,d){super(c,"facebook.com",d)}}class Qa extends Ka{constructor(c,d){super(c,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class $n extends dr{constructor(c,d){super(c,"google.com",d)}}class D0 extends Ka{constructor(c,d,p){super(c,"twitter.com",d,p)}}function Dr(f){const{user:c,_tokenResponse:d}=f;return c.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function ng(f){var c,d;if(!f)return null;const{providerId:p}=f,_=f.rawUserInfo?JSON.parse(f.rawUserInfo):{},E=f.isNewUser||"identitytoolkit#SignupNewUserResponse"===f.kind;if(!p&&f?.idToken){const P=null===(d=null===(c=pn(f.idToken))||void 0===c?void 0:c.firebase)||void 0===d?void 0:d.sign_in_provider;if(P)return new dr(E,"anonymous"!==P&&"custom"!==P?P:null)}if(!p)return null;switch(p){case"facebook.com":return new Ho(E,_);case"github.com":return new Qa(E,_);case"google.com":return new $n(E,_);case"twitter.com":return new D0(E,_,f.screenName||null);case"custom":case"anonymous":return new dr(E,null);default:return new dr(E,p,_)}}(d)}class Wo{constructor(c,d,p){this.type=c,this.credential=d,this.user=p}static _fromIdtoken(c,d){return new Wo("enroll",c,d)}static _fromMfaPendingCredential(c){return new Wo("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var d,p;if(c?.multiFactorSession){if(null!==(d=c.multiFactorSession)&&void 0!==d&&d.pendingCredential)return Wo._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(p=c.multiFactorSession)&&void 0!==p&&p.idToken)return Wo._fromIdtoken(c.multiFactorSession.idToken)}return null}}class sg{constructor(c,d,p){this.session=c,this.hints=d,this.signInResolver=p}static _fromError(c,d){const p=Jt(c),_=d.customData._serverResponse,E=(_.mfaInfo||[]).map(U=>Oe._fromServerResponse(p,U));te(_.mfaPendingCredential,p,"internal-error");const P=Wo._fromMfaPendingCredential(_.mfaPendingCredential);return new sg(P,E,function(){var U=(0,D.Z)(function*(ee){const ye=yield ee._process(p,P);delete _.mfaInfo,delete _.mfaPendingCredential;const be=Object.assign(Object.assign({},_),{idToken:ye.idToken,refreshToken:ye.refreshToken});switch(d.operationType){case"signIn":const et=yield Gr._fromIdTokenResponse(p,d.operationType,be);return yield p._updateCurrentUser(et.user),et;case"reauthenticate":return te(d.user,p,"internal-error"),Gr._forOperation(d.user,d.operationType,be);default:nt(p,"internal-error")}});return function(ee){return U.apply(this,arguments)}}())}resolveSignIn(c){var d=this;return(0,D.Z)(function*(){return d.signInResolver(c)})()}}function S0(f,c){var d;const p=(0,G.m9)(f),_=c;return te(c.customData.operationType,p,"argument-error"),te(null===(d=_.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,p,"argument-error"),sg._fromError(p,_)}class og{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(p=>Oe._fromServerResponse(c.auth,p)))})}static _fromUser(c){return new og(c)}getSession(){var c=this;return(0,D.Z)(function*(){return Wo._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,d){var p=this;return(0,D.Z)(function*(){const _=c,E=yield p.getSession(),P=yield Qt(p.user,_._process(p.user.auth,E,d));return yield p.user._updateTokensIfNecessary(P),p.user.reload()})()}unenroll(c){var d=this;return(0,D.Z)(function*(){const p="string"==typeof c?c:c.uid,_=yield d.user.getIdToken();try{const E=yield Qt(d.user,function N0(f,c){return Q(f,"POST","/v2/accounts/mfaEnrollment:withdraw",F(f,c))}(d.user.auth,{idToken:_,mfaEnrollmentId:p}));d.enrolledFactors=d.enrolledFactors.filter(({uid:P})=>P!==p),yield d.user._updateTokensIfNecessary(E),yield d.user.reload()}catch(E){throw E}})()}}const ag=new WeakMap;function ug(f){const c=(0,G.m9)(f);return ag.has(c)||ag.set(c,og._fromUser(c)),ag.get(c)}const Ya="__sak";class kv{constructor(c,d){this.storageRetriever=c,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(Ya,"1"),this.storage.removeItem(Ya),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,d){return this.storage.setItem(c,JSON.stringify(d)),Promise.resolve()}_get(c){const d=this.storage.getItem(c);return Promise.resolve(d?JSON.parse(d):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const Vv=(()=>{class f extends kv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,p)=>this.onStorageEvent(d,p),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function x0(){const f=(0,G.z$)();return Te(f)||ge(f)}()&&function Ee(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Yt(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const p of Object.keys(this.listeners)){const _=this.storage.getItem(p),E=this.localCache[p];_!==E&&d(p,E,_)}}onStorageEvent(d,p=!1){if(!d.key)return void this.forAllChangedKeys((U,ee,ye)=>{this.notifyListeners(U,ye)});const _=d.key;if(p?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const U=this.storage.getItem(_);if(d.newValue!==U)null!==d.newValue?this.storage.setItem(_,d.newValue):this.storage.removeItem(_);else if(this.localCache[_]===d.newValue&&!p)return}const E=()=>{const U=this.storage.getItem(_);!p&&this.localCache[_]===U||this.notifyListeners(_,U)},P=this.storage.getItem(_);!function z(){return(0,G.w1)()&&10===document.documentMode}()||P===d.newValue||d.newValue===d.oldValue?E():setTimeout(E,10)}notifyListeners(d,p){this.localCache[d]=p;const _=this.listeners[d];if(_)for(const E of Array.from(_))E(p&&JSON.parse(p))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,p,_)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:p,newValue:_}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,p){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(p)}_removeListener(d,p){this.listeners[d]&&(this.listeners[d].delete(p),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,p){var _=()=>super._set,E=this;return(0,D.Z)(function*(){yield _().call(E,d,p),E.localCache[d]=JSON.stringify(p)})()}_get(d){var p=()=>super._get,_=this;return(0,D.Z)(function*(){const E=yield p().call(_,d);return _.localCache[d]=JSON.stringify(E),E})()}_remove(d){var p=()=>super._remove,_=this;return(0,D.Z)(function*(){yield p().call(_,d),delete _.localCache[d]})()}}return f.type="LOCAL",f})(),Mn=(()=>{class f extends kv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,p){}_removeListener(d,p){}}return f.type="SESSION",f})();let ai=(()=>{class f{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const p=this.receivers.find(E=>E.isListeningto(d));if(p)return p;const _=new f(d);return this.receivers.push(_),_}isListeningto(d){return this.eventTarget===d}handleEvent(d){var p=this;return(0,D.Z)(function*(){const _=d,{eventId:E,eventType:P,data:U}=_.data,ee=p.handlersMap[P];if(!ee?.size)return;_.ports[0].postMessage({status:"ack",eventId:E,eventType:P});const ye=Array.from(ee).map(function(){var et=(0,D.Z)(function*(Tr){return Tr(_.origin,U)});return function(Tr){return et.apply(this,arguments)}}()),be=yield function ac(f){return Promise.all(f.map(function(){var c=(0,D.Z)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(p){return{fulfilled:!1,reason:p}}});return function(d){return c.apply(this,arguments)}}()))}(ye);_.ports[0].postMessage({status:"done",eventId:E,eventType:P,response:be})})()}_subscribe(d,p){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(p)}_unsubscribe(d,p){this.handlersMap[d]&&p&&this.handlersMap[d].delete(p),(!p||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return f.receivers=[],f})();function qo(f="",c=10){let d="";for(let p=0;p<c;p++)d+=Math.floor(10*Math.random());return f+d}class cg{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,d,p=50){var _=this;return(0,D.Z)(function*(){const E=typeof MessageChannel<"u"?new MessageChannel:null;if(!E)throw new Error("connection_unavailable");let P,U;return new Promise((ee,ye)=>{const be=qo("",20);E.port1.start();const et=setTimeout(()=>{ye(new Error("unsupported_event"))},p);U={messageChannel:E,onMessage(Tr){const Si=Tr;if(Si.data.eventId===be)switch(Si.data.status){case"ack":clearTimeout(et),P=setTimeout(()=>{ye(new Error("timeout"))},3e3);break;case"done":clearTimeout(P),ee(Si.data.response);break;default:clearTimeout(et),clearTimeout(P),ye(new Error("invalid_response"))}}},_.handlers.add(U),E.port1.addEventListener("message",U.onMessage),_.target.postMessage({eventType:c,eventId:be,data:d},[E.port2])}).finally(()=>{U&&_.removeMessageHandler(U)})})()}}function mn(){return window}function Ja(){return typeof mn().WorkerGlobalScope<"u"&&"function"==typeof mn().importScripts}function Xa(){return(Xa=(0,D.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const zd="firebaseLocalStorageDb",lo="firebaseLocalStorage",Zo="fbase_key";class Qi{constructor(c){this.request=c}toPromise(){return new Promise((c,d)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function eu(f,c){return f.transaction([lo],c?"readwrite":"readonly").objectStore(lo)}function pg(){const f=indexedDB.open(zd,1);return new Promise((c,d)=>{f.addEventListener("error",()=>{d(f.error)}),f.addEventListener("upgradeneeded",()=>{const p=f.result;try{p.createObjectStore(lo,{keyPath:Zo})}catch(_){d(_)}}),f.addEventListener("success",(0,D.Z)(function*(){const p=f.result;p.objectStoreNames.contains(lo)?c(p):(p.close(),yield function k0(){const f=indexedDB.deleteDatabase(zd);return new Qi(f).toPromise()}(),c(yield pg()))}))})}function Fv(f,c,d){return Gd.apply(this,arguments)}function Gd(){return(Gd=(0,D.Z)(function*(f,c,d){const p=eu(f,!0).put({[Zo]:c,value:d});return new Qi(p).toPromise()})).apply(this,arguments)}function gg(){return(gg=(0,D.Z)(function*(f,c){const d=eu(f,!1).get(c),p=yield new Qi(d).toPromise();return void 0===p?null:p.value})).apply(this,arguments)}function Wd(f,c){const d=eu(f,!0).delete(c);return new Qi(d).toPromise()}const Bv=(()=>{class f{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,D.Z)(function*(){return d.db||(d.db=yield pg()),d.db})()}_withRetries(d){var p=this;return(0,D.Z)(function*(){let _=0;for(;;)try{const E=yield p._openDb();return yield d(E)}catch(E){if(_++>3)throw E;p.db&&(p.db.close(),p.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,D.Z)(function*(){return Ja()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,D.Z)(function*(){d.receiver=ai._getInstance(function hg(){return Ja()?self:null}()),d.receiver._subscribe("keyChanged",function(){var p=(0,D.Z)(function*(_,E){return{keyProcessed:(yield d._poll()).includes(E.key)}});return function(_,E){return p.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var p=(0,D.Z)(function*(_,E){return["keyChanged"]});return function(_,E){return p.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,D.Z)(function*(){var p,_;if(d.activeServiceWorker=yield function dg(){return Xa.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new cg(d.activeServiceWorker);const E=yield d.sender._send("ping",{},800);E&&null!==(p=E[0])&&void 0!==p&&p.fulfilled&&null!==(_=E[0])&&void 0!==_&&_.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var p=this;return(0,D.Z)(function*(){if(p.sender&&p.activeServiceWorker&&function Hd(){var f;return(null===(f=navigator?.serviceWorker)||void 0===f?void 0:f.controller)||null}()===p.activeServiceWorker)try{yield p.sender._send("keyChanged",{key:d},p.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,D.Z)(function*(){try{if(!indexedDB)return!1;const d=yield pg();return yield Fv(d,Ya,"1"),yield Wd(d,Ya),!0}catch{}return!1})()}_withPendingWrite(d){var p=this;return(0,D.Z)(function*(){p.pendingWrites++;try{yield d()}finally{p.pendingWrites--}})()}_set(d,p){var _=this;return(0,D.Z)(function*(){return _._withPendingWrite((0,D.Z)(function*(){return yield _._withRetries(E=>Fv(E,d,p)),_.localCache[d]=p,_.notifyServiceWorker(d)}))})()}_get(d){var p=this;return(0,D.Z)(function*(){const _=yield p._withRetries(E=>function Lv(f,c){return gg.apply(this,arguments)}(E,d));return p.localCache[d]=_,_})()}_remove(d){var p=this;return(0,D.Z)(function*(){return p._withPendingWrite((0,D.Z)(function*(){return yield p._withRetries(_=>Wd(_,d)),delete p.localCache[d],p.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,D.Z)(function*(){const p=yield d._withRetries(P=>{const U=eu(P,!1).getAll();return new Qi(U).toPromise()});if(!p)return[];if(0!==d.pendingWrites)return[];const _=[],E=new Set;if(0!==p.length)for(const{fbase_key:P,value:U}of p)E.add(P),JSON.stringify(d.localCache[P])!==JSON.stringify(U)&&(d.notifyListeners(P,U),_.push(P));for(const P of Object.keys(d.localCache))d.localCache[P]&&!E.has(P)&&(d.notifyListeners(P,null),_.push(P));return _})()}notifyListeners(d,p){this.localCache[d]=p;const _=this.listeners[d];if(_)for(const E of Array.from(_))E(p)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,D.Z)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,p){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(p)}_removeListener(d,p){this.listeners[d]&&(this.listeners[d].delete(p),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return f.type="LOCAL",f})(),uc=1e12;class Hv{constructor(c){this.auth=c,this.counter=uc,this._widgets=new Map}render(c,d){const p=this.counter;return this._widgets.set(p,new vg(c,this.auth.name,d||{})),this.counter++,p}reset(c){var d;const p=c||uc;null===(d=this._widgets.get(p))||void 0===d||d.delete(),this._widgets.delete(p)}getResponse(c){var d;return(null===(d=this._widgets.get(c||uc))||void 0===d?void 0:d.getResponse())||""}execute(c){var d=this;return(0,D.Z)(function*(){var p;return null===(p=d._widgets.get(c||uc))||void 0===p||p.execute(),""})()}}class vg{constructor(c,d,p){this.params=p,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const _="string"==typeof c?document.getElementById(c):c;te(_,"argument-error",{appName:d}),this.container=_,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function zv(f){const c=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<f;p++)c.push(d.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":d}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const cc=wv("rcb"),Gv=new Fr(3e4,6e4);class F0{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=mn().grecaptcha)||void 0===c||!c.render)}load(c,d=""){return te(function Wv(f){return f.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(f)}(d),c,"argument-error"),this.shouldResolveImmediately(d)&&Sn(mn().grecaptcha)?Promise.resolve(mn().grecaptcha):new Promise((p,_)=>{const E=mn().setTimeout(()=>{_(Dt(c,"network-request-failed"))},Gv.get());mn()[cc]=()=>{mn().clearTimeout(E),delete mn()[cc];const U=mn().grecaptcha;if(!U||!Sn(U))return void _(Dt(c,"internal-error"));const ee=U.render;U.render=(ye,be)=>{const et=ee(ye,be);return this.counter++,et},this.hostLanguage=d,p(U)},Op(`${function m0(){return Di.recaptchaV2Script}()}?${(0,G.xO)({onload:cc,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(E),_(Dt(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var d;return!(null===(d=mn().grecaptcha)||void 0===d||!d.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ui{load(c){return(0,D.Z)(function*(){return new Hv(c)})()}clearedOneInstance(){}}const Zd="recaptcha",qv={theme:"light",type:"image"};class Zv{constructor(c,d,p=Object.assign({},qv)){this.parameters=p,this.type=Zd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Jt(c),this.isInvisible="invisible"===this.parameters.size,te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const _="string"==typeof d?document.getElementById(d):d;te(_,this.auth,"argument-error"),this.container=_,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ui:new F0,this.validateStartingState()}verify(){var c=this;return(0,D.Z)(function*(){c.assertNotDestroyed();const d=yield c.render(),p=c.getAssertedRecaptcha();return p.getResponse(d)||new Promise(E=>{const P=U=>{U&&(c.tokenChangeListeners.delete(P),E(U))};c.tokenChangeListeners.add(P),c.isInvisible&&p.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return d=>{if(this.tokenChangeListeners.forEach(p=>p(d)),"function"==typeof c)c(d);else if("string"==typeof c){const p=mn()[c];"function"==typeof p&&p(d)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,D.Z)(function*(){if(yield c.init(),!c.widgetId){let d=c.container;if(!c.isInvisible){const p=document.createElement("div");d.appendChild(p),d=p}c.widgetId=c.getAssertedRecaptcha().render(d,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,D.Z)(function*(){te(fn()&&!Ja(),c.auth,"internal-error"),yield function Ig(){let f=null;return new Promise(c=>{"complete"!==document.readyState?(f=()=>c(),window.addEventListener("load",f)):c()}).catch(c=>{throw f&&window.removeEventListener("load",f),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const d=yield function Ir(f){return vi.apply(this,arguments)}(c.auth);te(d,c.auth,"internal-error"),c.parameters.sitekey=d})()}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class lc{constructor(c,d){this.verificationId=c,this.onConfirmation=d}confirm(c){const d=ls._fromVerification(this.verificationId,c);return this.onConfirmation(d)}}function Kv(f,c,d){return tu.apply(this,arguments)}function tu(){return(tu=(0,D.Z)(function*(f,c,d){const p=Jt(f),_=yield Tt(p,c,(0,G.m9)(d));return new lc(_,E=>rc(p,E))})).apply(this,arguments)}function Qv(f,c,d){return ci.apply(this,arguments)}function ci(){return(ci=(0,D.Z)(function*(f,c,d){const p=(0,G.m9)(f);yield za(!1,p,"phone");const _=yield Tt(p.auth,c,(0,G.m9)(d));return new lc(_,E=>Jp(p,E))})).apply(this,arguments)}function Eg(f,c,d){return dc.apply(this,arguments)}function dc(){return(dc=(0,D.Z)(function*(f,c,d){const p=(0,G.m9)(f),_=yield Tt(p.auth,c,(0,G.m9)(d));return new lc(_,E=>Xp(p,E))})).apply(this,arguments)}function Tt(f,c,d){return nu.apply(this,arguments)}function nu(){return nu=(0,D.Z)(function*(f,c,d){var p;const _=yield d.verify();try{let E;if(te("string"==typeof _,f,"argument-error"),te(d.type===Zd,f,"argument-error"),E="string"==typeof c?{phoneNumber:c}:c,"session"in E){const P=E.session;if("phoneNumber"in E)return te("enroll"===P.type,f,"internal-error"),(yield function R0(f,c){return Q(f,"POST","/v2/accounts/mfaEnrollment:start",F(f,c))}(f,{idToken:P.credential,phoneEnrollmentInfo:{phoneNumber:E.phoneNumber,recaptchaToken:_}})).phoneSessionInfo.sessionInfo;{te("signin"===P.type,f,"internal-error");const U=(null===(p=E.multiFactorHint)||void 0===p?void 0:p.uid)||E.multiFactorUid;return te(U,f,"missing-multi-factor-info"),(yield function V0(f,c){return Q(f,"POST","/v2/accounts/mfaSignIn:start",F(f,c))}(f,{mfaPendingCredential:P.credential,mfaEnrollmentId:U,phoneSignInInfo:{recaptchaToken:_}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:P}=yield function Wp(f,c){return As.apply(this,arguments)}(f,{phoneNumber:E.phoneNumber,recaptchaToken:_});return P}}finally{d._reset()}}),nu.apply(this,arguments)}function hc(f,c){return nr.apply(this,arguments)}function nr(){return(nr=(0,D.Z)(function*(f,c){yield Wr((0,G.m9)(f),c)})).apply(this,arguments)}let Yv=(()=>{class f{constructor(d){this.providerId=f.PROVIDER_ID,this.auth=Jt(d)}verifyPhoneNumber(d,p){return Tt(this.auth,d,(0,G.m9)(p))}static credential(d,p){return ls._fromVerification(d,p)}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:p,temporaryProof:_}=d;return p&&_?ls._fromTokenResponse(p,_):null}}return f.PROVIDER_ID="phone",f.PHONE_SIGN_IN_METHOD="phone",f})();function Ms(f,c){return c?W(c):(te(f._popupRedirectResolver,f,"argument-error"),f._popupRedirectResolver)}class Ns extends Ts{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return si(c,this._buildIdpRequest())}_linkToIdToken(c,d){return si(c,this._buildIdpRequest(d))}_getReauthenticationResolver(c){return si(c,this._buildIdpRequest())}_buildIdpRequest(c){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(d.idToken=c),d}}function Zr(f){return Yp(f.auth,new Ns(f),f.bypassAuthState)}function Jv(f){const{auth:c,user:d}=f;return te(d,c,"internal-error"),Qp(d,new Ns(f),f.bypassAuthState)}function Xv(f){return Kd.apply(this,arguments)}function Kd(){return(Kd=(0,D.Z)(function*(f){const{auth:c,user:d}=f;return te(d,c,"internal-error"),Wr(d,new Ns(f),f.bypassAuthState)})).apply(this,arguments)}class ps{constructor(c,d,p,_,E=!1){this.auth=c,this.resolver=p,this.user=_,this.bypassAuthState=E,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var c=this;return new Promise(function(){var d=(0,D.Z)(function*(p,_){c.pendingPromise={resolve:p,reject:_};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(E){c.reject(E)}});return function(p,_){return d.apply(this,arguments)}}())}onAuthEvent(c){var d=this;return(0,D.Z)(function*(){const{urlResponse:p,sessionId:_,postBody:E,tenantId:P,error:U,type:ee}=c;if(U)return void d.reject(U);const ye={auth:d.auth,requestUri:p,sessionId:_,tenantId:P||void 0,postBody:E||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(ee)(ye))}catch(be){d.reject(be)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return Zr;case"linkViaPopup":case"linkViaRedirect":return Xv;case"reauthViaPopup":case"reauthViaRedirect":return Jv;default:nt(this.auth,"internal-error")}}resolve(c){Bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){Bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const wg=new Fr(2e3,1e4);function eI(f,c,d){return fc.apply(this,arguments)}function fc(){return(fc=(0,D.Z)(function*(f,c,d){const p=Jt(f);_n(f,c,oi);const _=Ms(p,d);return new gc(p,"signInViaPopup",c,_).executeNotNull()})).apply(this,arguments)}function Dg(f,c,d){return pc.apply(this,arguments)}function pc(){return(pc=(0,D.Z)(function*(f,c,d){const p=(0,G.m9)(f);_n(p.auth,c,oi);const _=Ms(p.auth,d);return new gc(p.auth,"reauthViaPopup",c,_,p).executeNotNull()})).apply(this,arguments)}function tI(f,c,d){return ke.apply(this,arguments)}function ke(){return(ke=(0,D.Z)(function*(f,c,d){const p=(0,G.m9)(f);_n(p.auth,c,oi);const _=Ms(p.auth,d);return new gc(p.auth,"linkViaPopup",c,_,p).executeNotNull()})).apply(this,arguments)}let gc=(()=>{class f extends ps{constructor(d,p,_,E,P){super(d,p,E,P),this.provider=_,this.authWindow=null,this.pollId=null,f.currentPopupAction&&f.currentPopupAction.cancel(),f.currentPopupAction=this}executeNotNull(){var d=this;return(0,D.Z)(function*(){const p=yield d.execute();return te(p,d.auth,"internal-error"),p})()}onExecution(){var d=this;return(0,D.Z)(function*(){Bt(1===d.filter.length,"Popup operations only handle one event");const p=qo();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],p),d.authWindow.associatedEvent=p,d.resolver._originValidation(d.auth).catch(_=>{d.reject(_)}),d.resolver._isIframeWebStorageSupported(d.auth,_=>{_||d.reject(Dt(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(Dt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,f.currentPopupAction=null}pollUserCancellation(){const d=()=>{var p,_;this.pollId=null!==(_=null===(p=this.authWindow)||void 0===p?void 0:p.window)&&void 0!==_&&_.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Dt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,wg.get())};d()}}return f.currentPopupAction=null,f})();const L0="pendingRedirect",ru=new Map;class nI extends ps{constructor(c,d,p=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,p),this.eventId=null}execute(){var c=()=>super.execute,d=this;return(0,D.Z)(function*(){let p=ru.get(d.auth._key());if(!p){try{const E=(yield function rI(f,c){return mc.apply(this,arguments)}(d.resolver,d.auth))?yield c().call(d):null;p=()=>Promise.resolve(E)}catch(_){p=()=>Promise.reject(_)}ru.set(d.auth._key(),p)}return d.bypassAuthState||ru.set(d.auth._key(),()=>Promise.resolve(null)),p()})()}onAuthEvent(c){var d=()=>super.onAuthEvent,p=this;return(0,D.Z)(function*(){if("signInViaRedirect"===c.type)return d().call(p,c);if("unknown"!==c.type){if(c.eventId){const _=yield p.auth._redirectUserForId(c.eventId);if(_)return p.user=_,d().call(p,c);p.resolve(null)}}else p.resolve(null)})()}onExecution(){return(0,D.Z)(function*(){})()}cleanUp(){}}function mc(){return(mc=(0,D.Z)(function*(f,c){const d=Ag(c),p=Tg(f);if(!(yield p._isAvailable()))return!1;const _="true"===(yield p._get(d));return yield p._remove(d),_})).apply(this,arguments)}function xs(f,c){return Qd.apply(this,arguments)}function Qd(){return(Qd=(0,D.Z)(function*(f,c){return Tg(f)._set(Ag(c),"true")})).apply(this,arguments)}function iI(){ru.clear()}function Cg(f,c){ru.set(f._key(),c)}function Tg(f){return W(f._redirectPersistence)}function Ag(f){return Ve(L0,f.config.apiKey,f.name)}function Y(f,c,d){return function pt(f,c,d){return hr.apply(this,arguments)}(f,c,d)}function hr(){return(hr=(0,D.Z)(function*(f,c,d){const p=Jt(f);_n(f,c,oi),yield p._initializationPromise;const _=Ms(p,d);return yield xs(_,p),_._openRedirect(p,c,"signInViaRedirect")})).apply(this,arguments)}function Kr(f,c,d){return function Hn(f,c,d){return _c.apply(this,arguments)}(f,c,d)}function _c(){return(_c=(0,D.Z)(function*(f,c,d){const p=(0,G.m9)(f);_n(p.auth,c,oi),yield p.auth._initializationPromise;const _=Ms(p.auth,d);yield xs(_,p.auth);const E=yield rr(p);return _._openRedirect(p.auth,c,"reauthViaRedirect",E)})).apply(this,arguments)}function iu(f,c,d){return function Yi(f,c,d){return su.apply(this,arguments)}(f,c,d)}function su(){return(su=(0,D.Z)(function*(f,c,d){const p=(0,G.m9)(f);_n(p.auth,c,oi),yield p.auth._initializationPromise;const _=Ms(p.auth,d);yield za(!1,p,c.providerId),yield xs(_,p.auth);const E=yield rr(p);return _._openRedirect(p.auth,c,"linkViaRedirect",E)})).apply(this,arguments)}function Yd(f,c){return Jd.apply(this,arguments)}function Jd(){return(Jd=(0,D.Z)(function*(f,c){return yield Jt(f)._initializationPromise,bg(f,c,!1)})).apply(this,arguments)}function bg(f,c){return yc.apply(this,arguments)}function yc(){return(yc=(0,D.Z)(function*(f,c,d=!1){const p=Jt(f),_=Ms(p,c),P=yield new nI(p,_,d).execute();return P&&!d&&(delete P.user._redirectEventId,yield p._persistUserIfCurrent(P.user),yield p._setRedirectUser(null,c)),P})).apply(this,arguments)}function rr(f){return bi.apply(this,arguments)}function bi(){return(bi=(0,D.Z)(function*(f){const c=qo(`${f.uid}:::`);return f._redirectEventId=c,yield f.auth._setRedirectUser(f),yield f.auth._persistUserIfCurrent(f),c})).apply(this,arguments)}class ho{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let d=!1;return this.consumers.forEach(p=>{this.isEventForConsumer(c,p)&&(d=!0,this.sendToConsumer(c,p),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function Pg(f){switch(f.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Rg(f);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=c,d=!0)),d}sendToConsumer(c,d){var p;if(c.error&&!Rg(c)){const _=(null===(p=c.error.code)||void 0===p?void 0:p.split("auth/")[1])||"internal-error";d.onError(Dt(this.auth,_))}else d.onAuthEvent(c)}isEventForConsumer(c,d){const p=null===d.eventId||!!c.eventId&&c.eventId===d.eventId;return d.filter.includes(c.type)&&p}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ji(c))}saveEventToCache(c){this.cachedEventUids.add(Ji(c)),this.lastProcessedEventTime=Date.now()}}function Ji(f){return[f.type,f.eventId,f.sessionId,f.tenantId].filter(c=>c).join("-")}function Rg({type:f,error:c}){return"unknown"===f&&"auth/no-auth-event"===c?.code}function Mg(f){return Xd.apply(this,arguments)}function Xd(){return(Xd=(0,D.Z)(function*(f,c={}){return Q(f,"GET","/v1/projects",c)})).apply(this,arguments)}const eh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,th=/^https?/;function ou(){return(ou=(0,D.Z)(function*(f){if(f.config.emulator)return;const{authorizedDomains:c}=yield Mg(f);for(const d of c)try{if(sI(d))return}catch{}nt(f,"unauthorized-domain")})).apply(this,arguments)}function sI(f){const c=un(),{protocol:d,hostname:p}=new URL(c);if(f.startsWith("chrome-extension://")){const P=new URL(f);return""===P.hostname&&""===p?"chrome-extension:"===d&&f.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===d&&P.hostname===p}if(!th.test(d))return!1;if(eh.test(f))return p===f;const _=f.replace(/\./g,"\\.");return new RegExp("^(.+\\."+_+"|"+_+")$","i").test(p)}const xg=new Fr(3e4,6e4);function vc(){const f=mn().___jsl;if(f?.H)for(const c of Object.keys(f.H))if(f.H[c].r=f.H[c].r||[],f.H[c].L=f.H[c].L||[],f.H[c].r=[...f.H[c].L],f.CP)for(let d=0;d<f.CP.length;d++)f.CP[d]=null}let au=null;const Vg=new Fr(5e3,15e3),nh="__/auth/iframe",oI="emulator/auth/iframe",aI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fo(f){const c=f.config;te(c.authDomain,f,"auth-domain-config-required");const d=c.emulator?Ui(c,oI):`https://${f.config.authDomain}/${nh}`,p={apiKey:c.apiKey,appName:f.name,v:N.SDK_VERSION},_=fr.get(f.config.apiHost);_&&(p.eid=_);const E=f._getFrameworks();return E.length&&(p.fw=E.join(",")),`${d}?${(0,G.xO)(p).slice(1)}`}function rh(){return rh=(0,D.Z)(function*(f){const c=yield function kg(f){return au=au||function Og(f){return new Promise((c,d)=>{var p,_,E;function P(){vc(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{vc(),d(Dt(f,"network-request-failed"))},timeout:xg.get()})}if(null!==(_=null===(p=mn().gapi)||void 0===p?void 0:p.iframes)&&void 0!==_&&_.Iframe)c(gapi.iframes.getContext());else{if(null===(E=mn().gapi)||void 0===E||!E.load){const U=wv("iframefcb");return mn()[U]=()=>{gapi.load?P():d(Dt(f,"network-request-failed"))},Op(`${function Ev(){return Di.gapiScript}()}?onload=${U}`).catch(ee=>d(ee))}P()}}).catch(c=>{throw au=null,c})}(f),au}(f),d=mn().gapi;return te(d,f,"internal-error"),c.open({where:document.body,url:fo(f),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aI,dontclear:!0},p=>new Promise(function(){var _=(0,D.Z)(function*(E,P){yield p.restyle({setHideOnLeave:!1});const U=Dt(f,"network-request-failed"),ee=mn().setTimeout(()=>{P(U)},Vg.get());function ye(){mn().clearTimeout(ee),E(p)}p.ping(ye).then(ye,()=>{P(U)})});return function(E,P){return _.apply(this,arguments)}}()))}),rh.apply(this,arguments)}const uI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class uu{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Ic="__/auth/handler",Ec="emulator/auth/handler",wc=encodeURIComponent("fac");function cu(f,c,d,p,_,E){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,D.Z)(function*(f,c,d,p,_,E){te(f.config.authDomain,f,"auth-domain-config-required"),te(f.config.apiKey,f,"invalid-api-key");const P={apiKey:f.config.apiKey,appName:f.name,authType:d,redirectUrl:p,v:N.SDK_VERSION,eventId:_};if(c instanceof oi){c.setDefaultLanguage(f.languageCode),P.providerId=c.providerId||"",(0,G.xb)(c.getCustomParameters())||(P.customParameters=JSON.stringify(c.getCustomParameters()));for(const[be,et]of Object.entries(E||{}))P[be]=et}if(c instanceof Xn){const be=c.getScopes().filter(et=>""!==et);be.length>0&&(P.scopes=be.join(","))}f.tenantId&&(P.tid=f.tenantId);const U=P;for(const be of Object.keys(U))void 0===U[be]&&delete U[be];const ee=yield f._getAppCheckToken(),ye=ee?`#${wc}=${encodeURIComponent(ee)}`:"";return`${function Ug({config:f}){return f.emulator?Ui(f,Ec):`https://${f.authDomain}/${Ic}`}(f)}?${(0,G.xO)(U).slice(1)}${ye}`})).apply(this,arguments)}const ih="webStorageSupport",Qo=class Ko{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Mn,this._completeRedirectFn=bg,this._overrideRedirectResult=Cg}_openPopup(c,d,p,_){var E=this;return(0,D.Z)(function*(){var P;Bt(null===(P=E.eventManagers[c._key()])||void 0===P?void 0:P.manager,"_initialize() not called before _openPopup()");const U=yield cu(c,d,p,un(),_);return function Os(f,c,d,p=500,_=600){const E=Math.max((window.screen.availHeight-_)/2,0).toString(),P=Math.max((window.screen.availWidth-p)/2,0).toString();let U="";const ee=Object.assign(Object.assign({},uI),{width:p.toString(),height:_.toString(),top:E,left:P}),ye=(0,G.z$)().toLowerCase();d&&(U=Vn(ye)?"_blank":d),Rt(ye)&&(c=c||"http://localhost",ee.scrollbars="yes");const be=Object.entries(ee).reduce((Tr,[Si,Xi])=>`${Tr}${Si}=${Xi},`,"");if(function rt(f=(0,G.z$)()){var c;return ge(f)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(ye)&&"_self"!==U)return function dI(f,c){const d=document.createElement("a");d.href=f,d.target=c;const p=document.createEvent("MouseEvent");p.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(p)}(c||"",U),new uu(null);const et=window.open(c||"",U,be);te(et,f,"popup-blocked");try{et.focus()}catch{}return new uu(et)}(c,U,qo())})()}_openRedirect(c,d,p,_){var E=this;return(0,D.Z)(function*(){return yield E._originValidation(c),function lg(f){mn().location.href=f}(yield cu(c,d,p,un(),_)),new Promise(()=>{})})()}_initialize(c){const d=c._key();if(this.eventManagers[d]){const{manager:_,promise:E}=this.eventManagers[d];return _?Promise.resolve(_):(Bt(E,"If manager is not set, promise should be"),E)}const p=this.initAndGetManager(c);return this.eventManagers[d]={promise:p},p.catch(()=>{delete this.eventManagers[d]}),p}initAndGetManager(c){var d=this;return(0,D.Z)(function*(){const p=yield function nn(f){return rh.apply(this,arguments)}(c),_=new ho(c);return p.register("authEvent",E=>(te(E?.authEvent,c,"invalid-auth-event"),{status:_.onEvent(E.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[c._key()]={manager:_},d.iframes[c._key()]=p,_})()}_isIframeWebStorageSupported(c,d){this.iframes[c._key()].send(ih,{type:ih},_=>{var E;const P=null===(E=_?.[0])||void 0===E?void 0:E[ih];void 0!==P&&d(!!P),nt(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const d=c._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function Ng(f){return ou.apply(this,arguments)}(c)),this.originValidationPromises[d]}get _shouldInitProactively(){return Yt()||Te()||ge()}};class hI{constructor(c){this.factorId=c}_process(c,d,p){switch(d.type){case"enroll":return this._finalizeEnroll(c,d.credential,p);case"signin":return this._finalizeSignIn(c,d.credential);default:return ut("unexpected MultiFactorSessionType")}}}class Bg extends hI{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new Bg(c)}_finalizeEnroll(c,d,p){return function P0(f,c){return Q(f,"POST","/v2/accounts/mfaEnrollment:finalize",F(f,c))}(c,{idToken:d,displayName:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,d){return function jv(f,c){return Q(f,"POST","/v2/accounts/mfaSignIn:finalize",F(f,c))}(c,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let sh=(()=>{class f{constructor(){}static assertion(d){return Bg._fromCredential(d)}}return f.FACTOR_ID="phone",f})();var fI="@firebase/auth";class lu{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var d=this;return(0,D.Z)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const d=this.auth.onIdTokenChanged(p=>{c(p?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,d),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const d=this.internalListeners.get(c);d&&(this.internalListeners.delete(c),d(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Tc=(0,G.Pz)("authIdTokenMaxAge")||300;let gI=null;const $g=f=>function(){var c=(0,D.Z)(function*(d){const p=d&&(yield d.getIdTokenResult()),_=p&&((new Date).getTime()-Date.parse(p.issuedAtTime))/1e3;if(_&&_>Tc)return;const E=p?.token;gI!==E&&(gI=E,yield fetch(f,{method:E?"POST":"DELETE",headers:E?{Authorization:`Bearer ${E}`}:{}}))});return function(d){return c.apply(this,arguments)}}();function Hg(f=(0,N.getApp)()){const c=(0,N._getProvider)(f,"auth");if(c.isInitialized())return c.getImmediate();const d=function Er(f,c){const d=(0,N._getProvider)(f,"auth");if(d.isInitialized()){const _=d.getImmediate(),E=d.getOptions();if((0,G.vZ)(E,c??{}))return _;nt(_,"already-initialized")}return d.initialize({options:c})}(f,{popupRedirectResolver:Qo,persistence:[Bv,Vv,Mn]}),p=(0,G.Pz)("authTokenSyncURL");if(p){const E=$g(p);(function $d(f,c,d){(0,G.m9)(f).beforeAuthStateChanged(c,d)})(d,E,()=>E(d.currentUser)),function Ai(f,c,d,p){(0,G.m9)(f).onIdTokenChanged(c,d,p)}(d,P=>E(P))}const _=(0,G.q4)("auth");return _&&Lp(d,`http://${_}`),d}(function g0(f){Di=f})({loadJS:f=>new Promise((c,d)=>{const p=document.createElement("script");p.setAttribute("src",f),p.onload=c,p.onerror=_=>{const E=Dt("internal-error");E.customData=_,d(E)},p.type="text/javascript",p.charset="UTF-8",function mI(){var f,c;return null!==(c=null===(f=document.getElementsByTagName("head"))||void 0===f?void 0:f[0])&&void 0!==c?c:document}().appendChild(p)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function du(f){(0,N._registerComponent)(new qt.wA("auth",(c,{options:d})=>{const p=c.getProvider("app").getImmediate(),_=c.getProvider("heartbeat"),E=c.getProvider("app-check-internal"),{apiKey:P,authDomain:U}=p.options;te(P&&!P.includes(":"),"invalid-api-key",{appName:p.name});const ee={apiKey:P,authDomain:U,clientPlatform:f,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Je(f)},ye=new p0(p,_,E,ee);return function Ju(f,c){const d=c?.persistence||[],p=(Array.isArray(d)?d:[d]).map(W);c?.errorMap&&f._updateErrorMap(c.errorMap),f._initializeWithPersistence(p,c?.popupRedirectResolver)}(ye,d),ye},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,d,p)=>{c.getProvider("auth-internal").initialize()})),(0,N._registerComponent)(new qt.wA("auth-internal",c=>{const d=Jt(c.getProvider("auth").getImmediate());return new lu(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,N.registerVersion)(fI,"1.6.0",function pI(f){switch(f){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(f)),(0,N.registerVersion)(fI,"1.6.0","esm2017")}("Browser")},58:(Li,Tn,xe)=>{xe.d(Tn,{BH:()=>Vr,G6:()=>Ui,L:()=>lt,LL:()=>K,P0:()=>Zt,Pz:()=>Dt,Sg:()=>_n,UG:()=>ut,ZB:()=>De,ZR:()=>Q,aH:()=>nt,b$:()=>fn,eu:()=>j,hl:()=>L,jU:()=>Bt,m9:()=>Gi,ne:()=>Lr,pd:()=>Ei,q4:()=>bn,r3:()=>Rn,ru:()=>un,tV:()=>Z,uI:()=>te,vZ:()=>Bi,w1:()=>yi,xO:()=>$i,xb:()=>Ir,z$:()=>Ze,zd:()=>Ii});const Ce=function(b){const T=[];let I=0;for(let w=0;w<b.length;w++){let v=b.charCodeAt(w);v<128?T[I++]=v:v<2048?(T[I++]=v>>6|192,T[I++]=63&v|128):55296==(64512&v)&&w+1<b.length&&56320==(64512&b.charCodeAt(w+1))?(v=65536+((1023&v)<<10)+(1023&b.charCodeAt(++w)),T[I++]=v>>18|240,T[I++]=v>>12&63|128,T[I++]=v>>6&63|128,T[I++]=63&v|128):(T[I++]=v>>12|224,T[I++]=v>>6&63|128,T[I++]=63&v|128)}return T},qt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(b,T){if(!Array.isArray(b))throw Error("encodeByteArray takes an array as a parameter");this.init_();const I=T?this.byteToCharMapWebSafe_:this.byteToCharMap_,w=[];for(let v=0;v<b.length;v+=3){const A=b[v],W=v+1<b.length,_e=W?b[v+1]:0,Ie=v+2<b.length,Ve=Ie?b[v+2]:0;let Rt=(15&_e)<<2|Ve>>6,Te=63&Ve;Ie||(Te=64,W||(Rt=64)),w.push(I[A>>2],I[(3&A)<<4|_e>>4],I[Rt],I[Te])}return w.join("")},encodeString(b,T){return this.HAS_NATIVE_SUPPORT&&!T?btoa(b):this.encodeByteArray(Ce(b),T)},decodeString(b,T){return this.HAS_NATIVE_SUPPORT&&!T?atob(b):function(b){const T=[];let I=0,w=0;for(;I<b.length;){const v=b[I++];if(v<128)T[w++]=String.fromCharCode(v);else if(v>191&&v<224){const A=b[I++];T[w++]=String.fromCharCode((31&v)<<6|63&A)}else if(v>239&&v<365){const Ie=((7&v)<<18|(63&b[I++])<<12|(63&b[I++])<<6|63&b[I++])-65536;T[w++]=String.fromCharCode(55296+(Ie>>10)),T[w++]=String.fromCharCode(56320+(1023&Ie))}else{const A=b[I++],W=b[I++];T[w++]=String.fromCharCode((15&v)<<12|(63&A)<<6|63&W)}}return T.join("")}(this.decodeStringToByteArray(b,T))},decodeStringToByteArray(b,T){this.init_();const I=T?this.charToByteMapWebSafe_:this.charToByteMap_,w=[];for(let v=0;v<b.length;){const A=I[b.charAt(v++)],_e=v<b.length?I[b.charAt(v)]:0;++v;const Ve=v<b.length?I[b.charAt(v)]:64;++v;const fe=v<b.length?I[b.charAt(v)]:64;if(++v,null==A||null==_e||null==Ve||null==fe)throw new hn;w.push(A<<2|_e>>4),64!==Ve&&(w.push(_e<<4&240|Ve>>2),64!==fe&&w.push(Ve<<6&192|fe))}return w},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let b=0;b<this.ENCODED_VALS.length;b++)this.byteToCharMap_[b]=this.ENCODED_VALS.charAt(b),this.charToByteMap_[this.byteToCharMap_[b]]=b,this.byteToCharMapWebSafe_[b]=this.ENCODED_VALS_WEBSAFE.charAt(b),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[b]]=b,b>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(b)]=b,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(b)]=b)}}};class hn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lt=function(b){return function(b){const T=Ce(b);return qt.encodeByteArray(T,!0)}(b).replace(/\./g,"")},Z=function(b){try{return qt.decodeString(b,!0)}catch(T){console.error("base64Decode failed: ",T)}return null};function De(b,T){if(!(T instanceof Object))return T;switch(T.constructor){case Date:return new Date(T.getTime());case Object:void 0===b&&(b={});break;case Array:b=[];break;default:return T}for(const I in T)!T.hasOwnProperty(I)||!He(I)||(b[I]=De(b[I],T[I]));return b}function He(b){return"__proto__"!==b}const Be=()=>{try{return function yt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const b=process.env.__FIREBASE_DEFAULTS__;return b?JSON.parse(b):void 0})()||(()=>{if(typeof document>"u")return;let b;try{b=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const T=b&&Z(b[1]);return T&&JSON.parse(T)})()}catch(b){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${b}`)}},bn=b=>{var T,I;return null===(I=null===(T=Be())||void 0===T?void 0:T.emulatorHosts)||void 0===I?void 0:I[b]},Zt=b=>{const T=bn(b);if(!T)return;const I=T.lastIndexOf(":");if(I<=0||I+1===T.length)throw new Error(`Invalid host ${T} with no separate hostname and port!`);const w=parseInt(T.substring(I+1),10);return"["===T[0]?[T.substring(1,I-1),w]:[T.substring(0,I),w]},nt=()=>{var b;return null===(b=Be())||void 0===b?void 0:b.config},Dt=b=>{var T;return null===(T=Be())||void 0===T?void 0:T[`_${b}`]};class Vr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((T,I)=>{this.resolve=T,this.reject=I})}wrapCallback(T){return(I,w)=>{I?this.reject(I):this.resolve(w),"function"==typeof T&&(this.promise.catch(()=>{}),1===T.length?T(I):T(I,w))}}}function _n(b,T){if(b.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const w=T||"demo-project",v=b.iat||0,A=b.sub||b.user_id;if(!A)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const W=Object.assign({iss:`https://securetoken.google.com/${w}`,aud:w,iat:v,exp:v+3600,auth_time:v,sub:A,user_id:A,firebase:{sign_in_provider:"custom",identities:{}}},b);return[lt(JSON.stringify({alg:"none",type:"JWT"})),lt(JSON.stringify(W)),""].join(".")}function Ze(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function te(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ze())}function ut(){var b;const T=null===(b=Be())||void 0===b?void 0:b.forceEnvironment;if("node"===T)return!0;if("browser"===T)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Bt(){return"object"==typeof self&&self.self===self}function un(){const b="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof b&&void 0!==b.id}function fn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function yi(){const b=Ze();return b.indexOf("MSIE ")>=0||b.indexOf("Trident/")>=0}function Ui(){return!ut()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function L(){try{return"object"==typeof indexedDB}catch{return!1}}function j(){return new Promise((b,T)=>{try{let I=!0;const w="validate-browser-context-for-indexeddb-analytics-module",v=self.indexedDB.open(w);v.onsuccess=()=>{v.result.close(),I||self.indexedDB.deleteDatabase(w),b(!0)},v.onupgradeneeded=()=>{I=!1},v.onerror=()=>{var A;T((null===(A=v.error)||void 0===A?void 0:A.message)||"")}}catch(I){T(I)}})}class Q extends Error{constructor(T,I,w){super(I),this.code=T,this.customData=w,this.name="FirebaseError",Object.setPrototypeOf(this,Q.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,K.prototype.create)}}class K{constructor(T,I,w){this.service=T,this.serviceName=I,this.errors=w}create(T,...I){const w=I[0]||{},v=`${this.service}/${T}`,A=this.errors[T],W=A?function ce(b,T){return b.replace(Xe,(I,w)=>{const v=T[w];return null!=v?String(v):`<${w}?>`})}(A,w):"Error";return new Q(v,`${this.serviceName}: ${W} (${v}).`,w)}}const Xe=/\{\$([^}]+)}/g;function Rn(b,T){return Object.prototype.hasOwnProperty.call(b,T)}function Ir(b){for(const T in b)if(Object.prototype.hasOwnProperty.call(b,T))return!1;return!0}function Bi(b,T){if(b===T)return!0;const I=Object.keys(b),w=Object.keys(T);for(const v of I){if(!w.includes(v))return!1;const A=b[v],W=T[v];if(ht(A)&&ht(W)){if(!Bi(A,W))return!1}else if(A!==W)return!1}for(const v of w)if(!I.includes(v))return!1;return!0}function ht(b){return null!==b&&"object"==typeof b}function $i(b){const T=[];for(const[I,w]of Object.entries(b))Array.isArray(w)?w.forEach(v=>{T.push(encodeURIComponent(I)+"="+encodeURIComponent(v))}):T.push(encodeURIComponent(I)+"="+encodeURIComponent(w));return T.length?"&"+T.join("&"):""}function Ii(b){const T={};return b.replace(/^\?/,"").split("&").forEach(w=>{if(w){const[v,A]=w.split("=");T[decodeURIComponent(v)]=decodeURIComponent(A)}}),T}function Ei(b){const T=b.indexOf("?");if(!T)return"";const I=b.indexOf("#",T);return b.substring(T,I>0?I:void 0)}function Lr(b,T){const I=new Ur(b,T);return I.subscribe.bind(I)}class Ur{constructor(T,I){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=I,this.task.then(()=>{T(this)}).catch(w=>{this.error(w)})}next(T){this.forEachObserver(I=>{I.next(T)})}error(T){this.forEachObserver(I=>{I.error(T)}),this.close(T)}complete(){this.forEachObserver(T=>{T.complete()}),this.close()}subscribe(T,I,w){let v;if(void 0===T&&void 0===I&&void 0===w)throw new Error("Missing Observer.");v=function Bn(b,T){if("object"!=typeof b||null===b)return!1;for(const I of T)if(I in b&&"function"==typeof b[I])return!0;return!1}(T,["next","error","complete"])?T:{next:T,error:I,complete:w},void 0===v.next&&(v.next=Ct),void 0===v.error&&(v.error=Ct),void 0===v.complete&&(v.complete=Ct);const A=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?v.error(this.finalError):v.complete()}catch{}}),this.observers.push(v),A}unsubscribeOne(T){void 0===this.observers||void 0===this.observers[T]||(delete this.observers[T],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(T){if(!this.finalized)for(let I=0;I<this.observers.length;I++)this.sendOne(I,T)}sendOne(T,I){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[T])try{I(this.observers[T])}catch(w){typeof console<"u"&&console.error&&console.error(w)}})}close(T){this.finalized||(this.finalized=!0,void 0!==T&&(this.finalError=T),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ct(){}function Gi(b){return b&&b._delegate?b._delegate:b}},777:(Li,Tn,xe)=>{function D(t){return"function"==typeof t}function G(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const N=G(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Ce(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class _t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(D(r))try{r()}catch(s){e=s instanceof N?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Vt(s)}catch(o){e=e??[],o instanceof N?e=[...e,...o.errors]:e.push(o)}}if(e)throw new N(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Vt(e);else{if(e instanceof _t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ce(n,e)}remove(e){const{_finalizers:n}=this;n&&Ce(n,e),e instanceof _t&&e._removeParent(this)}}_t.EMPTY=(()=>{const t=new _t;return t.closed=!0,t})();const qt=_t.EMPTY;function hn(t){return t instanceof _t||t&&"closed"in t&&D(t.remove)&&D(t.add)&&D(t.unsubscribe)}function Vt(t){D(t)?t():t.unsubscribe()}const lt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Z={setTimeout(t,e,...n){const{delegate:r}=Z;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=Z;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ie(t){Z.setTimeout(()=>{const{onUnhandledError:e}=lt;if(!e)throw t;e(t)})}function De(){}const He=ot("C",void 0,void 0);function ot(t,e,n){return{kind:t,value:e,error:n}}let Ue=null;function Be(t){if(lt.useDeprecatedSynchronousErrorHandling){const e=!Ue;if(e&&(Ue={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=Ue;if(Ue=null,n)throw r}}else t()}class Zt extends _t{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,hn(e)&&e.add(this)):this.destination=Bt}static create(e,n,r){return new _n(e,n,r)}next(e){this.isStopped?ut(function An(t){return ot("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?ut(function yt(t){return ot("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ut(He,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const nt=Function.prototype.bind;function Dt(t,e){return nt.call(t,e)}class Vr{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Ze(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Ze(r)}else Ze(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Ze(n)}}}class _n extends Zt{constructor(e,n,r){let i;if(super(),D(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&lt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Dt(e.next,s),error:e.error&&Dt(e.error,s),complete:e.complete&&Dt(e.complete,s)}):i=e}this.destination=new Vr(i)}}function Ze(t){lt.useDeprecatedSynchronousErrorHandling?function bn(t){lt.useDeprecatedSynchronousErrorHandling&&Ue&&(Ue.errorThrown=!0,Ue.error=t)}(t):ie(t)}function ut(t,e){const{onStoppedNotification:n}=lt;n&&Z.setTimeout(()=>n(t,e))}const Bt={closed:!0,next:De,error:function te(t){throw t},complete:De},un="function"==typeof Symbol&&Symbol.observable||"@@observable";function fn(t){return t}function yi(t){return 0===t.length?fn:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let qe=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function L(t){return t&&t instanceof Zt||function Ui(t){return t&&D(t.next)&&D(t.error)&&D(t.complete)}(t)&&hn(t)}(n)?n:new _n(n,r,i);return Be(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Fr(r))((i,s)=>{const o=new _n({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[un](){return this}pipe(...n){return yi(n)(this)}toPromise(n){return new(n=Fr(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Fr(t){var e;return null!==(e=t??lt.Promise)&&void 0!==e?e:Promise}const j=G(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let H=(()=>{class t extends qe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new F(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new j}next(n){Be(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Be(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Be(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?qt:(this.currentObservers=null,s.push(n),new _t(()=>{this.currentObservers=null,Ce(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new qe;return n.source=this,n}}return t.create=(e,n)=>new F(e,n),t})();class F extends H{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:qt}}function Q(t){return D(t?.lift)}function K(t){return e=>{if(Q(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ce(t,e,n,r,i){return new Xe(t,e,n,r,i)}class Xe extends Zt{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function me(t,e){return K((n,r)=>{let i=0;n.subscribe(ce(r,s=>{r.next(t.call(e,s,i++))}))})}var Re=xe(582);const dt=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function $t(t){return D(t?.then)}function Mt(t){return D(t[un])}function Kt(t){return Symbol.asyncIterator&&D(t?.[Symbol.asyncIterator])}function Sn(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Un=function Rn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Ir(t){return D(t?.[Un])}function vi(t){return(0,Re.FC)(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield(0,Re.qq)(n.read());if(i)return yield(0,Re.qq)(void 0);yield yield(0,Re.qq)(r)}}finally{n.releaseLock()}})}function Bi(t){return D(t?.getReader)}function ht(t){if(t instanceof qe)return t;if(null!=t){if(Mt(t))return function ji(t){return new qe(e=>{const n=t[un]();if(D(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(dt(t))return function $i(t){return new qe(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if($t(t))return function Ii(t){return new qe(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ie)})}(t);if(Kt(t))return Qn(t);if(Ir(t))return function Ei(t){return new qe(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(Bi(t))return function Lr(t){return Qn(vi(t))}(t)}throw Sn(t)}function Qn(t){return new qe(e=>{(function Ur(t,e){var n,r,i,s;return(0,Re.mG)(this,void 0,void 0,function*(){try{for(n=(0,Re.KL)(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Br(t,e,n,r=0,i=!1){const s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Ct(t,e,n=1/0){return D(e)?Ct((r,i)=>me((s,o)=>e(r,s,i,o))(ht(t(r,i))),n):("number"==typeof e&&(n=e),K((r,i)=>function Bn(t,e,n,r,i,s,o,a){const u=[];let l=0,h=0,g=!1;const m=()=>{g&&!u.length&&!l&&e.complete()},y=S=>l<r?C(S):u.push(S),C=S=>{s&&e.next(S),l++;let M=!1;ht(n(S,h++)).subscribe(ce(e,V=>{i?.(V),s?y(V):e.next(V)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;u.length&&l<r;){const V=u.shift();o?Br(e,o,()=>C(V)):C(V)}m()}catch(V){e.error(V)}}))};return t.subscribe(ce(e,y,()=>{g=!0,m()})),()=>{a?.()}}(r,i,t,n)))}function jr(t=1/0){return Ct(fn,t)}const pn=new qe(t=>t.complete());function Hi(t){return t[t.length-1]}function zi(t){return D(Hi(t))?t.pop():void 0}function wi(t){return function gn(t){return t&&D(t.schedule)}(Hi(t))?t.pop():void 0}function yn(t,e=0){return K((n,r)=>{n.subscribe(ce(r,i=>Br(r,t,()=>r.next(i),e),()=>Br(r,t,()=>r.complete(),e),i=>Br(r,t,()=>r.error(i),e)))})}function Yn(t,e=0){return K((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Gi(t,e){if(!t)throw new Error("Iterable cannot be null");return new qe(n=>{Br(n,e,()=>{const r=t[Symbol.asyncIterator]();Br(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function I(t,e){return e?function T(t,e){if(null!=t){if(Mt(t))return function $r(t,e){return ht(t).pipe(Yn(e),yn(e))}(t,e);if(dt(t))return function Cs(t,e){return new qe(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if($t(t))return function Fo(t,e){return ht(t).pipe(Yn(e),yn(e))}(t,e);if(Kt(t))return Gi(t,e);if(Ir(t))return function eo(t,e){return new qe(n=>{let r;return Br(n,e,()=>{r=t[Un](),Br(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>D(r?.return)&&r.return()})}(t,e);if(Bi(t))return function b(t,e){return Gi(vi(t),e)}(t,e)}throw Sn(t)}(t,e):ht(t)}function w(...t){const e=wi(t),n=function Pn(t,e){return"number"==typeof Hi(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?ht(r[0]):jr(n)(I(r,e)):pn}class v extends H{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function A(...t){return I(t,wi(t))}function W(t={}){const{connector:e=(()=>new H),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,u,l=0,h=!1,g=!1;const m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),o=u=void 0,h=g=!1},C=()=>{const S=o;y(),S?.unsubscribe()};return K((S,M)=>{l++,!g&&!h&&m();const V=u=u??e();M.add(()=>{l--,0===l&&!g&&!h&&(a=_e(C,i))}),V.subscribe(M),!o&&l>0&&(o=new _n({next:x=>V.next(x),error:x=>{g=!0,m(),a=_e(y,n,x),V.error(x)},complete:()=>{h=!0,m(),a=_e(y,r),V.complete()}}),ht(S).subscribe(o))})(s)}}function _e(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new _n({next:()=>{r.unsubscribe(),t()}});return ht(e(...n)).subscribe(r)}function Ie(t,e){return K((n,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();n.subscribe(ce(r,u=>{i?.unsubscribe();let l=0;const h=s++;ht(t(u,h)).subscribe(i=ce(r,g=>r.next(e?e(u,g,h,l++):g),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Ve(t,e=fn){return t=t??ft,K((n,r)=>{let i,s=!0;n.subscribe(ce(r,o=>{const a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function ft(t,e){return t===e}function fe(t){for(let e in t)if(t[e]===fe)return e;throw Error("Could not find renamed property on target object.")}function Rt(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Te(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Te).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Vn(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const to=fe({__forward_ref__:fe});function k(t){return t.__forward_ref__=k,t.toString=function(){return Te(this())},t}function R(t){return J(t)?t():t}function J(t){return"function"==typeof t&&t.hasOwnProperty(to)&&t.__forward_ref__===k}function ge(t){return t&&!!t.\u0275providers}class z extends Error{constructor(e,n){super(function Yt(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function Ee(t){return"string"==typeof t?t:null==t?"":String(t)}function Dd(t,e){throw new z(-201,!1)}function zr(t,e){null==t&&function Fe(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function Me(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Er(t){return{providers:t.providers||[],imports:t.imports||[]}}function Ju(t){return Cd(t,Xu)||Cd(t,Td)}function Cd(t,e){return t.hasOwnProperty(e)?t[e]:null}function Oa(t){return t&&(t.hasOwnProperty(Ts)||t.hasOwnProperty(Ad))?t[Ts]:null}const Xu=fe({\u0275prov:fe}),Ts=fe({\u0275inj:fe}),Td=fe({ngInjectableDef:fe}),Ad=fe({ngInjectorDef:fe});var it=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(it||{});let ka;function Jn(t){const e=ka;return ka=t,e}function Bp(t,e,n){const r=Ju(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&it.Optional?null:void 0!==e?e:void Dd(Te(t))}const Ft=globalThis;class ae{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Me({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const no={},ro="__NG_DI_FLAG__",si="ngTempTokenPath",Av=/\n/gm,Wp="__source";let As;function qi(t){const e=As;return As=t,e}function Sv(t,e=it.Default){if(void 0===As)throw new z(-203,!1);return null===As?Bp(t,void 0,e):As.get(t,e&it.Optional?null:void 0,e)}function oe(t,e=it.Default){return(function Up(){return ka}()||Sv)(R(t),e)}function we(t,e=it.Default){return oe(t,Lo(e))}function Lo(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function ls(t){const e=[];for(let n=0;n<t.length;n++){const r=R(t[n]);if(Array.isArray(r)){if(0===r.length)throw new z(900,!1);let i,s=it.Default;for(let o=0;o<r.length;o++){const a=r[o],u=Rv(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(oe(i,s))}else e.push(oe(r))}return e}function Ua(t,e){return t[ro]=e,t.prototype[ro]=e,t}function Rv(t){return t[ro]}function Ci(t){return{toString:t}.toString()}var oi=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(oi||{}),Xn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Xn||{});const wr={},vt=[],ec=fe({\u0275cmp:fe}),Pd=fe({\u0275dir:fe}),Md=fe({\u0275pipe:fe}),io=fe({\u0275mod:fe}),ds=fe({\u0275fac:fe}),bs=fe({__NG_ELEMENT_ID__:fe}),Zp=fe({__NG_ENV_ID__:fe});function Nd(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function ja(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{const s=i,o=n[++r];xd(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function Gr(t){return 3===t||4===t||6===t}function xd(t){return 64===t.charCodeAt(0)}function $a(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||tc(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function tc(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}const Ha="ng-template";function Kp(t,e,n){let r=0,i=!0;for(;r<t.length;){let s=t[r++];if("string"==typeof s&&i){const o=t[r++];if(n&&"class"===s&&-1!==Nd(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<t.length&&"string"==typeof(s=t[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function Od(t){return 4===t.type&&t.value!==Ha}function Pv(t,e,n){return e===(4!==t.type||n?t.value:Ha)}function kd(t,e,n){let r=4;const i=t.attrs||[],s=function Qp(t){for(let e=0;e<t.length;e++)if(Gr(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!Pv(t,u,n)||""===u&&1===e.length){if(Wr(r))return!1;o=!0}}else{const l=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Kp(t.attrs,l,n)){if(Wr(r))return!1;o=!0}continue}const g=Vd(8&r?"class":u,i,Od(t),n);if(-1===g){if(Wr(r))return!1;o=!0;continue}if(""!==l){let m;m=g>s?"":i[g+1].toLowerCase();const y=8&r?m:null;if(y&&-1!==Nd(y,l,0)||2&r&&l!==m){if(Wr(r))return!1;o=!0}}}}else{if(!o&&!Wr(r)&&!Wr(u))return!1;if(o&&Wr(u))continue;o=!1,r=u|1&r}}return Wr(r)||o}function Wr(t){return 0==(1&t)}function Vd(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){const o=e[i];if(o===t)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function Ld(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function za(t,e,n=!1){for(let r=0;r<e.length;r++)if(kd(t,e[r],n))return!0;return!1}function nc(t,e){return t?":not("+e.trim()+")":e}function rc(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Wr(o)&&(e+=nc(s,i),i=""),r=o,s=s||!Wr(r);n++}return""!==i&&(e+=nc(s,i)),e}function hs(t){return Ci(()=>{const e=sc(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===oi.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Xn.Emulated,styles:t.styles||vt,_:null,schemas:t.schemas||null,tView:null,id:""};eg(n);const r=t.dependencies;return n.directiveDefs=Uo(r,!1),n.pipeDefs=Uo(r,!0),n.id=function jd(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function Bd(t){return at(t)||vn(t)}function Mv(t){return null!==t}function lr(t){return Ci(()=>({type:t.type,bootstrap:t.bootstrap||vt,declarations:t.declarations||vt,imports:t.imports||vt,exports:t.exports||vt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function ic(t,e){if(null==t)return wr;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}function Oe(t){return Ci(()=>{const e=sc(t);return eg(e),e})}function at(t){return t[ec]||null}function vn(t){return t[Pd]||null}function jn(t){return t[Md]||null}function qr(t,e){const n=t[io]||null;if(!n&&!0===e)throw new Error(`Type ${Te(t)} does not have '\u0275mod' property.`);return n}function sc(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||wr,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||vt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ic(t.inputs,e),outputs:ic(t.outputs)}}function eg(t){t.features?.forEach(e=>e(t))}function Uo(t,e){if(!t)return null;const n=e?jn:Bd;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(Mv)}const Xt=0,he=1,ze=2,Lt=3,Ti=4,so=5,tr=6,Bo=7,en=8,Rs=9,jo=10,Le=11,Ga=12,oc=13,$o=14,tn=15,Wa=16,Ps=17,Zi=18,oo=19,tg=20,Ki=21,fs=22,ao=23,qa=24,st=25,Za=1,ng=2,dr=7,Ho=9,$n=11;function Dr(t){return Array.isArray(t)&&"object"==typeof t[Za]}function Cr(t){return Array.isArray(t)&&!0===t[Za]}function rg(t){return 0!=(4&t.flags)}function zo(t){return t.componentOffset>-1}function Go(t){return 1==(1&t.flags)}function Ai(t){return!!t.template}function $d(t){return 0!=(512&t[ze])}function uo(t,e){return t.hasOwnProperty(ds)?t[ds]:null}let Mn=null,ac=!1;function ai(t){const e=Mn;return Mn=t,e}const qo={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function mn(t){if(!Zo(t)||t.dirty){if(!t.producerMustRecompute(t)&&!hg(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function dg(t){t.dirty=!0,function lg(t){if(void 0===t.liveConsumerNode)return;const e=ac;ac=!0;try{for(const n of t.liveConsumerNode)n.dirty||dg(n)}finally{ac=e}}(t),t.consumerMarkedDirty?.(t)}function Xa(t){return t&&(t.nextProducerIndex=0),ai(t)}function Hd(t,e){if(ai(e),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Zo(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)lo(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function hg(t){Qi(t);for(let e=0;e<t.producerNode.length;e++){const n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(mn(n),r!==n.version))return!0}return!1}function zd(t){if(Qi(t),Zo(t))for(let e=0;e<t.producerNode.length;e++)lo(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function lo(t,e){if(function eu(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),Qi(t),1===t.liveConsumerNode.length)for(let r=0;r<t.producerNode.length;r++)lo(t.producerNode[r],t.producerIndexOfThis[r]);const n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){const r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Qi(i),i.producerIndexOfThis[r]=e}}function Zo(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Qi(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let Wd=null;const cc=()=>{},Gv=(()=>({...qo,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:cc}))();class Wv{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function ui(){return Zd}function Zd(t){return t.type.prototype.ngOnChanges&&(t.setInput=Zv),qv}function qv(){const t=lc(this),e=t?.current;if(e){const n=t.previous;if(n===wr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Zv(t,e,n,r){const i=this.declaredInputs[n],s=lc(t)||function Kv(t,e){return t[Ig]=e}(t,{previous:wr,current:null}),o=s.current||(s.current={}),a=s.previous,u=a[i];o[i]=new Wv(u&&u.currentValue,e,a===wr),t[r]=e}ui.ngInherit=!0;const Ig="__ngSimpleChanges__";function lc(t){return t[Ig]||null}const ci=function(t,e,n){};function Tt(t){for(;Array.isArray(t);)t=t[Xt];return t}function hc(t,e){return Tt(e[t])}function nr(t,e){return Tt(e[t.index])}function Ms(t,e){return t.data[e]}function Zr(t,e){const n=e[t];return Dr(n)?n:n[Xt]}function ps(t,e){return null==e?null:t[e]}function wg(t){t[Ps]=0}function eI(t){1024&t[ze]||(t[ze]|=1024,Dg(t,1))}function fc(t){1024&t[ze]&&(t[ze]&=-1025,Dg(t,-1))}function Dg(t,e){let n=t[Lt];if(null===n)return;n[so]+=e;let r=n;for(n=n[Lt];null!==n&&(1===e&&1===r[so]||-1===e&&0===r[so]);)n[so]+=e,r=n,n=n[Lt]}const ke={lFrame:au(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function mc(){return ke.bindingsEnabled}function Y(){return ke.lFrame.lView}function pt(){return ke.lFrame.tView}function hr(t){return ke.lFrame.contextLView=t,t[en]}function Kr(t){return ke.lFrame.contextLView=null,t}function Hn(){let t=_c();for(;null!==t&&64===t.type;)t=t.parent;return t}function _c(){return ke.lFrame.currentTNode}function Yi(t,e){const n=ke.lFrame;n.currentTNode=t,n.isParent=e}function su(){return ke.lFrame.isParent}function ho(){return ke.lFrame.bindingIndex++}function Mg(t,e){const n=ke.lFrame;n.bindingIndex=n.bindingRootIndex=t,eh(e)}function eh(t){ke.lFrame.currentDirectiveIndex=t}function ou(t){ke.lFrame.currentQueryIndex=t}function sI(t){const e=t[he];return 2===e.type?e.declTNode:1===e.type?t[tr]:null}function xg(t,e,n){if(n&it.SkipSelf){let i=e,s=t;for(;!(i=i.parent,null!==i||n&it.Host||(i=sI(s),null===i||(s=s[$o],10&i.type))););if(null===i)return!1;e=i,t=s}const r=ke.lFrame=Og();return r.currentTNode=e,r.lView=t,!0}function vc(t){const e=Og(),n=t[he];ke.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Og(){const t=ke.lFrame,e=null===t?null:t.child;return null===e?au(t):e}function au(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function kg(){const t=ke.lFrame;return ke.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Vg=kg;function nh(){const t=kg();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function fr(){return ke.lFrame.selectedIndex}function fo(t){ke.lFrame.selectedIndex=t}function nn(){const t=ke.lFrame;return Ms(t.tView,t.selectedIndex)}let Lg=!0;function uu(){return Lg}function Os(t){Lg=t}function Ic(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),null!=h&&(t.destroyHooks??=[]).push(n,h)}}function Ec(t,e,n){Dc(t,e,3,n)}function wc(t,e,n,r){(3&t[ze])===n&&Dc(t,e,n,r)}function cu(t,e){let n=t[ze];(3&n)===e&&(n&=8191,n+=1,t[ze]=n)}function Dc(t,e,n,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&t[Ps]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(t[Ps]+=65536),(a<s||-1==s)&&(ih(t,n,e,u),t[Ps]=(4294901760&t[Ps])+u+2),u++}function Ug(t,e){ci(4,t,e);const n=ai(null);try{e.call(t)}finally{ai(n),ci(5,t,e)}}function ih(t,e,n,r){const i=n[r]<0,s=n[r+1],a=t[i?-n[r]:n[r]];i?t[ze]>>13<t[Ps]>>16&&(3&t[ze])===e&&(t[ze]+=8192,Ug(a,s)):Ug(a,s)}const Ko=-1;class Qo{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Cc(t){return t!==Ko}function lu(t){return 32767&t}function du(t,e){let n=function pI(t){return t>>16}(t),r=e;for(;n>0;)r=r[$o],n--;return r}let uh=!0;function Tc(t){const e=uh;return uh=t,e}const $g=255,Hg=5;let mI=0;const f={};function d(t,e){const n=_(t,e);if(-1!==n)return n;const r=e[he];r.firstCreatePass&&(t.injectorIndex=e.length,p(r.data,t),p(e,null),p(r.blueprint,null));const i=E(t,e),s=t.injectorIndex;if(Cc(i)){const o=lu(i),a=du(i,e),u=a[he].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function p(t,e){t.push(0,0,0,0,0,0,0,0,e)}function _(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function E(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=Sc(i),null===r)return Ko;if(n++,i=i[$o],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Ko}function P(t,e,n){!function c(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(bs)&&(r=n[bs]),null==r&&(r=n[bs]=mI++);const i=r&$g;e.data[t+(i>>Hg)]|=1<<i}(t,e,n)}function ee(t,e,n){if(n&it.Optional||void 0!==t)return t;Dd()}function ye(t,e,n,r){if(n&it.Optional&&void 0===r&&(r=null),!(n&(it.Self|it.Host))){const i=t[Rs],s=Jn(void 0);try{return i?i.get(e,r,n&it.Optional):Bp(e,r,n&it.Optional)}finally{Jn(s)}}return ee(r,0,n)}function be(t,e,n,r=it.Default,i){if(null!==t){if(2048&e[ze]&&!(r&it.Self)){const o=function _I(t,e,n,r,i){let s=t,o=e;for(;null!==s&&null!==o&&2048&o[ze]&&!(512&o[ze]);){const a=et(s,o,n,r|it.Self,f);if(a!==f)return a;let u=s.parent;if(!u){const l=o[tg];if(l){const h=l.get(n,f,r);if(h!==f)return h}u=Sc(o),o=o[$o]}s=u}return i}(t,e,n,r,f);if(o!==f)return o}const s=et(t,e,n,r,f);if(s!==f)return s}return ye(e,n,r,i)}function et(t,e,n,r,i){const s=function zg(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(bs)?t[bs]:void 0;return"number"==typeof e?e>=0?e&$g:Gg:e}(n);if("function"==typeof s){if(!xg(e,t,r))return r&it.Host?ee(i,0,r):ye(e,n,r,i);try{let o;if(o=s(r),null!=o||r&it.Optional)return o;Dd()}finally{Vg()}}else if("number"==typeof s){let o=null,a=_(t,e),u=Ko,l=r&it.Host?e[tn][tr]:null;for((-1===a||r&it.SkipSelf)&&(u=-1===a?E(t,e):e[a+8],u!==Ko&&ch(r,!1)?(o=e[he],a=lu(u),e=du(u,e)):a=-1);-1!==a;){const h=e[he];if(Ac(s,a,h.data)){const g=Tr(a,e,n,o,r,l);if(g!==f)return g}u=e[a+8],u!==Ko&&ch(r,e[he].data[a+8]===l)&&Ac(s,a,e)?(o=h,a=lu(u),e=du(u,e)):a=-1}}return i}function Tr(t,e,n,r,i,s){const o=e[he],a=o.data[t+8],h=function Si(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,h=s>>20,m=i?a+h:t.directiveEnd;for(let y=r?a:a+h;y<m;y++){const C=o[y];if(y<u&&n===C||y>=u&&C.type===n)return y}if(i){const y=o[u];if(y&&Ai(y)&&y.type===n)return u}return null}(a,o,n,null==r?zo(a)&&uh:r!=o&&0!=(3&a.type),i&it.Host&&s===a);return null!==h?Xi(e,o,h,a):f}function Xi(t,e,n,r){let i=t[n];const s=e.data;if(function hI(t){return t instanceof Qo}(i)){const o=i;o.resolving&&function xa(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new z(-200,`Circular dependency in DI detected for ${t}${n}`)}(function Je(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Ee(t)}(s[n]));const a=Tc(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Jn(o.injectImpl):null;xg(t,r,it.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function dI(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Zd(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}(n,s[n],e)}finally{null!==l&&Jn(l),Tc(a),o.resolving=!1,Vg()}}return i}function Ac(t,e,n){return!!(n[e+(t>>Hg)]&1<<t)}function ch(t,e){return!(t&it.Self||t&it.Host&&e)}class ir{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return be(this._tNode,this._lView,e,Lo(r),n)}}function Gg(){return new ir(Hn(),Y())}function Nn(t){return Ci(()=>{const e=t.prototype.constructor,n=e[ds]||bc(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const s=i[ds]||bc(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function bc(t){return J(t)?()=>{const e=bc(R(t));return e&&e()}:uo(t)}function Sc(t){const e=t[he],n=e.type;return 2===n?e.declTNode:1===n?t[tr]:null}const Mc="__parameters__";function xc(t,e,n){return Ci(()=>{const r=function yI(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,l,h){const g=u.hasOwnProperty(Mc)?u[Mc]:Object.defineProperty(u,Mc,{value:[]})[Mc];for(;g.length<=h;)g.push(null);return(g[h]=g[h]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function kc(t,e){t.forEach(n=>Array.isArray(n)?kc(n,e):e(n))}function B0(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Wg(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Ri(t,e,n){let r=Vc(t,e);return r>=0?t[1|r]=n:(r=~r,function W2(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function vI(t,e){const n=Vc(t,e);if(n>=0)return t[1|n]}function Vc(t,e){return function j0(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}(t,e,1)}const li=Ua(xc("Optional"),8),Zg=Ua(xc("SkipSelf"),4);function Xg(t){return 128==(128&t.flags)}var Jo=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Jo||{});const CI=new Map;let mU=0;const AI="__ngContext__";function Ar(t,e){Dr(e)?(t[AI]=e[oo],function yU(t){CI.set(t[oo],t)}(e)):t[AI]=e}let bI;function SI(t,e){return bI(t,e)}function gh(t){const e=t[Lt];return Cr(e)?e[Lt]:e}function ab(t){return cb(t[Ga])}function ub(t){return cb(t[Ti])}function cb(t){for(;null!==t&&!Cr(t);)t=t[Ti];return t}function Uc(t,e,n,r,i){if(null!=r){let s,o=!1;Cr(r)?s=r:Dr(r)&&(o=!0,r=r[Xt]);const a=Tt(r);0===t&&null!==n?null==i?fb(e,n,a):hu(e,n,a,i||null,!0):1===t&&null!==n?hu(e,n,a,i||null,!0):2===t?function om(t,e,n){const r=im(t,e);r&&function FU(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function BU(t,e,n,r,i){const s=n[dr];s!==Tt(n)&&Uc(e,t,r,s,i);for(let a=$n;a<n.length;a++){const u=n[a];_h(u[he],u,t,e,r,s)}}(e,t,s,n,i)}}function nm(t,e,n){return t.createElement(e,n)}function db(t,e){const n=t[Ho],r=n.indexOf(e);fc(e),n.splice(r,1)}function rm(t,e){if(t.length<=$n)return;const n=$n+e,r=t[n];if(r){const i=r[Wa];null!==i&&i!==t&&db(i,r),e>0&&(t[n-1][Ti]=r[Ti]);const s=Wg(t,$n+e);!function RU(t,e){_h(t,e,e[Le],2,null,null),e[Xt]=null,e[tr]=null}(r[he],r);const o=s[Zi];null!==o&&o.detachView(s[he]),r[Lt]=null,r[Ti]=null,r[ze]&=-129}return r}function PI(t,e){if(!(256&e[ze])){const n=e[Le];e[ao]&&zd(e[ao]),e[qa]&&zd(e[qa]),n.destroyNode&&_h(t,e,n,3,null,null),function NU(t){let e=t[Ga];if(!e)return MI(t[he],t);for(;e;){let n=null;if(Dr(e))n=e[Ga];else{const r=e[$n];r&&(n=r)}if(!n){for(;e&&!e[Ti]&&e!==t;)Dr(e)&&MI(e[he],e),e=e[Lt];null===e&&(e=t),Dr(e)&&MI(e[he],e),n=e&&e[Ti]}e=n}}(e)}}function MI(t,e){if(!(256&e[ze])){e[ze]&=-129,e[ze]|=256,function VU(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof Qo)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];ci(4,a,u);try{u.call(a)}finally{ci(5,a,u)}}else{ci(4,i,s);try{s.call(i)}finally{ci(5,i,s)}}}}}(t,e),function kU(t,e){const n=t.cleanup,r=e[Bo];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else n[s].call(r[n[s+1]]);null!==r&&(e[Bo]=null);const i=e[Ki];if(null!==i){e[Ki]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(t,e),1===e[he].type&&e[Le].destroy();const n=e[Wa];if(null!==n&&Cr(e[Lt])){n!==e[Lt]&&db(n,e);const r=e[Zi];null!==r&&r.detachView(t)}!function vU(t){CI.delete(t[oo])}(e)}}function NI(t,e,n){return function hb(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[Xt];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=t.data[r.directiveStart+i];if(s===Xn.None||s===Xn.Emulated)return null}return nr(r,n)}}(t,e.parent,n)}function hu(t,e,n,r,i){t.insertBefore(e,n,r,i)}function fb(t,e,n){t.appendChild(e,n)}function pb(t,e,n,r,i){null!==r?hu(t,e,n,r,i):fb(t,e,n)}function im(t,e){return t.parentNode(e)}let xI,FI,_b=function mb(t,e,n){return 40&t.type?nr(t,n):null};function sm(t,e,n,r){const i=NI(t,r,e),s=e[Le],a=function gb(t,e,n){return _b(t,e,n)}(r.parent||e[tr],r,e);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)pb(s,i,n[u],a,!1);else pb(s,i,n,a,!1);void 0!==xI&&xI(s,r,e,n,i)}function mh(t,e){if(null!==e){const n=e.type;if(3&n)return nr(e,t);if(4&n)return OI(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return mh(t,r);{const i=t[e.index];return Cr(i)?OI(-1,i):Tt(i)}}if(32&n)return SI(e,t)()||Tt(t[e.index]);{const r=vb(t,e);return null!==r?Array.isArray(r)?r[0]:mh(gh(t[tn]),r):mh(t,e.next)}}return null}function vb(t,e){return null!==e?t[tn][tr].projection[e.projection]:null}function OI(t,e){const n=$n+t+1;if(n<e.length){const r=e[n],i=r[he].firstChild;if(null!==i)return mh(r,i)}return e[dr]}function kI(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===e&&(a&&Ar(Tt(a),r),n.flags|=2),32!=(32&n.flags))if(8&u)kI(t,e,n.child,r,i,s,!1),Uc(e,t,i,a,s);else if(32&u){const l=SI(n,r);let h;for(;h=l();)Uc(e,t,i,h,s);Uc(e,t,i,a,s)}else 16&u?Eb(t,e,r,n,i,s):Uc(e,t,i,a,s);n=o?n.projectionNext:n.next}}function _h(t,e,n,r,i,s){kI(n,r,t.firstChild,e,i,s,!1)}function Eb(t,e,n,r,i,s){const o=n[tn],u=o[tr].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++)Uc(e,t,i,u[l],s);else{let l=u;const h=o[Lt];Xg(r)&&(l.flags|=128),kI(t,e,l,h,i,s,!0)}}function wb(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Db(t,e,n){const{mergedAttrs:r,classes:i,styles:s}=n;null!==r&&ja(t,e,r),null!==i&&wb(t,e,i),null!==s&&function $U(t,e,n){t.setAttribute(e,"style",n)}(t,e,s)}class bb{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const Eh=new ae("ENVIRONMENT_INITIALIZER"),Fb=new ae("INJECTOR",-1),Lb=new ae("INJECTOR_DEF_TYPES");class HI{get(e,n=no){if(n===no){const r=new Error(`NullInjectorError: No provider for ${Te(e)}!`);throw r.name="NullInjectorError",r}return n}}function gB(...t){return{\u0275providers:Bb(0,t),\u0275fromNgModule:!0}}function Bb(t,...e){const n=[],r=new Set;let i;const s=o=>{n.push(o)};return kc(e,o=>{const a=o;lm(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&jb(i,s),n}function jb(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];zI(i,s=>{e(s,r)})}}function lm(t,e,n,r){if(!(t=R(t)))return!1;let i=null,s=Oa(t);const o=!s&&at(t);if(s||o){if(o&&!o.standalone)return!1;i=t}else{const u=t.ngModule;if(s=Oa(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of u)lm(l,e,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let l;r.add(i);try{kc(s.imports,h=>{lm(h,e,n,r)&&(l||=[],l.push(h))})}finally{}void 0!==l&&jb(l,e)}if(!a){const l=uo(i)||(()=>new i);e({provide:i,useFactory:l,deps:vt},i),e({provide:Lb,useValue:i,multi:!0},i),e({provide:Eh,useValue:()=>oe(i),multi:!0},i)}const u=s.providers;if(null!=u&&!a){const l=t;zI(u,h=>{e(h,l)})}}}return i!==t&&void 0!==t.providers}function zI(t,e){for(let n of t)ge(n)&&(n=n.\u0275providers),Array.isArray(n)?zI(n,e):e(n)}const mB=fe({provide:String,useValue:fe});function GI(t){return null!==t&&"object"==typeof t&&mB in t}function fu(t){return"function"==typeof t}const WI=new ae("Set Injector scope."),dm={},yB={};let qI;function hm(){return void 0===qI&&(qI=new HI),qI}class ts{}class Hc extends ts{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,KI(e,o=>this.processProvider(o)),this.records.set(Fb,zc(void 0,this)),i.has("environment")&&this.records.set(ts,zc(void 0,this));const s=this.records.get(WI);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Lb.multi,vt,it.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=qi(this),r=Jn(void 0);try{return e()}finally{qi(n),Jn(r)}}get(e,n=no,r=it.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Zp))return e[Zp](this);r=Lo(r);const s=qi(this),o=Jn(void 0);try{if(!(r&it.SkipSelf)){let u=this.records.get(e);if(void 0===u){const l=function DB(t){return"function"==typeof t||"object"==typeof t&&t instanceof ae}(e)&&Ju(e);u=l&&this.injectableDefInScope(l)?zc(ZI(e),dm):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&it.Self?hm():this.parent).get(e,n=r&it.Optional&&n===no?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[si]=a[si]||[]).unshift(Te(e)),s)throw a;return function Ba(t,e,n,r){const i=t[si];throw e[Wp]&&i.unshift(e[Wp]),t.message=function w0(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=Te(e);if(Array.isArray(e))i=e.map(Te).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Te(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Av,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[si]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{Jn(o),qi(s)}}resolveInjectorInitializers(){const e=qi(this),n=Jn(void 0);try{const i=this.get(Eh.multi,vt,it.Self);for(const s of i)s()}finally{qi(e),Jn(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(Te(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new z(205,!1)}processProvider(e){let n=fu(e=R(e))?e:R(e&&e.provide);const r=function IB(t){return GI(t)?zc(void 0,t.useValue):zc(zb(t),dm)}(e);if(fu(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=zc(void 0,dm,!0),i.factory=()=>ls(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===dm&&(n.value=yB,n.value=n.factory()),"object"==typeof n.value&&n.value&&function wB(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=R(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function ZI(t){const e=Ju(t),n=null!==e?e.factory:uo(t);if(null!==n)return n;if(t instanceof ae)throw new z(204,!1);if(t instanceof Function)return function vB(t){const e=t.length;if(e>0)throw function hh(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new z(204,!1);const n=function Cv(t){return t&&(t[Xu]||t[Td])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new z(204,!1)}function zb(t,e,n){let r;if(fu(t)){const i=R(t);return uo(i)||ZI(i)}if(GI(t))r=()=>R(t.useValue);else if(function Hb(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...ls(t.deps||[]));else if(function $b(t){return!(!t||!t.useExisting)}(t))r=()=>oe(R(t.useExisting));else{const i=R(t&&(t.useClass||t.provide));if(!function EB(t){return!!t.deps}(t))return uo(i)||ZI(i);r=()=>new i(...ls(t.deps))}return r}function zc(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function KI(t,e){for(const n of t)Array.isArray(n)?KI(n,e):n&&ge(n)?KI(n.\u0275providers,e):e(n)}const fm=new ae("AppId",{providedIn:"root",factory:()=>CB}),CB="ng",Gb=new ae("Platform Initializer"),go=new ae("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Wb=new ae("CSP nonce",{providedIn:"root",factory:()=>function jc(){if(void 0!==FI)return FI;if(typeof document<"u")return document;throw new z(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let qb=(t,e,n)=>null;function rE(t,e,n=!1){return qb(t,e,n)}class OB{}class Qb{}class VB{resolveComponentFactory(e){throw function kB(t){const e=Error(`No component factory found for ${Te(t)}.`);return e.ngComponent=t,e}(e)}}let vm=(()=>{class t{static#e=this.NULL=new VB}return t})();function FB(){return qc(Hn(),Y())}function qc(t,e){return new Pi(nr(t,e))}let Pi=(()=>{class t{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=FB}return t})();class Jb{}let mo=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function UB(){const t=Y(),n=Zr(Hn().index,t);return(Dr(n)?n:t)[Le]}()}return t})(),BB=(()=>{class t{static#e=this.\u0275prov=Me({token:t,providedIn:"root",factory:()=>null})}return t})();class Zc{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Xb=new Zc("16.2.12"),oE={};function rS(t,e=null,n=null,r){const i=iS(t,e,n,r);return i.resolveInjectorInitializers(),i}function iS(t,e=null,n=null,r,i=new Set){const s=[n||vt,gB(t)];return r=r||("object"==typeof t?void 0:Te(t)),new Hc(s,e||hm(),r||null,i)}let br=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=no;static#t=this.NULL=new HI;static create(n,r){if(Array.isArray(n))return rS({name:""},r,n,"");{const i=n.name??"";return rS({name:i},n.parent,n.providers,i)}}static#n=this.\u0275prov=Me({token:t,providedIn:"any",factory:()=>oe(Fb)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function uE(t){return t.ngOriginalError}class _o{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&uE(e);for(;n&&uE(n);)n=uE(n);return n||null}}function lE(t){return e=>{setTimeout(t,void 0,e)}}const In=class qB extends H{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=lE(s),i&&(i=lE(i)),o&&(o=lE(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof _t&&e.add(a),a}};function oS(...t){}class Et{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new In(!1),this.onMicrotaskEmpty=new In(!1),this.onStable=new In(!1),this.onError=new In(!1),typeof Zone>"u")throw new z(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function ZB(){const t="function"==typeof Ft.requestAnimationFrame;let e=Ft[t?"requestAnimationFrame":"setTimeout"],n=Ft[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function YB(t){const e=()=>{!function QB(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Ft,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,hE(t),t.isCheckStableRunning=!0,dE(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),hE(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(function XB(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(i,s,o,a);try{return aS(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),uS(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return aS(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),uS(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,hE(t),dE(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Et.isInAngularZone())throw new z(909,!1)}static assertNotInAngularZone(){if(Et.isInAngularZone())throw new z(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,KB,oS,oS);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const KB={};function dE(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function hE(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function aS(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function uS(t){t._nesting--,dE(t)}class JB{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new In,this.onMicrotaskEmpty=new In,this.onStable=new In,this.onError=new In}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const cS=new ae("",{providedIn:"root",factory:lS});function lS(){const t=we(Et);let e=!0;return w(new qe(i=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{i.next(e),i.complete()})}),new qe(i=>{let s;t.runOutsideAngular(()=>{s=t.onStable.subscribe(()=>{Et.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=t.onUnstable.subscribe(()=>{Et.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(W()))}function yo(t){return t instanceof Function?t():t}let fE=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Me({token:t,providedIn:"root",factory:()=>new t})}return t})();function Ch(t){for(;t;){t[ze]|=64;const e=gh(t);if($d(t)&&!e)return t;t=e}return null}const gS=new ae("",{providedIn:"root",factory:()=>!1});let Em=null;function vS(t,e){return t[e]??wS()}function IS(t,e){const n=wS();n.producerNode?.length&&(t[e]=Em,n.lView=t,Em=ES())}const cj={...qo,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Ch(t.lView)},lView:null};function ES(){return Object.create(cj)}function wS(){return Em??=ES(),Em}const We={};function Gn(t){DS(pt(),Y(),fr()+t,!1)}function DS(t,e,n,r){if(!r)if(3==(3&e[ze])){const s=t.preOrderCheckHooks;null!==s&&Ec(e,s,n)}else{const s=t.preOrderHooks;null!==s&&wc(e,s,0,n)}fo(n)}function se(t,e=it.Default){const n=Y();return null===n?oe(t,e):be(Hn(),n,R(t),e)}function wm(t,e,n,r,i,s,o,a,u,l,h){const g=e.blueprint.slice();return g[Xt]=i,g[ze]=140|r,(null!==l||t&&2048&t[ze])&&(g[ze]|=2048),wg(g),g[Lt]=g[$o]=t,g[en]=n,g[jo]=o||t&&t[jo],g[Le]=a||t&&t[Le],g[Rs]=u||t&&t[Rs]||null,g[tr]=s,g[oo]=function _U(){return mU++}(),g[fs]=h,g[tg]=l,g[tn]=2==e.type?t[tn]:g,g}function Yc(t,e,n,r,i){let s=t.data[e];if(null===s)s=function pE(t,e,n,r,i){const s=_c(),o=su(),u=t.data[e]=function _j(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function xs(){return null!==ke.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(t,e,n,r,i),function Rg(){return ke.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function iu(){const t=ke.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Yi(s,!0),s}function Th(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function TS(t,e,n,r,i){const s=vS(e,ao),o=fr(),a=2&r;try{fo(-1),a&&e.length>st&&DS(t,e,st,!1),ci(a?2:0,i);const l=a?s:null,h=Xa(l);try{null!==l&&(l.dirty=!1),n(r,i)}finally{Hd(l,h)}}finally{a&&null===e[ao]&&IS(e,ao),fo(o),ci(a?3:1,i)}}function gE(t,e,n){if(rg(e)){const r=ai(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{ai(r)}}}function mE(t,e,n){mc()&&(function Cj(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;zo(n)&&function Mj(t,e,n){const r=nr(e,t),i=AS(n);let o=16;n.signals?o=4096:n.onPush&&(o=64);const a=Dm(t,wm(t,i,null,o,r,e,null,t[jo].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||d(n,e),Ar(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const u=t.data[a],l=Xi(e,t,a,n);Ar(l,e),null!==o&&Nj(0,a-i,l,u,0,o),Ai(u)&&(Zr(n.index,e)[en]=Xi(e,t,a,n))}}(t,e,n,nr(n,e)),64==(64&n.flags)&&MS(t,e,n))}function _E(t,e,n=nr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function AS(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=yE(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function yE(t,e,n,r,i,s,o,a,u,l,h){const g=st+r,m=g+i,y=function dj(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:We);return n}(g,m),C="function"==typeof l?l():l;return y[he]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:C,incompleteFirstPass:!1,ssrId:h}}let bS=t=>null;function SS(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=null===n?{}:n;const s=t[i];null===r?RS(n,e,i,s):r.hasOwnProperty(i)&&RS(n,e,r[i],s)}return n}function RS(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function Mi(t,e,n,r,i,s,o,a){const u=nr(e,n);let h,l=e.inputs;!a&&null!=l&&(h=l[r])?(DE(t,n,h,r,i),zo(e)&&function Ij(t,e){const n=Zr(e,t);16&n[ze]||(n[ze]|=64)}(n,e.index)):3&e.type&&(r=function vj(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}function vE(t,e,n,r){if(mc()){const i=null===r?null:{"":-1},s=function Aj(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(za(e,o.selectors,!1))if(r||(r=[]),Ai(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),IE(t,e,a.length)}else r.unshift(o),IE(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(t,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&PS(t,e,n,o,i,a),i&&function bj(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const s=n[e[i+1]];if(null==s)throw new z(-301,!1);r.push(e[i],s)}}}(n,r,i)}n.mergedAttrs=$a(n.mergedAttrs,n.attrs)}function PS(t,e,n,r,i,s){for(let l=0;l<r.length;l++)P(d(n,e),t,r[l].type);!function Rj(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let l=0;l<r.length;l++){const h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,u=Th(t,e,r.length,null);for(let l=0;l<r.length;l++){const h=r[l];n.mergedAttrs=$a(n.mergedAttrs,h.hostAttrs),Pj(t,n,e,u,h),Sj(u,h,i),null!==h.contentQueries&&(n.flags|=4),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(n.flags|=64);const g=h.type.prototype;!o&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}!function yj(t,e,n){const i=e.directiveEnd,s=t.data,o=e.attrs,a=[];let u=null,l=null;for(let h=e.directiveStart;h<i;h++){const g=s[h],m=n?n.get(g):null,C=m?m.outputs:null;u=SS(g.inputs,h,u,m?m.inputs:null),l=SS(g.outputs,h,l,C);const S=null===u||null===o||Od(e)?null:xj(u,h,o);a.push(S)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}(t,n,s)}function MS(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=function Xd(){return ke.lFrame.currentDirectiveIndex}();try{fo(s);for(let a=r;a<i;a++){const u=t.data[a],l=e[a];eh(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&Tj(u,l)}}finally{fo(-1),eh(o)}}function Tj(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function IE(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Sj(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Ai(e)&&(n[""]=t)}}function Pj(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=uo(i.type)),o=new Qo(s,Ai(i),se);t.blueprint[r]=o,n[r]=o,function wj(t,e,n,r,i){const s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function Dj(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,r,s)}}(t,e,r,Th(t,n,i.hostVars,We),i)}function Nj(t,e,n,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)NS(r,n,o[a++],o[a++],o[a++])}function NS(t,e,n,r,i){const s=ai(null);try{const o=t.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==t.setInput?t.setInput(e,i,n,r):e[r]=i}finally{ai(s)}}function xj(t,e,n){let r=null,i=0;for(;i<n.length;){const s=n[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===r&&(r=[]);const o=t[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function xS(t,e,n,r){return[t,!0,!1,e,null,0,r,n,null,null,null]}function OS(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r+1];if(-1!==s){const o=t.data[s];ou(n[r]),o.contentQueries(2,e[s],s)}}}function Dm(t,e){return t[Ga]?t[oc][Ti]=e:t[Ga]=e,t[oc]=e,e}function wE(t,e,n){ou(0);const r=ai(null);try{e(t,n)}finally{ai(r)}}function LS(t,e){const n=t[Rs],r=n?n.get(_o,null):null;r&&r.handleError(e)}function DE(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++];NS(t.data[o],e[o],r,a,i)}}function Oj(t,e){const n=Zr(e,t),r=n[he];!function kj(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[Xt];null!==i&&null===n[fs]&&(n[fs]=rE(i,n[Rs])),CE(r,n,n[en])}function CE(t,e,n){vc(e);try{const r=t.viewQuery;null!==r&&wE(1,r,n);const i=t.template;null!==i&&TS(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&OS(t,e),t.staticViewQueries&&wE(2,t.viewQuery,n);const s=t.components;null!==s&&function Vj(t,e){for(let n=0;n<e.length;n++)Oj(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[ze]&=-5,nh()}}let US=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(n,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function zv(t,e,n){const r=Object.create(Gv);n&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>dg(r),run:()=>{if(r.dirty=!1,r.hasRun&&!hg(r))return;r.hasRun=!0;const o=Xa(r);try{r.cleanupFn(),r.cleanupFn=cc,r.fn(i)}finally{Hd(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(n,l=>{this.all.has(l)&&this.queue.set(l,s)},i);let a;this.all.add(o),o.notify();const u=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Me({token:t,providedIn:"root",factory:()=>new t})}return t})();function Cm(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Vn(i,a):2==s&&(r=Vn(r,a+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Ah(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];null!==s&&r.push(Tt(s)),Cr(s)&&BS(s,r);const o=n.type;if(8&o)Ah(t,e,n.child,r);else if(32&o){const a=SI(n,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=vb(e,n);if(Array.isArray(a))r.push(...a);else{const u=gh(e[tn]);Ah(u[he],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function BS(t,e){for(let n=$n;n<t.length;n++){const r=t[n],i=r[he].firstChild;null!==i&&Ah(r[he],r,i,e)}t[dr]!==t[Xt]&&e.push(t[dr])}function Tm(t,e,n,r=!0){const i=e[jo],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{jS(t,e,t.template,n)}catch(u){throw r&&LS(e,u),u}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function jS(t,e,n,r){const i=e[ze];if(256!=(256&i)){e[jo].effectManager?.flush(),vc(e);try{wg(e),function Sg(t){return ke.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&TS(t,e,n,2,r);const o=3==(3&i);if(o){const l=t.preOrderCheckHooks;null!==l&&Ec(e,l,null)}else{const l=t.preOrderHooks;null!==l&&wc(e,l,0,null),cu(e,0)}if(function Uj(t){for(let e=ab(t);null!==e;e=ub(e)){if(!e[ng])continue;const n=e[Ho];for(let r=0;r<n.length;r++){eI(n[r])}}}(e),$S(e,2),null!==t.contentQueries&&OS(t,e),o){const l=t.contentCheckHooks;null!==l&&Ec(e,l)}else{const l=t.contentHooks;null!==l&&wc(e,l,1),cu(e,1)}!function lj(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const r=vS(e,qa);try{for(let i=0;i<n.length;i++){const s=n[i];if(s<0)fo(~s);else{const o=s,a=n[++i],u=n[++i];Mg(a,o),r.dirty=!1;const l=Xa(r);try{u(2,e[o])}finally{Hd(r,l)}}}}finally{null===e[qa]&&IS(e,qa),fo(-1)}}(t,e);const a=t.components;null!==a&&zS(e,a,0);const u=t.viewQuery;if(null!==u&&wE(2,u,r),o){const l=t.viewCheckHooks;null!==l&&Ec(e,l)}else{const l=t.viewHooks;null!==l&&wc(e,l,2),cu(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[ze]&=-73,fc(e)}finally{nh()}}}function $S(t,e){for(let n=ab(t);null!==n;n=ub(n))for(let r=$n;r<n.length;r++)HS(n[r],e)}function Bj(t,e,n){HS(Zr(e,t),n)}function HS(t,e){if(!function Xv(t){return 128==(128&t[ze])}(t))return;const n=t[he],r=t[ze];if(80&r&&0===e||1024&r||2===e)jS(n,t,n.template,t[en]);else if(t[so]>0){$S(t,1);const i=n.components;null!==i&&zS(t,i,1)}}function zS(t,e,n){for(let r=0;r<e.length;r++)Bj(t,e[r],n)}class bh{get rootNodes(){const e=this._lView,n=e[he];return Ah(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[en]}set context(e){this._lView[en]=e}get destroyed(){return 256==(256&this._lView[ze])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Lt];if(Cr(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(rm(e,r),Wg(n,r))}this._attachedToViewContainer=!1}PI(this._lView[he],this._lView)}onDestroy(e){!function pc(t,e){if(256==(256&t[ze]))throw new z(911,!1);null===t[Ki]&&(t[Ki]=[]),t[Ki].push(e)}(this._lView,e)}markForCheck(){Ch(this._cdRefInjectingView||this._lView)}detach(){this._lView[ze]&=-129}reattach(){this._lView[ze]|=128}detectChanges(){Tm(this._lView[he],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new z(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function MU(t,e){_h(t,e,e[Le],2,null,null)}(this._lView[he],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new z(902,!1);this._appRef=e}}class jj extends bh{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Tm(e[he],e,e[en],!1)}checkNoChanges(){}get context(){return null}}class GS extends vm{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=at(e);return new Sh(n,this.ngModule)}}function WS(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class Hj{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Lo(r);const i=this.injector.get(e,oE,r);return i!==oE||n===oE?i:this.parentInjector.get(e,n,r)}}class Sh extends Qb{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=WS(e.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return WS(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function Ud(t){return t.map(rc).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=(i=i||this.ngModule)instanceof ts?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new Hj(e,s):e,a=o.get(Jb,null);if(null===a)throw new z(407,!1);const g={rendererFactory:a,sanitizer:o.get(BB,null),effectManager:o.get(US,null),afterRenderEventManager:o.get(fE,null)},m=a.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",C=r?function hj(t,e,n,r){const s=r.get(gS,!1)||n===Xn.ShadowDom,o=t.selectRootElement(e,s);return function fj(t){bS(t)}(o),o}(m,r,this.componentDef.encapsulation,o):nm(m,y,function $j(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(y)),V=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let x=null;null!==C&&(x=rE(C,o,!0));const $=yE(0,null,null,1,0,null,null,null,null,null,null),re=wm(null,$,null,V,null,null,g,m,o,null,x);let de,$e;vc(re);try{const St=this.componentDef;let Kn,xp=null;St.findHostDirectiveDefs?(Kn=[],xp=new Map,St.findHostDirectiveDefs(St,Kn,xp),Kn.push(St)):Kn=[St];const vv=function Gj(t,e){const n=t[he],r=st;return t[r]=e,Yc(n,r,2,"#host",null)}(re,C),PJ=function Wj(t,e,n,r,i,s,o){const a=i[he];!function qj(t,e,n,r){for(const i of t)e.mergedAttrs=$a(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(Cm(e,e.mergedAttrs,!0),null!==n&&Db(r,n,e))}(r,t,e,o);let u=null;null!==e&&(u=rE(e,i[Rs]));const l=s.rendererFactory.createRenderer(e,n);let h=16;n.signals?h=4096:n.onPush&&(h=64);const g=wm(i,AS(n),null,h,i[t.index],t,s,l,null,null,u);return a.firstCreatePass&&IE(a,t,r.length-1),Dm(i,g),i[t.index]=g}(vv,C,St,Kn,re,g,m);$e=Ms($,st),C&&function Kj(t,e,n,r){if(r)ja(t,n,["ng-version",Xb.full]);else{const{attrs:i,classes:s}=function Jp(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!Wr(i))break;i=s}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&ja(t,n,i),s&&s.length>0&&wb(t,n,s.join(" "))}}(m,St,C,r),void 0!==n&&function Qj(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const s=n[i];r.push(null!=s?Array.from(s):null)}}($e,this.ngContentSelectors,n),de=function Zj(t,e,n,r,i,s){const o=Hn(),a=i[he],u=nr(o,i);PS(a,i,o,n,null,r);for(let h=0;h<n.length;h++)Ar(Xi(i,a,o.directiveStart+h,o),i);MS(a,i,o),u&&Ar(u,i);const l=Xi(i,a,o.directiveStart+o.componentOffset,o);if(t[en]=i[en]=l,null!==s)for(const h of s)h(l,e);return gE(a,o,t),l}(PJ,St,Kn,xp,re,[Yj]),CE($,re,null)}finally{nh()}return new zj(this.componentType,de,qc($e,re),re,$e)}}class zj extends OB{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new jj(i),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const s=this._rootLView;DE(s[he],s,i,e,n),this.previousInputValues.set(e,n),Ch(Zr(this._tNode.index,s))}}get injector(){return new ir(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function Yj(){const t=Hn();Ic(Y()[he],t)}function Nt(t){let e=function qS(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(Ai(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new z(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const o=t;o.inputs=Am(t.inputs),o.inputTransforms=Am(t.inputTransforms),o.declaredInputs=Am(t.declaredInputs),o.outputs=Am(t.outputs);const a=i.hostBindings;a&&t$(t,a);const u=i.viewQuery,l=i.contentQueries;if(u&&Xj(t,u),l&&e$(t,l),Rt(t.inputs,i.inputs),Rt(t.declaredInputs,i.declaredInputs),Rt(t.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),Rt(o.inputTransforms,i.inputTransforms)),Ai(i)&&i.data.animation){const h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(t),a===Nt&&(n=!1)}}e=Object.getPrototypeOf(e)}!function Jj(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=$a(i.hostAttrs,n=$a(n,i.hostAttrs))}}(r)}function Am(t){return t===wr?{}:t===vt?[]:t}function Xj(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function e$(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,s)=>{e(r,i,s),n(r,i,s)}:e}function t$(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}function bm(t){return!!function TE(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Sr(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Xc(t,e,n,r){return Sr(t,ho(),n)?e+Ee(n)+r:We}function Nm(t,e,n,r,i,s,o,a){const u=Y(),l=pt(),h=t+st,g=l.firstCreatePass?function A$(t,e,n,r,i,s,o,a,u){const l=e.consts,h=Yc(e,t,4,o||null,ps(l,a));vE(e,n,h,ps(l,u)),Ic(e,h);const g=h.tView=yE(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,h),g.queries=e.queries.embeddedTView(h)),h}(h,l,u,e,n,r,i,s,o):l.data[h];Yi(g,!1);const m=lR(l,u,g,t);uu()&&sm(l,u,m,g),Ar(m,u),Dm(u,u[h]=xS(m,u,m,g)),Go(g)&&mE(l,u,g),null!=o&&_E(u,g,a)}let lR=function dR(t,e,n,r){return Os(!0),e[Le].createComment("")};function rs(t,e,n){const r=Y();return Sr(r,ho(),e)&&Mi(pt(),nn(),r,t,e,r[Le],n,!1),rs}function ME(t,e,n,r,i){const o=i?"class":"style";DE(t,n,e.inputs[o],o,r)}function Pe(t,e,n,r){const i=Y(),s=pt(),o=st+t,a=i[Le],u=s.firstCreatePass?function P$(t,e,n,r,i,s){const o=e.consts,u=Yc(e,t,2,r,ps(o,i));return vE(e,n,u,ps(o,s)),null!==u.attrs&&Cm(u,u.attrs,!1),null!==u.mergedAttrs&&Cm(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,e,n,r):s.data[o],l=fR(s,i,u,a,e,t);i[o]=l;const h=Go(u);return Yi(u,!0),Db(a,l,u),32!=(32&u.flags)&&uu()&&sm(s,i,l,u),0===function ru(){return ke.lFrame.elementDepthCount}()&&Ar(l,i),function nI(){ke.lFrame.elementDepthCount++}(),h&&(mE(s,i,u),gE(s,u,i)),null!==r&&_E(i,u),Pe}function Ne(){let t=Hn();su()?function Yd(){ke.lFrame.isParent=!1}():(t=t.parent,Yi(t,!1));const e=t;(function Qd(t){return ke.skipHydrationRootTNode===t})(e)&&function Ag(){ke.skipHydrationRootTNode=null}(),function rI(){ke.lFrame.elementDepthCount--}();const n=pt();return n.firstCreatePass&&(Ic(n,t),rg(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function oh(t){return 0!=(8&t.flags)}(e)&&ME(n,e,Y(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function jg(t){return 0!=(16&t.flags)}(e)&&ME(n,e,Y(),e.stylesWithoutHost,!1),Ne}function Ls(t,e,n,r){return Pe(t,e,n,r),Ne(),Ls}let fR=(t,e,n,r,i,s)=>(Os(!0),nm(r,i,function Fg(){return ke.lFrame.currentNamespace}()));function xm(){return Y()}function xh(t){return!!t&&"function"==typeof t.then}function mR(t){return!!t&&"function"==typeof t.subscribe}function Pt(t,e,n,r){const i=Y(),s=pt(),o=Hn();return function yR(t,e,n,r,i,s,o){const a=Go(r),l=t.firstCreatePass&&function VS(t){return t.cleanup||(t.cleanup=[])}(t),h=e[en],g=function kS(t){return t[Bo]||(t[Bo]=[])}(e);let m=!0;if(3&r.type||o){const S=nr(r,e),M=o?o(S):S,V=g.length,x=o?re=>o(Tt(re[r.index])):r.index;let $=null;if(!o&&a&&($=function V$(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=e[Bo],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(t,e,i,r.index)),null!==$)($.__ngLastListenerFn__||$).__ngNextListenerFn__=s,$.__ngLastListenerFn__=s,m=!1;else{s=IR(r,e,h,s,!1);const re=n.listen(M,i,s);g.push(s,re),l&&l.push(i,x,V,V+1)}}else s=IR(r,e,h,s,!1);const y=r.outputs;let C;if(m&&null!==y&&(C=y[i])){const S=C.length;if(S)for(let M=0;M<S;M+=2){const de=e[C[M]][C[M+1]].subscribe(s),$e=g.length;g.push(s,de),l&&l.push(i,r.index,$e,-($e+1))}}}(s,i,i[Le],o,t,e,r),Pt}function vR(t,e,n,r){try{return ci(6,e,n),!1!==n(r)}catch(i){return LS(t,i),!1}finally{ci(7,e,n)}}function IR(t,e,n,r,i){return function s(o){if(o===Function)return r;Ch(t.componentOffset>-1?Zr(t.index,e):e);let u=vR(e,n,r,o),l=s.__ngNextListenerFn__;for(;l;)u=vR(e,n,l,o)&&u,l=l.__ngNextListenerFn__;return i&&!1===u&&o.preventDefault(),u}}function Qr(t=1){return function oI(t){return(ke.lFrame.contextLView=function aI(t,e){for(;t>0;)e=e[$o],t--;return e}(t,ke.lFrame.contextLView))[en]}(t)}function al(t,e,n){return OE(t,"",e,"",n),al}function OE(t,e,n,r,i){const s=Y(),o=Xc(s,e,n,r);return o!==We&&Mi(pt(),nn(),s,t,o,s[Le],i,!1),OE}function Om(t,e){return t<<17|e<<2}function ea(t){return t>>17&32767}function kE(t){return 2|t}function gu(t){return(131068&t)>>2}function VE(t,e){return-131069&t|e<<2}function FE(t){return 1|t}function RR(t,e,n,r,i){const s=t[n+1],o=null===e;let a=r?ea(s):gu(s),u=!1;for(;0!==a&&(!1===u||o);){const h=t[a+1];G$(t[a],e)&&(u=!0,t[a+1]=r?FE(h):kE(h)),a=r?ea(h):gu(h)}u&&(t[n+1]=r?kE(s):FE(s))}function G$(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Vc(t,e)>=0}function km(t,e){return function gs(t,e,n,r){const i=Y(),s=pt(),o=function Ji(t){const e=ke.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}(2);s.firstUpdatePass&&function LR(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[fr()],o=function FR(t,e){return e>=t.expandoStartIndex}(t,n);(function $R(t,e){return 0!=(t.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function eH(t,e,n,r){const i=function th(t){const e=ke.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Oh(n=LE(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=LE(i,t,e,n,r),null===s){let u=function tH(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==gu(r))return t[ea(r)]}(t,e,r);void 0!==u&&Array.isArray(u)&&(u=LE(null,t,e,u[1],r),u=Oh(u,e.attrs,r),function nH(t,e,n,r){t[ea(n?e.classBindings:e.styleBindings)]=r}(t,e,r,u))}else s=function rH(t,e,n){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Oh(r,t[s].hostAttrs,n);return Oh(r,e.attrs,n)}(t,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),n}(i,s,e,r),function H$(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=ea(o),u=gu(o);t[r]=n;let h,l=!1;if(Array.isArray(n)?(h=n[1],(null===h||Vc(n,h)>0)&&(l=!0)):h=n,i)if(0!==u){const m=ea(t[a+1]);t[r+1]=Om(m,a),0!==m&&(t[m+1]=VE(t[m+1],r)),t[a+1]=function j$(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=Om(a,0),0!==a&&(t[a+1]=VE(t[a+1],r)),a=r;else t[r+1]=Om(u,0),0===a?a=r:t[u+1]=VE(t[u+1],r),u=r;l&&(t[r+1]=kE(t[r+1])),RR(t,h,r,!0),RR(t,h,r,!1),function z$(t,e,n,r,i){const s=i?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&Vc(s,e)>=0&&(n[r+1]=FE(n[r+1]))}(e,h,t,r,s),o=Om(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,n,o,r)}}(s,t,o,r),e!==We&&Sr(i,o,e)&&function BR(t,e,n,r,i,s,o,a){if(!(3&e.type))return;const u=t.data,l=u[a+1],h=function $$(t){return 1==(1&t)}(l)?jR(u,e,n,i,gu(l),o):void 0;Vm(h)||(Vm(s)||function B$(t){return 2==(2&t)}(l)&&(s=jR(u,null,n,i,a,o)),function jU(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=-1===r.indexOf("-")?void 0:Jo.DashCase;null==i?t.removeStyle(n,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Jo.Important),t.setStyle(n,r,i,s))}}(r,o,hc(fr(),n),i,s))}(s,s.data[fr()],i,i[Le],t,i[o+1]=function aH(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=Te(function Xo(t){return t instanceof bb?t.changingThisBreaksApplicationSecurity:t}(t)))),t}(e,n),r,o)}(t,e,null,!0),km}function LE(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=Oh(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Oh(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Ri(t,o,!!n||e[++s]))}return void 0===t?null:t}function jR(t,e,n,r,i,s){const o=null===e;let a;for(;i>0;){const u=t[i],l=Array.isArray(u),h=l?u[1]:u,g=null===h;let m=n[i+1];m===We&&(m=g?vt:void 0);let y=g?vI(m,r):h===r?m:void 0;if(l&&!Vm(y)&&(y=vI(u,r)),Vm(y)&&(a=y,o))return a;const C=t[i+1];i=o?ea(C):gu(C)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=vI(u,r))}return a}function Vm(t){return void 0!==t}function tt(t,e=""){const n=Y(),r=pt(),i=t+st,s=r.firstCreatePass?Yc(r,i,1,e,null):r.data[i],o=HR(r,n,s,e,t);n[i]=o,uu()&&sm(r,n,o,s),Yi(s,!1)}let HR=(t,e,n,r,i)=>(Os(!0),function tm(t,e){return t.createText(e)}(e[Le],r));function cl(t){return UE("",t,""),cl}function UE(t,e,n){const r=Y(),i=Xc(r,t,e,n);return i!==We&&function vo(t,e,n){const r=hc(e,t);!function lb(t,e,n){t.setValue(e,n)}(t[Le],r,n)}(r,fr(),i),UE}const dl="en-US";let dP=dl;function $E(t,e,n,r,i){if(t=R(t),Array.isArray(t))for(let s=0;s<t.length;s++)$E(t[s],e,n,r,i);else{const s=pt(),o=Y(),a=Hn();let u=fu(t)?t:R(t.provide);const l=zb(t),h=1048575&a.providerIndexes,g=a.directiveStart,m=a.providerIndexes>>20;if(fu(t)||!t.multi){const y=new Qo(l,i,se),C=zE(u,e,i?h:h+m,g);-1===C?(P(d(a,o),s,u),HE(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),o.push(y)):(n[C]=y,o[C]=y)}else{const y=zE(u,e,h+m,g),C=zE(u,e,h,h+m),M=C>=0&&n[C];if(i&&!M||!i&&!(y>=0&&n[y])){P(d(a,o),s,u);const V=function Sz(t,e,n,r,i){const s=new Qo(t,n,se);return s.multi=[],s.index=e,s.componentProviders=0,VP(s,i,r&&!n),s}(i?bz:Az,n.length,i,r,l);!i&&M&&(n[C].providerFactory=V),HE(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(V),o.push(V)}else HE(s,t,y>-1?y:C,VP(n[i?C:y],l,!i&&r));!i&&r&&M&&n[C].componentProviders++}}}function HE(t,e,n,r){const i=fu(e),s=function _B(t){return!!t.useClass}(e);if(i||s){const u=(s?R(e.useClass):e).prototype.ngOnDestroy;if(u){const l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const h=l.indexOf(n);-1===h?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function VP(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function zE(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Az(t,e,n,r){return GE(this.multi,[])}function bz(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Xi(n,n[he],this.providerFactory.index,r);s=a.slice(0,o),GE(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],GE(i,s);return s}function GE(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function cn(t,e=[]){return n=>{n.providersResolver=(r,i)=>function Tz(t,e,n){const r=pt();if(r.firstCreatePass){const i=Ai(t);$E(n,r.data,r.blueprint,i,!0),$E(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}class _u{}class FP{}class WE extends _u{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new GS(this);const i=qr(e);this._bootstrapComponents=yo(i.bootstrap),this._r3Injector=iS(e,n,[{provide:_u,useValue:this},{provide:vm,useValue:this.componentFactoryResolver},...r],Te(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class qE extends FP{constructor(e){super(),this.moduleType=e}create(e){return new WE(this.moduleType,e,[])}}class LP extends _u{constructor(e){super(),this.componentFactoryResolver=new GS(this),this.instance=null;const n=new Hc([...e.providers,{provide:_u,useValue:this},{provide:vm,useValue:this.componentFactoryResolver}],e.parent||hm(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function ZE(t,e,n=null){return new LP({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let Mz=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=Bb(0,n.type),i=r.length>0?ZE([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Me({token:t,providedIn:"environment",factory:()=>new t(oe(ts))})}return t})();function UP(t){t.getStandaloneInjector=e=>e.get(Mz).getOrCreateStandaloneInjector(t)}function s4(t,e,n,r=!0){const i=e[he];if(function xU(t,e,n,r){const i=$n+r,s=n.length;r>0&&(n[i-1][Ti]=e),r<s-$n?(e[Ti]=n[i],B0(n,$n+r,e)):(n.push(e),e[Ti]=null),e[Lt]=n;const o=e[Wa];null!==o&&n!==o&&function OU(t,e){const n=t[Ho];e[tn]!==e[Lt][Lt][tn]&&(t[ng]=!0),null===n?t[Ho]=[e]:n.push(e)}(o,e);const a=e[Zi];null!==a&&a.insertView(t),e[ze]|=128}(i,e,t,n),r){const s=OI(n,t),o=e[Le],a=im(o,t[dr]);null!==a&&function PU(t,e,n,r,i,s){r[Xt]=i,r[tr]=e,_h(t,r,n,1,i,s)}(i,t[tr],o,e,a,s)}}Symbol;let Io=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=u4}return t})();const o4=Io,a4=class extends o4{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){const i=function i4(t,e,n,r){const i=e.tView,a=wm(t,i,n,4096&t[ze]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[Wa]=t[e.index];const l=t[Zi];return null!==l&&(a[Zi]=l.createEmbeddedView(i)),CE(i,a,n),a}(this._declarationLView,this._declarationTContainer,e,{injector:n,hydrationInfo:r});return new bh(i)}};function u4(){return jm(Hn(),Y())}function jm(t,e){return 4&t.type?new a4(e,t,qc(t,e)):null}let _s=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=p4}return t})();function p4(){return function rM(t,e){let n;const r=e[t.index];return Cr(r)?n=r:(n=xS(r,e,null,t),e[t.index]=n,Dm(e,n)),iM(n,e,t,r),new tM(n,t,e)}(Hn(),Y())}const g4=_s,tM=class extends g4{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return qc(this._hostTNode,this._hostLView)}get injector(){return new ir(this._hostTNode,this._hostLView)}get parentInjector(){const e=E(this._hostTNode,this._hostLView);if(Cc(e)){const n=du(e,this._hostLView),r=lu(e);return new ir(n[he].data[r+8],n)}return new ir(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=nM(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-$n}createEmbeddedView(e,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(n||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,n,r,i,s){const o=e&&!function dh(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const S=n||{};a=S.index,r=S.injector,i=S.projectableNodes,s=S.environmentInjector||S.ngModuleRef}const u=o?e:new Sh(at(e)),l=r||this.parentInjector;if(!s&&null==u.ngModule){const M=(o?l:this.parentInjector).get(ts,null);M&&(s=M)}at(u.componentType??{});const y=u.create(l,i,null,s);return this.insertImpl(y.hostView,a,false),y}insert(e,n){return this.insertImpl(e,n,!1)}insertImpl(e,n,r){const i=e._lView;if(function Kd(t){return Cr(t[Lt])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const l=i[Lt],h=new tM(l,l[tr],l[Lt]);h.detach(h.indexOf(e))}}const o=this._adjustIndex(n),a=this._lContainer;return s4(a,i,o,!r),e.attachToViewContainerRef(),B0(YE(a),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=nM(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=rm(this._lContainer,n);r&&(Wg(YE(this._lContainer),n),PI(r[he],r))}detach(e){const n=this._adjustIndex(e,-1),r=rm(this._lContainer,n);return r&&null!=Wg(YE(this._lContainer),n)?new bh(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function nM(t){return t[8]}function YE(t){return t[8]||(t[8]=[])}let iM=function sM(t,e,n,r){if(t[dr])return;let i;i=8&n.type?Tt(r):function m4(t,e){const n=t[Le],r=n.createComment(""),i=nr(e,t);return hu(n,im(n,i),r,function LU(t,e){return t.nextSibling(e)}(n,i),!1),r}(e,n),t[dr]=i};function pM(t,e){return jm(t,e)}const uw=new ae("Application Initializer");let cw=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=we(uw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const s=i();if(xh(s))n.push(s);else if(mR(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});n.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),MM=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const Eo=new ae("LocaleId",{providedIn:"root",factory:()=>we(Eo,it.Optional|it.SkipSelf)||function W4(){return typeof $localize<"u"&&$localize.locale||dl}()});let NM=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new v(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class K4{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let xM=(()=>{class t{compileModuleSync(n){return new qE(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),s=yo(qr(n).declarations).reduce((o,a)=>{const u=at(a);return u&&o.push(new Sh(u)),o},[]);return new K4(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const FM=new ae(""),Gm=new ae("");let pw,hw=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,pw||(function _G(t){pw=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Et.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||t)(oe(Et),oe(fw),oe(Gm))};static#t=this.\u0275prov=Me({token:t,factory:t.\u0275fac})}return t})(),fw=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return pw?.findTestabilityInTree(this,n,r)??null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),ta=null;const LM=new ae("AllowMultipleToken"),gw=new ae("PlatformDestroyListeners"),mw=new ae("appBootstrapListener");class BM{constructor(e,n){this.name=e,this.token=n}}function $M(t,e,n=[]){const r=`Platform: ${e}`,i=new ae(r);return(s=[])=>{let o=_w();if(!o||o.injector.get(LM,!1)){const a=[...n,...s,{provide:i,useValue:!0}];t?t(a):function IG(t){if(ta&&!ta.get(LM,!1))throw new z(400,!1);(function UM(){!function Uv(t){Wd=t}(()=>{throw new z(600,!1)})})(),ta=t;const e=t.get(zM);(function jM(t){t.get(Gb,null)?.forEach(n=>n())})(t)}(function HM(t=[],e){return br.create({name:e,providers:[{provide:WI,useValue:"platform"},{provide:gw,useValue:new Set([()=>ta=null])},...t]})}(a,r))}return function wG(t){const e=_w();if(!e)throw new z(401,!1);return e}()}}function _w(){return ta?.get(zM)??null}let zM=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function DG(t="zone.js",e){return"noop"===t?new JB:"zone.js"===t?new Et(e):t}(r?.ngZone,function GM(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function Pz(t,e,n){return new WE(t,e,n)}(n.moduleType,this.injector,function QM(t){return[{provide:Et,useFactory:t},{provide:Eh,multi:!0,useFactory:()=>{const e=we(TG,{optional:!0});return()=>e.initialize()}},{provide:KM,useFactory:CG},{provide:cS,useFactory:lS}]}(()=>i)),o=s.injector.get(_o,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{o.handleError(u)}});s.onDestroy(()=>{Wm(this._modules,s),a.unsubscribe()})}),function WM(t,e,n){try{const r=n();return xh(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(cw);return a.runInitializers(),a.donePromise.then(()=>(function hP(t){zr(t,"Expected localeId to be defined"),"string"==typeof t&&(dP=t.toLowerCase().replace(/_/g,"-"))}(s.injector.get(Eo,dl)||dl),this._moduleDoBootstrap(s),s))})})}bootstrapModule(n,r=[]){const i=qM({},r);return function yG(t,e,n){const r=new qE(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(pl);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new z(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new z(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(gw,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||t)(oe(br))};static#t=this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function qM(t,e){return Array.isArray(e)?e.reduce(qM,t):{...t,...e}}let pl=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=we(KM),this.zoneIsStable=we(cS),this.componentTypes=[],this.components=[],this.isStable=we(NM).hasPendingTasks.pipe(Ie(n=>n?A(!1):this.zoneIsStable),Ve(),W()),this._injector=we(ts)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof Qb;if(!this._injector.get(cw).done)throw!i&&function Ss(t){const e=at(t)||vn(t)||jn(t);return null!==e&&e.standalone}(n),new z(405,!1);let o;o=i?n:this._injector.get(vm).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function vG(t){return t.isBoundToModule}(o)?void 0:this._injector.get(_u),l=o.create(br.NULL,[],r||o.selector,a),h=l.location.nativeElement,g=l.injector.get(FM,null);return g?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),Wm(this.components,l),g?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new z(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Wm(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(mw,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Wm(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new z(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Wm(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const KM=new ae("",{providedIn:"root",factory:()=>we(_o).handleError.bind(void 0)});function CG(){const t=we(Et),e=we(_o);return n=>t.runOutsideAngular(()=>e.handleError(n))}let TG=(()=>{class t{constructor(){this.zone=we(Et),this.applicationRef=we(pl)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();let qm=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=bG}return t})();function bG(t){return function SG(t,e,n){if(zo(t)&&!n){const r=Zr(t.index,e);return new bh(r,r)}return 47&t.type?new bh(e[tn],e):null}(Hn(),Y(),16==(16&t))}class tN{constructor(){}supports(e){return bm(e)}create(e){return new OG(e)}}const xG=(t,e)=>e;class OG{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||xG}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){const o=!r||n&&n.currentIndex<rN(r,i,s)?n:r,a=rN(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,null==o.previousIndex)i++;else{s||(s=[]);const l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){const y=m<s.length?s[m]:s[m]=0,C=y+m;h<=C&&C<l&&(s[m]=y+1)}s[o.previousIndex]=h-l}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!bm(e))throw new z(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),r=!0),n=n._next}else i=0,function u$(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new kG(n,r),s,i),e}_verifyReinsertion(e,n,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new nN),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new nN),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class kG{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class VG{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class nN{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new VG,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function rN(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function sN(){return new Qm([new tN])}let Qm=(()=>{class t{static#e=this.\u0275prov=Me({token:t,providedIn:"root",factory:sN});constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||sN()),deps:[[t,new Zg,new li]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new z(901,!1)}}return t})();const jG=$M(null,"core",[]);let $G=(()=>{class t{constructor(n){}static#e=this.\u0275fac=function(r){return new(r||t)(oe(pl))};static#t=this.\u0275mod=lr({type:t});static#n=this.\u0275inj=Er({})}return t})();let Dw=null;function na(){return Dw}class nW{}const is=new ae("DocumentToken");let Cw=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Me({token:t,factory:function(){return we(iW)},providedIn:"platform"})}return t})();const rW=new ae("Location Initialized");let iW=(()=>{class t extends Cw{constructor(){super(),this._doc=we(is),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return na().getBaseHref(this._doc)}onPopState(n){const r=na().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=na().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Me({token:t,factory:function(){return new t},providedIn:"platform"})}return t})();function Tw(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function gN(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function wo(t){return t&&"?"!==t[0]?"?"+t:t}let vu=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Me({token:t,factory:function(){return we(_N)},providedIn:"root"})}return t})();const mN=new ae("appBaseHref");let _N=(()=>{class t extends vu{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??we(is).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Tw(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+wo(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){const o=this.prepareExternalUrl(i+wo(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){const o=this.prepareExternalUrl(i+wo(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(oe(Cw),oe(mN,8))};static#t=this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),sW=(()=>{class t extends vu{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=Tw(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+wo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+wo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(oe(Cw),oe(mN,8))};static#t=this.\u0275prov=Me({token:t,factory:t.\u0275fac})}return t})(),Aw=(()=>{class t{constructor(n){this._subject=new In,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function uW(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(gN(yN(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+wo(r))}normalize(n){return t.stripTrailingSlash(function aW(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,yN(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+wo(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+wo(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static#e=this.normalizeQueryParams=wo;static#t=this.joinWithSlash=Tw;static#n=this.stripTrailingSlash=gN;static#r=this.\u0275fac=function(r){return new(r||t)(oe(vu))};static#i=this.\u0275prov=Me({token:t,factory:function(){return function oW(){return new Aw(oe(vu))}()},providedIn:"root"})}return t})();function yN(t){return t.replace(/\/index.html$/,"")}class KW{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let RN=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new KW(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),PN(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{PN(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(se(_s),se(Io),se(Qm))};static#t=this.\u0275dir=Oe({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return t})();function PN(t,e){t.context.$implicit=e.item}let MN=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new QW,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){NN("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){NN("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(se(_s),se(Io))};static#t=this.\u0275dir=Oe({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return t})();class QW{constructor(){this.$implicit=null,this.ngIf=null}}function NN(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Te(e)}'.`)}let Eq=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=lr({type:t});static#n=this.\u0275inj=Er({})}return t})();function u_(t){return"server"===t}let Tq=(()=>{class t{static#e=this.\u0275prov=Me({token:t,providedIn:"root",factory:()=>new Aq(oe(is),window)})}return t})();class Aq{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function bq(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Yq extends nW{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Hw extends Yq{static makeCurrent(){!function tW(t){Dw||(Dw=t)}(new Hw)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function Jq(){return Zh=Zh||document.querySelector("base"),Zh?Zh.getAttribute("href"):null}();return null==n?null:function Xq(t){d_=d_||document.createElement("a"),d_.setAttribute("href",t);const e=d_.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Zh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function WW(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let d_,Zh=null,t3=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Me({token:t,factory:t.\u0275fac})}return t})();const zw=new ae("EventManagerPlugins");let BN=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new z(5101,!1);return this._eventNameToPlugin.set(n,r),r}static#e=this.\u0275fac=function(r){return new(r||t)(oe(zw),oe(Et))};static#t=this.\u0275prov=Me({token:t,factory:t.\u0275fac})}return t})();class jN{constructor(e){this._doc=e}}const Gw="ng-app-id";let $N=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=u_(s),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${Gw}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(Gw),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(Gw,this.appId),o}}addStyleToHost(n,r){const i=this.getStyleElement(n,r);n.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||t)(oe(is),oe(fm),oe(Wb,8),oe(go))};static#t=this.\u0275prov=Me({token:t,factory:t.\u0275fac})}return t})();const Ww={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},qw=/%COMP%/g,s3=new ae("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function zN(t,e){return e.map(n=>n.replace(qw,t))}let GN=(()=>{class t{constructor(n,r,i,s,o,a,u,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=u_(a),this.defaultRenderer=new Zw(n,o,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Xn.ShadowDom&&(r={...r,encapsulation:Xn.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof qN?i.applyToHost(n):i instanceof Kw&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case Xn.Emulated:s=new qN(u,l,r,this.appId,h,o,a,g);break;case Xn.ShadowDom:return new c3(u,l,n,r,o,a,this.nonce,g);default:s=new Kw(u,l,r,h,o,a,g)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||t)(oe(BN),oe($N),oe(fm),oe(s3),oe(is),oe(go),oe(Et),oe(Wb))};static#t=this.\u0275prov=Me({token:t,factory:t.\u0275fac})}return t})();class Zw{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Ww[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(WN(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(WN(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new z(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const s=Ww[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=Ww[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Jo.DashCase|Jo.Important)?e.style.setProperty(n,r,i&Jo.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Jo.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=na().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function WN(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class c3 extends Zw{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=zN(i.id,i.styles);for(const h of l){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=h,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Kw extends Zw{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?zN(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class qN extends Kw{constructor(e,n,r,i,s,o,a,u){const l=i+"-"+r.id;super(e,n,r,s,o,a,u,l),this.contentAttr=function o3(t){return"_ngcontent-%COMP%".replace(qw,t)}(l),this.hostAttr=function a3(t){return"_nghost-%COMP%".replace(qw,t)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let l3=(()=>{class t extends jN{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||t)(oe(is))};static#t=this.\u0275prov=Me({token:t,factory:t.\u0275fac})}return t})();const ZN=["alt","control","meta","shift"],d3={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},h3={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let f3=(()=>{class t extends jN{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>na().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=t._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),ZN.forEach(l=>{const h=r.indexOf(l);h>-1&&(r.splice(h,1),o+=l+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(n,r){let i=d3[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),ZN.forEach(o=>{o!==i&&(0,h3[o])(n)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(r){return new(r||t)(oe(is))};static#t=this.\u0275prov=Me({token:t,factory:t.\u0275fac})}return t})();const QN=[{provide:go,useValue:"browser"},{provide:Gb,useValue:function p3(){Hw.makeCurrent()},multi:!0},{provide:is,useFactory:function m3(){return function WU(t){FI=t}(document),document},deps:[]}],_3=$M(jG,"browser",QN),y3=new ae(""),YN=[{provide:Gm,useClass:class e3{addToWindow(e){Ft.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new z(5103,!1);return s},Ft.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ft.getAllAngularRootElements=()=>e.getAllRootElements(),Ft.frameworkStabilizers||(Ft.frameworkStabilizers=[]),Ft.frameworkStabilizers.push(r=>{const i=Ft.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?na().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:FM,useClass:hw,deps:[Et,fw,Gm]},{provide:hw,useClass:hw,deps:[Et,fw,Gm]}],JN=[{provide:WI,useValue:"root"},{provide:_o,useFactory:function g3(){return new _o},deps:[]},{provide:zw,useClass:l3,multi:!0,deps:[is,Et,go]},{provide:zw,useClass:f3,multi:!0,deps:[is]},GN,$N,BN,{provide:Jb,useExisting:GN},{provide:class Sq{},useClass:t3,deps:[]},[]];let v3=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:fm,useValue:n.appId}]}}static#e=this.\u0275fac=function(r){return new(r||t)(oe(y3,12))};static#t=this.\u0275mod=lr({type:t});static#n=this.\u0275inj=Er({providers:[...JN,...YN],imports:[Eq,$G]})}return t})(),XN=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static#e=this.\u0275fac=function(r){return new(r||t)(oe(is))};static#t=this.\u0275prov=Me({token:t,factory:function(r){let i=null;return i=r?new r:function E3(){return new XN(oe(is))}(),i},providedIn:"root"})}return t})();typeof window<"u"&&window;const{isArray:b3}=Array,{getPrototypeOf:S3,prototype:R3,keys:P3}=Object;function rx(t){if(1===t.length){const e=t[0];if(b3(e))return{args:e,keys:null};if(function M3(t){return t&&"object"==typeof t&&S3(t)===R3}(e)){const n=P3(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}const{isArray:N3}=Array;function ix(t){return me(e=>function x3(t,e){return N3(e)?t(...e):t(e)}(t,e))}function sx(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Yw(...t){const e=wi(t),n=zi(t),{args:r,keys:i}=rx(t);if(0===r.length)return I([],e);const s=new qe(function O3(t,e,n=fn){return r=>{ox(e,()=>{const{length:i}=t,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)ox(e,()=>{const l=I(t[u],e);let h=!1;l.subscribe(ce(r,g=>{s[u]=g,h||(h=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>sx(i,o):fn));return n?s.pipe(ix(n)):s}function ox(t,e,n){t?Br(n,t,e):e()}const h_=G(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Jw(...t){return function k3(){return jr(1)}()(I(t,wi(t)))}function ax(t){return new qe(e=>{ht(t()).subscribe(e)})}function Kh(t,e){const n=D(t)?t:()=>t,r=i=>i.error(n());return new qe(e?i=>e.schedule(r,0,i):r)}function Xw(){return K((t,e)=>{let n=null;t._refCount++;const r=ce(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class ux extends qe{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Q(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new _t;const n=this.getSubject();e.add(this.source.subscribe(ce(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=_t.EMPTY)}return e}refCount(){return Xw()(this)}}function _l(t){return t<=0?()=>pn:K((e,n)=>{let r=0;e.subscribe(ce(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function f_(...t){const e=wi(t);return K((n,r)=>{(e?Jw(t,n,e):Jw(t,n)).subscribe(r)})}function Is(t,e){return K((n,r)=>{let i=0;n.subscribe(ce(r,s=>t.call(e,s,i++)&&r.next(s)))})}function p_(t){return K((e,n)=>{let r=!1;e.subscribe(ce(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function cx(t=V3){return K((e,n)=>{let r=!1;e.subscribe(ce(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function V3(){return new h_}function ia(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Is((i,s)=>t(i,s,r)):fn,_l(1),n?p_(e):cx(()=>new h_))}function Qh(t,e){return D(e)?Ct(t,e,1):Ct(t,1)}function pr(t,e,n){const r=D(t)||e||n?{next:t,error:e,complete:n}:t;return r?K((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(ce(s,u=>{var l;null===(l=r.next)||void 0===l||l.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,u),s.error(u)},()=>{var u,l;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):fn}function Iu(t){return K((e,n)=>{let s,r=null,i=!1;r=e.subscribe(ce(n,void 0,void 0,o=>{s=ht(t(o,Iu(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function g_(t,e){return K(function F3(t,e,n,r,i){return(s,o)=>{let a=n,u=e,l=0;s.subscribe(ce(o,h=>{const g=l++;u=a?t(u,h,g):(a=!0,h),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}(t,e,arguments.length>=2,!0))}function eD(t){return t<=0?()=>pn:K((e,n)=>{let r=[];e.subscribe(ce(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function tD(t){return K((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const Ke="primary",Yh=Symbol("RouteTitle");class j3{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function yl(t){return new j3(t)}function $3(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function js(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!lx(t[i],e[i]))return!1;return!0}function lx(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}return t===e}function dx(t){return t.length>0?t[t.length-1]:null}function sa(t){return function A3(t){return!!t&&(t instanceof qe||D(t.lift)&&D(t.subscribe))}(t)?t:xh(t)?I(Promise.resolve(t)):A(t)}const z3={exact:function px(t,e,n){if(!Eu(t.segments,e.segments)||!m_(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!px(t.children[r],e.children[r],n))return!1;return!0},subset:gx},hx={exact:function G3(t,e){return js(t,e)},subset:function W3(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>lx(t[n],e[n]))},ignored:()=>!0};function fx(t,e,n){return z3[n.paths](t.root,e.root,n.matrixParams)&&hx[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function gx(t,e,n){return mx(t,e,e.segments,n)}function mx(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!Eu(i,n)||e.hasChildren()||!m_(i,n,r))}if(t.segments.length===n.length){if(!Eu(t.segments,n)||!m_(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!gx(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!(Eu(t.segments,i)&&m_(t.segments,i,r)&&t.children[Ke])&&mx(t.children[Ke],e,s,r)}}function m_(t,e,n){return e.every((r,i)=>hx[n](t[i].parameters,r.parameters))}class vl{constructor(e=new xt([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=yl(this.queryParams)),this._queryParamMap}toString(){return K3.serialize(this)}}class xt{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return __(this)}}class Jh{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=yl(this.parameters)),this._parameterMap}toString(){return vx(this)}}function Eu(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let Xh=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Me({token:t,factory:function(){return new nD},providedIn:"root"})}return t})();class nD{parse(e){const n=new o9(e);return new vl(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${ef(e.root,!0)}`,r=function J3(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(i=>`${y_(n)}=${y_(i)}`).join("&"):`${y_(n)}=${y_(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function Q3(t){return encodeURI(t)}(e.fragment)}`:""}`}}const K3=new nD;function __(t){return t.segments.map(e=>vx(e)).join("/")}function ef(t,e){if(!t.hasChildren())return __(t);if(e){const n=t.children[Ke]?ef(t.children[Ke],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==Ke&&r.push(`${i}:${ef(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function Z3(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Ke&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Ke&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===Ke?[ef(t.children[Ke],!1)]:[`${i}:${ef(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[Ke]?`${__(t)}/${n[0]}`:`${__(t)}/(${n.join("//")})`}}function _x(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function y_(t){return _x(t).replace(/%3B/gi,";")}function rD(t){return _x(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function v_(t){return decodeURIComponent(t)}function yx(t){return v_(t.replace(/\+/g,"%20"))}function vx(t){return`${rD(t.path)}${function Y3(t){return Object.keys(t).map(e=>`;${rD(e)}=${rD(t[e])}`).join("")}(t.parameters)}`}const X3=/^[^\/()?;#]+/;function iD(t){const e=t.match(X3);return e?e[0]:""}const e9=/^[^\/()?;=#]+/,n9=/^[^=?&#]+/,i9=/^[^&#]+/;class o9{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new xt([],{}):new xt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Ke]=new xt(e,n)),r}parseSegment(){const e=iD(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new z(4009,!1);return this.capture(e),new Jh(v_(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function t9(t){const e=t.match(e9);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=iD(this.remaining);i&&(r=i,this.capture(r))}e[v_(n)]=v_(r)}parseQueryParam(e){const n=function r9(t){const e=t.match(n9);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=function s9(t){const e=t.match(i9);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=yx(n),s=yx(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=iD(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new z(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Ke);const o=this.parseChildren();n[s]=1===Object.keys(o).length?o[Ke]:new xt([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new z(4011,!1)}}function Ix(t){return t.segments.length>0?new xt([],{[Ke]:t}):t}function Ex(t){const e={};for(const r of Object.keys(t.children)){const s=Ex(t.children[r]);if(r===Ke&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function a9(t){if(1===t.numberOfChildren&&t.children[Ke]){const e=t.children[Ke];return new xt(t.segments.concat(e.segments),e.children)}return t}(new xt(t.segments,e))}function wu(t){return t instanceof vl}function wx(t){let e;const i=Ix(function n(s){const o={};for(const u of s.children){const l=n(u);o[u.outlet]=l}const a=new xt(s.url,o);return s===t&&(e=a),a}(t.root));return e??i}function Dx(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return sD(i,i,i,n,r);const s=function c9(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Tx(!0,0,t);let e=0,n=!1;const r=t.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([u,l])=>{a[u]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new Tx(n,e,r)}(e);if(s.toRoot())return sD(i,i,new xt([],{}),n,r);const o=function l9(t,e,n){if(t.isAbsolute)return new E_(e,!0,0);if(!n)return new E_(e,!1,NaN);if(null===n.parent)return new E_(n,!0,0);const r=I_(t.commands[0])?0:1;return function d9(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new z(4005,!1);i=r.segments.length}return new E_(r,!1,i-s)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(s,i,t),a=o.processChildren?nf(o.segmentGroup,o.index,s.commands):Ax(o.segmentGroup,o.index,s.commands);return sD(i,o.segmentGroup,a,n,r)}function I_(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function tf(t){return"object"==typeof t&&null!=t&&t.outlets}function sD(t,e,n,r,i){let o,s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`}),o=t===e?n:Cx(t,e,n);const a=Ix(Ex(o));return new vl(a,s,i)}function Cx(t,e,n){const r={};return Object.entries(t.children).forEach(([i,s])=>{r[i]=s===e?n:Cx(s,e,n)}),new xt(t.segments,r)}class Tx{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&I_(r[0]))throw new z(4003,!1);const i=r.find(tf);if(i&&i!==dx(r))throw new z(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class E_{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function Ax(t,e,n){if(t||(t=new xt([],{})),0===t.segments.length&&t.hasChildren())return nf(t,e,n);const r=function f9(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const o=t.segments[i],a=n[r];if(tf(a))break;const u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&l&&"object"==typeof l&&void 0===l.outlets){if(!Sx(u,l,o))return s;r+=2}else{if(!Sx(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const s=new xt(t.segments.slice(0,r.pathIndex),{});return s.children[Ke]=new xt(t.segments.slice(r.pathIndex),t.children),nf(s,0,i)}return r.match&&0===i.length?new xt(t.segments,{}):r.match&&!t.hasChildren()?oD(t,e,n):r.match?nf(t,0,i):oD(t,e,n)}function nf(t,e,n){if(0===n.length)return new xt(t.segments,{});{const r=function h9(t){return tf(t[0])?t[0].outlets:{[Ke]:t}}(n),i={};if(Object.keys(r).some(s=>s!==Ke)&&t.children[Ke]&&1===t.numberOfChildren&&0===t.children[Ke].segments.length){const s=nf(t.children[Ke],e,n);return new xt(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=Ax(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new xt(t.segments,i)}}function oD(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(tf(s)){const u=p9(s.outlets);return new xt(r,u)}if(0===i&&I_(n[0])){r.push(new Jh(t.segments[e].path,bx(n[0]))),i++;continue}const o=tf(s)?s.outlets[Ke]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&I_(a)?(r.push(new Jh(o,bx(a))),i+=2):(r.push(new Jh(o,{})),i++)}return new xt(r,{})}function p9(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=oD(new xt([],{}),0,r))}),e}function bx(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function Sx(t,e,n){return t==n.path&&js(e,n.parameters)}const rf="imperative";class $s{constructor(e,n){this.id=e,this.url=n}}class w_ extends $s{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class oa extends $s{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class sf extends $s{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Il extends $s{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}}class D_ extends $s{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Rx extends $s{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class g9 extends $s{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class m9 extends $s{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class _9 extends $s{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class y9 extends $s{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class v9{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class I9{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class E9{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class w9{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class D9{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class C9{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Px{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class aD{}class uD{constructor(e){this.url=e}}class T9{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new af,this.attachRef=null}}let af=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new T9,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class Mx{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=cD(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=cD(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=lD(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return lD(e,this._root).map(n=>n.value)}}function cD(t,e){if(t===e.value)return e;for(const n of e.children){const r=cD(t,n);if(r)return r}return null}function lD(t,e){if(t===e.value)return[e];for(const n of e.children){const r=lD(t,n);if(r.length)return r.unshift(e),r}return[]}class To{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function El(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class Nx extends Mx{constructor(e,n){super(e),this.snapshot=n,dD(this,e)}toString(){return this.snapshot.toString()}}function xx(t,e){const n=function A9(t,e){const o=new C_([],{},{},"",{},Ke,e,null,{});return new kx("",new To(o,[]))}(0,e),r=new v([new Jh("",{})]),i=new v({}),s=new v({}),o=new v({}),a=new v(""),u=new wl(r,i,o,a,s,Ke,e,n.root);return u.snapshot=n.root,new Nx(new To(u,[]),n)}class wl{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(me(l=>l[Yh]))??A(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(me(e=>yl(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(me(e=>yl(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ox(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const i=n[r],s=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function b9(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class C_{get title(){return this.data?.[Yh]}constructor(e,n,r,i,s,o,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=yl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=yl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class kx extends Mx{constructor(e,n){super(n),this.url=e,dD(this,n)}toString(){return Vx(this._root)}}function dD(t,e){e.value._routerState=t,e.children.forEach(n=>dD(t,n))}function Vx(t){const e=t.children.length>0?` { ${t.children.map(Vx).join(", ")} } `:"";return`${t.value}${e}`}function hD(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,js(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),js(e.params,n.params)||t.paramsSubject.next(n.params),function H3(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!js(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),js(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function fD(t,e){const n=js(t.params,e.params)&&function q3(t,e){return Eu(t,e)&&t.every((n,r)=>js(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||fD(t.parent,e.parent))}let pD=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ke,this.activateEvents=new In,this.deactivateEvents=new In,this.attachEvents=new In,this.detachEvents=new In,this.parentContexts=we(af),this.location=we(_s),this.changeDetector=we(qm),this.environmentInjector=we(ts),this.inputBinder=we(T_,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new z(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new z(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new z(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new z(4013,!1);this._activatedRoute=n;const i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new S9(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=Oe({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ui]})}return t})();class S9{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===wl?this.route:e===af?this.childContexts:this.parent.get(e,n)}}const T_=new ae("");let Fx=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,i=Yw([r.queryParams,r.params,r.data]).pipe(Ie(([s,o,a],u)=>(a={...s,...o,...a},0===u?A(a):Promise.resolve(a)))).subscribe(s=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const o=function eW(t){const e=at(t);if(!e)return null;const n=new Sh(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)n.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,i)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Me({token:t,factory:t.\u0275fac})}return t})();function uf(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function P9(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return uf(t,r,i);return uf(t,r)})}(t,e,n);return new To(r,i)}{if(t.shouldAttach(e.value)){const s=t.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>uf(t,a)),o}}const r=function M9(t){return new wl(new v(t.url),new v(t.params),new v(t.queryParams),new v(t.fragment),new v(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(s=>uf(t,s));return new To(r,i)}}const gD="ngNavigationCancelingError";function Lx(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=wu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Ux(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function Ux(t,e,n){const r=new Error("NavigationCancelingError: "+(t||""));return r[gD]=!0,r.cancellationCode=e,n&&(r.url=n),r}function Bx(t){return t&&t[gD]}let jx=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=hs({type:t,selectors:[["ng-component"]],standalone:!0,features:[UP],decls:1,vars:0,template:function(r,i){1&r&&Ls(0,"router-outlet")},dependencies:[pD],encapsulation:2})}return t})();function mD(t){const e=t.children&&t.children.map(mD),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Ke&&(n.component=jx),n}function Es(t){return t.outlet||Ke}function cf(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class U9{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),hD(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=El(n);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=El(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=El(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=El(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new C9(s.value.snapshot))}),e.children.length&&this.forwardEvent(new w9(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(hD(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),hD(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=cf(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class $x{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class A_{constructor(e,n){this.component=e,this.route=n}}function B9(t,e,n){const r=t._root;return lf(r,e?e._root:null,n,[r.value])}function Dl(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function Lp(t){return null!==Ju(t)}(t)?e.get(t):t:r}function lf(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=El(e);return t.children.forEach(o=>{(function $9(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function H9(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Eu(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Eu(t.url,e.url)||!js(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!fD(t,e)||!js(t.queryParams,e.queryParams);default:return!fD(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new $x(r)):(s.data=o.data,s._resolvedData=o._resolvedData),lf(t,e,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new A_(a.outlet.component,o))}else o&&df(e,a,i),i.canActivateChecks.push(new $x(r)),lf(t,null,s.component?a?a.children:null:n,r,i)})(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>df(a,n.getContext(o),i)),i}function df(t,e,n){const r=El(t),i=t.value;Object.entries(r).forEach(([s,o])=>{df(o,i.component?e?e.children.getContext(s):null:e,n)}),n.canDeactivateChecks.push(new A_(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function hf(t){return"function"==typeof t}function Hx(t){return t instanceof h_||"EmptyError"===t?.name}const b_=Symbol("INITIAL_VALUE");function Cl(){return Ie(t=>Yw(t.map(e=>e.pipe(_l(1),f_(b_)))).pipe(me(e=>{for(const n of e)if(!0!==n){if(n===b_)return b_;if(!1===n||n instanceof vl)return n}return!0}),Is(e=>e!==b_),_l(1)))}function zx(t){return function _i(...t){return yi(t)}(pr(e=>{if(wu(e))throw Lx(0,e)}),me(e=>!0===e))}class S_{constructor(e){this.segmentGroup=e||null}}class Gx{constructor(e){this.urlTree=e}}function Tl(t){return Kh(new S_(t))}function Wx(t){return Kh(new Gx(t))}class c6{constructor(e,n){this.urlSerializer=e,this.urlTree=n}noMatchError(e){return new z(4002,!1)}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return A(r);if(i.numberOfChildren>1||!i.children[Ke])return Kh(new z(4e3,!1));i=i.children[Ke]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreateUrlTree(e,n,r,i){const s=this.createSegmentGroup(e,n.root,r,i);return new vl(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){const s=this.createSegments(e,n.segments,r,i);let o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new xt(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new z(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const _D={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function l6(t,e,n,r,i){const s=yD(t,e,n);return s.matched?(r=function x9(t,e){return t.providers&&!t._injector&&(t._injector=ZE(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function o6(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?A(i.map(o=>{const a=Dl(o,t);return sa(function K9(t){return t&&hf(t.canMatch)}(a)?a.canMatch(e,n):t.runInContext(()=>a(e,n)))})).pipe(Cl(),zx()):A(!0)}(r,e,n).pipe(me(o=>!0===o?s:{..._D}))):A(s)}function yD(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{..._D}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||$3)(n,t,e);if(!i)return{..._D};const s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function qx(t,e,n,r){return n.length>0&&function f6(t,e,n){return n.some(r=>R_(t,e,r)&&Es(r)!==Ke)}(t,n,r)?{segmentGroup:new xt(e,h6(r,new xt(n,t.children))),slicedSegments:[]}:0===n.length&&function p6(t,e,n){return n.some(r=>R_(t,e,r))}(t,n,r)?{segmentGroup:new xt(t.segments,d6(t,0,n,r,t.children)),slicedSegments:n}:{segmentGroup:new xt(t.segments,t.children),slicedSegments:n}}function d6(t,e,n,r,i){const s={};for(const o of r)if(R_(t,n,o)&&!i[Es(o)]){const a=new xt([],{});s[Es(o)]=a}return{...i,...s}}function h6(t,e){const n={};n[Ke]=e;for(const r of t)if(""===r.path&&Es(r)!==Ke){const i=new xt([],{});n[Es(r)]=i}return n}function R_(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class y6{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new c6(this.urlSerializer,this.urlTree)}noMatchError(e){return new z(4002,!1)}recognize(){const e=qx(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Ke).pipe(Iu(n=>{if(n instanceof Gx)return this.allowRedirects=!1,this.urlTree=n.urlTree,this.match(n.urlTree);throw n instanceof S_?this.noMatchError(n):n}),me(n=>{const r=new C_([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ke,this.rootComponentType,null,{}),i=new To(r,n),s=new kx("",i),o=function u9(t,e,n=null,r=null){return Dx(wx(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Ke).pipe(Iu(r=>{throw r instanceof S_?this.noMatchError(r):r}))}inheritParamsAndData(e){const n=e.value,r=Ox(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0)}processChildren(e,n,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return I(i).pipe(Qh(s=>{const o=r.children[s],a=function F9(t,e){const n=t.filter(r=>Es(r)===e);return n.push(...t.filter(r=>Es(r)!==e)),n}(n,s);return this.processSegmentGroup(e,a,o,s)}),g_((s,o)=>(s.push(...o),s)),p_(null),function L3(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Is((i,s)=>t(i,s,r)):fn,eD(1),n?p_(e):cx(()=>new h_))}(),Ct(s=>{if(null===s)return Tl(r);const o=Zx(s);return function v6(t){t.sort((e,n)=>e.value.outlet===Ke?-1:n.value.outlet===Ke?1:e.value.outlet.localeCompare(n.value.outlet))}(o),A(o)}))}processSegment(e,n,r,i,s,o){return I(n).pipe(Qh(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(Iu(u=>{if(u instanceof S_)return A(null);throw u}))),ia(a=>!!a),Iu(a=>{if(Hx(a))return function m6(t,e,n){return 0===e.length&&!t.children[n]}(r,i,s)?A([]):Tl(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return function g6(t,e,n,r){return!!(Es(t)===r||r!==Ke&&R_(e,n,t))&&("**"===t.path||yD(e,t,n).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):Tl(i):Tl(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Wx(s):this.applyRedirects.lineralizeSegments(r,s).pipe(Ct(o=>{const a=new xt(o,{});return this.processSegment(e,n,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){const{matched:a,consumedSegments:u,remainingSegments:l,positionalParamSegments:h}=yD(n,i,s);if(!a)return Tl(n);const g=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,h);return i.redirectTo.startsWith("/")?Wx(g):this.applyRedirects.lineralizeSegments(i,g).pipe(Ct(m=>this.processSegment(e,r,n,m.concat(l),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a;if("**"===r.path){const u=i.length>0?dx(i).parameters:{};a=A({snapshot:new C_(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Kx(r),Es(r),r.component??r._loadedComponent??null,r,Qx(r)),consumedSegments:[],remainingSegments:[]}),n.children={}}else a=l6(n,r,i,e).pipe(me(({matched:u,consumedSegments:l,remainingSegments:h,parameters:g})=>u?{snapshot:new C_(l,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Kx(r),Es(r),r.component??r._loadedComponent??null,r,Qx(r)),consumedSegments:l,remainingSegments:h}:null));return a.pipe(Ie(u=>null===u?Tl(n):this.getChildConfig(e=r._injector??e,r,i).pipe(Ie(({routes:l})=>{const h=r._loadedInjector??e,{snapshot:g,consumedSegments:m,remainingSegments:y}=u,{segmentGroup:C,slicedSegments:S}=qx(n,m,y,l);if(0===S.length&&C.hasChildren())return this.processChildren(h,l,C).pipe(me(V=>null===V?null:[new To(g,V)]));if(0===l.length&&0===S.length)return A([new To(g,[])]);const M=Es(r)===s;return this.processSegment(h,l,C,S,M?Ke:s,!0).pipe(me(V=>[new To(g,V)]))}))))}getChildConfig(e,n,r){return n.children?A({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?A({routes:n._loadedRoutes,injector:n._loadedInjector}):function s6(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?A(!0):A(i.map(o=>{const a=Dl(o,t);return sa(function G9(t){return t&&hf(t.canLoad)}(a)?a.canLoad(e,n):t.runInContext(()=>a(e,n)))})).pipe(Cl(),zx())}(e,n,r).pipe(Ct(i=>i?this.configLoader.loadChildren(e,n).pipe(pr(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):function u6(t){return Kh(Ux(!1,3))}())):A({routes:[],injector:e})}}function I6(t){const e=t.value.routeConfig;return e&&""===e.path}function Zx(t){const e=[],n=new Set;for(const r of t){if(!I6(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=Zx(r.children);e.push(new To(r.value,i))}return e.filter(r=>!n.has(r))}function Kx(t){return t.data||{}}function Qx(t){return t.resolve||{}}function Yx(t){return"string"==typeof t.title||null===t.title}function vD(t){return Ie(e=>{const n=t(e);return n?I(n).pipe(me(()=>e)):A(e)})}const Al=new ae("ROUTES");let ID=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=we(xM)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return A(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=sa(n.loadComponent()).pipe(me(Jx),pr(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),tD(()=>{this.componentLoaders.delete(n)})),i=new ux(r,()=>new H).pipe(Xw());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return A({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function b6(t,e,n,r){return sa(t.loadChildren()).pipe(me(Jx),Ct(i=>i instanceof FP||Array.isArray(i)?A(i):I(e.compileModuleAsync(i))),me(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(n).injector,o=s.get(Al,[],{optional:!0,self:!0}).flat()),{routes:o.map(mD),injector:s}}))}(r,this.compiler,n,this.onLoadEndListener).pipe(tD(()=>{this.childrenLoaders.delete(r)})),o=new ux(s,()=>new H).pipe(Xw());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Jx(t){return function S6(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let P_=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new H,this.transitionAbortSubject=new H,this.configLoader=we(ID),this.environmentInjector=we(ts),this.urlSerializer=we(Xh),this.rootContexts=we(af),this.inputBindingEnabled=null!==we(T_,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>A(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new I9(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new v9(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n,r,i){return this.transitions=new v({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:n.urlHandlingStrategy.extract(r),urlAfterRedirects:n.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:rf,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Is(s=>0!==s.id),me(s=>({...s,extractedUrl:n.urlHandlingStrategy.extract(s.rawUrl)})),Ie(s=>{this.currentTransition=s;let o=!1,a=!1;return A(s).pipe(pr(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ie(u=>{const l=u.currentBrowserUrl.toString(),h=!n.navigated||u.extractedUrl.toString()!==l||l!==u.currentUrlTree.toString();if(!h&&"reload"!==(u.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const m="";return this.events.next(new Il(u.id,this.urlSerializer.serialize(u.rawUrl),m,0)),u.resolve(null),pn}if(n.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return A(u).pipe(Ie(m=>{const y=this.transitions?.getValue();return this.events.next(new w_(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),y!==this.transitions?.getValue()?pn:Promise.resolve(m)}),function E6(t,e,n,r,i,s){return Ct(o=>function _6(t,e,n,r,i,s,o="emptyOnly"){return new y6(t,e,n,r,i,o,s).recognize()}(t,e,n,r,o.extractedUrl,i,s).pipe(me(({state:a,tree:u})=>({...o,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),pr(m=>{s.targetSnapshot=m.targetSnapshot,s.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:m.urlAfterRedirects};const y=new Rx(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(y)}));if(h&&n.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:m,extractedUrl:y,source:C,restoredState:S,extras:M}=u,V=new w_(m,this.urlSerializer.serialize(y),C,S);this.events.next(V);const x=xx(0,this.rootComponentType).snapshot;return this.currentTransition=s={...u,targetSnapshot:x,urlAfterRedirects:y,extras:{...M,skipLocationChange:!1,replaceUrl:!1}},A(s)}{const m="";return this.events.next(new Il(u.id,this.urlSerializer.serialize(u.extractedUrl),m,1)),u.resolve(null),pn}}),pr(u=>{const l=new g9(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),me(u=>(this.currentTransition=s={...u,guards:B9(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},s)),function Y9(t,e){return Ct(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?A({...n,guardsResult:!0}):function J9(t,e,n,r){return I(t).pipe(Ct(i=>function i6(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?A(s.map(a=>{const u=cf(e)??i,l=Dl(a,u);return sa(function Z9(t){return t&&hf(t.canDeactivate)}(l)?l.canDeactivate(t,e,n,r):u.runInContext(()=>l(t,e,n,r))).pipe(ia())})).pipe(Cl()):A(!0)}(i.component,i.route,n,e,r)),ia(i=>!0!==i,!0))}(o,r,i,t).pipe(Ct(a=>a&&function z9(t){return"boolean"==typeof t}(a)?function X9(t,e,n,r){return I(e).pipe(Qh(i=>Jw(function t6(t,e){return null!==t&&e&&e(new E9(t)),A(!0)}(i.route.parent,r),function e6(t,e){return null!==t&&e&&e(new D9(t)),A(!0)}(i.route,r),function r6(t,e,n){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function j9(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(o)).filter(o=>null!==o).map(o=>ax(()=>A(o.guards.map(u=>{const l=cf(o.node)??n,h=Dl(u,l);return sa(function q9(t){return t&&hf(t.canActivateChild)}(h)?h.canActivateChild(r,t):l.runInContext(()=>h(r,t))).pipe(ia())})).pipe(Cl())));return A(s).pipe(Cl())}(t,i.path,n),function n6(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return A(!0);const i=r.map(s=>ax(()=>{const o=cf(e)??n,a=Dl(s,o);return sa(function W9(t){return t&&hf(t.canActivate)}(a)?a.canActivate(e,t):o.runInContext(()=>a(e,t))).pipe(ia())}));return A(i).pipe(Cl())}(t,i.route,n))),ia(i=>!0!==i,!0))}(r,s,t,e):A(a)),me(a=>({...n,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),pr(u=>{if(s.guardsResult=u.guardsResult,wu(u.guardsResult))throw Lx(0,u.guardsResult);const l=new m9(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),Is(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),vD(u=>{if(u.guards.canActivateChecks.length)return A(u).pipe(pr(l=>{const h=new _9(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Ie(l=>{let h=!1;return A(l).pipe(function w6(t,e){return Ct(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return A(n);let s=0;return I(i).pipe(Qh(o=>function D6(t,e,n,r){const i=t.routeConfig,s=t._resolve;return void 0!==i?.title&&!Yx(i)&&(s[Yh]=i.title),function C6(t,e,n,r){const i=function T6(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===i.length)return A({});const s={};return I(i).pipe(Ct(o=>function A6(t,e,n,r){const i=cf(e)??r,s=Dl(t,i);return sa(s.resolve?s.resolve(e,n):i.runInContext(()=>s(e,n)))}(t[o],e,n,r).pipe(ia(),pr(a=>{s[o]=a}))),eD(1),function U3(t){return me(()=>t)}(s),Iu(o=>Hx(o)?pn:Kh(o)))}(s,t,e,r).pipe(me(o=>(t._resolvedData=o,t.data=Ox(t,n).resolve,i&&Yx(i)&&(t.data[Yh]=i.title),null)))}(o.route,r,t,e)),pr(()=>s++),eD(1),Ct(o=>s===i.length?A(n):pn))})}(n.paramsInheritanceStrategy,this.environmentInjector),pr({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",2)}}))}),pr(l=>{const h=new y9(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),vD(u=>{const l=h=>{const g=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(h.routeConfig).pipe(pr(m=>{h.component=m}),me(()=>{})));for(const m of h.children)g.push(...l(m));return g};return Yw(l(u.targetSnapshot.root)).pipe(p_(),_l(1))}),vD(()=>this.afterPreactivation()),me(u=>{const l=function R9(t,e,n){const r=uf(t,e._root,n?n._root:void 0);return new Nx(r,e)}(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s={...u,targetRouterState:l},s}),pr(()=>{this.events.next(new aD)}),((t,e,n,r)=>me(i=>(new U9(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),_l(1),pr({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new oa(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),n.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),function B3(t){return K((e,n)=>{ht(t).subscribe(ce(n,()=>n.complete(),De)),!n.closed&&e.subscribe(n)})}(this.transitionAbortSubject.pipe(pr(u=>{throw u}))),tD(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Iu(u=>{if(a=!0,Bx(u))this.events.next(new sf(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),function N9(t){return Bx(t)&&wu(t.url)}(u)?this.events.next(new uD(u.url)):s.resolve(!1);else{this.events.next(new D_(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(n.errorHandler(u))}catch(l){s.reject(l)}}return pn}))}))}cancelNavigationTransition(n,r,i){const s=new sf(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Xx(t){return t!==rf}let e1=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Ke);return r}getResolvedTitleForRoute(n){return n.data[Yh]}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Me({token:t,factory:function(){return we(R6)},providedIn:"root"})}return t})(),R6=(()=>{class t extends e1{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||t)(oe(XN))};static#t=this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),P6=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Me({token:t,factory:function(){return we(N6)},providedIn:"root"})}return t})();class M6{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let N6=(()=>{class t extends M6{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=Nn(t)))(i||t)}}();static#t=this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const M_=new ae("",{providedIn:"root",factory:()=>({})});let x6=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Me({token:t,factory:function(){return we(O6)},providedIn:"root"})}return t})(),O6=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var ff=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(ff||{});function t1(t,e){t.events.pipe(Is(n=>n instanceof oa||n instanceof sf||n instanceof D_||n instanceof Il),me(n=>n instanceof oa||n instanceof Il?ff.COMPLETE:n instanceof sf&&(0===n.code||1===n.code)?ff.REDIRECTING:ff.FAILED),Is(n=>n!==ff.REDIRECTING),_l(1)).subscribe(()=>{e()})}function k6(t){throw t}function V6(t,e,n){return e.parse("/")}const F6={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},L6={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let xi=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=we(MM),this.isNgZoneEnabled=!1,this._events=new H,this.options=we(M_,{optional:!0})||{},this.pendingTasks=we(NM),this.errorHandler=this.options.errorHandler||k6,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||V6,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=we(x6),this.routeReuseStrategy=we(P6),this.titleStrategy=we(e1),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=we(Al,{optional:!0})?.flat()??[],this.navigationTransitions=we(P_),this.urlSerializer=we(Xh),this.location=we(Aw),this.componentInputBindingEnabled=!!we(T_,{optional:!0}),this.eventsSubscription=new _t,this.isNgZoneEnabled=we(Et)instanceof Et&&Et.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new vl,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=xx(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(n1(r)&&this._events.next(r));if(r instanceof w_)Xx(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof Il)this.rawUrlTree=i.rawUrl;else if(r instanceof Rx){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof aD)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof sf)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof uD){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Xx(i.source)};this.scheduleNavigation(s,rf,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof D_&&this.restoreHistory(i,!0),r instanceof oa&&(this.navigated=!0),n1(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),rf,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(mD),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:o;let g,h=null;switch(a){case"merge":h={...this.currentUrlTree.queryParams,...s};break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}null!==h&&(h=this.removeEmptyProps(h));try{g=wx(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||!n[0].startsWith("/"))&&(n=[]),g=this.currentUrlTree.root}return Dx(g,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=wu(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,rf,null,r)}navigate(n,r={skipLocationChange:!1}){return function U6(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new z(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...F6}:!1===r?{...L6}:r,wu(n))return fx(this.currentUrlTree,n,i);const s=this.parseUrl(n);return fx(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const s=n[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,l;o?(a=o.resolve,u=o.reject,l=o.promise):l=new Promise((g,m)=>{a=g,u=m});const h=this.pendingTasks.add();return t1(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:n,extras:s,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(g=>Promise.reject(g))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function n1(t){return!(t instanceof aD||t instanceof uD)}class r1{}let $6=(()=>{class t{constructor(n,r,i,s,o){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Is(n=>n instanceof oa),Qh(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=ZE(s.providers,n,`Route: ${s.path}`));const o=s._injector??n,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return I(i).pipe(jr())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):A(null);const s=i.pipe(Ct(o=>null===o?A(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));return r.loadComponent&&!r._loadedComponent?I([s,this.loader.loadComponent(r)]).pipe(jr()):s})}static#e=this.\u0275fac=function(r){return new(r||t)(oe(xi),oe(xM),oe(ts),oe(r1),oe(ID))};static#t=this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const wD=new ae("");let i1=(()=>{class t{constructor(n,r,i,s,o={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof w_?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof oa?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof Il&&0===n.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Px&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Px(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function CS(){throw new Error("invalid")}()};static#t=this.\u0275prov=Me({token:t,factory:t.\u0275fac})}return t})();function Ao(t,e){return{\u0275kind:t,\u0275providers:e}}function o1(){const t=we(br);return e=>{const n=t.get(pl);if(e!==n.components[0])return;const r=t.get(xi),i=t.get(a1);1===t.get(DD)&&r.initialNavigation(),t.get(u1,null,it.Optional)?.setUpPreloading(),t.get(wD,null,it.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const a1=new ae("",{factory:()=>new H}),DD=new ae("",{providedIn:"root",factory:()=>1}),u1=new ae("");function W6(t){return Ao(0,[{provide:u1,useExisting:$6},{provide:r1,useExisting:t}])}const c1=new ae("ROUTER_FORROOT_GUARD"),Z6=[Aw,{provide:Xh,useClass:nD},xi,af,{provide:wl,useFactory:function s1(t){return t.routerState.root},deps:[xi]},ID,[]];function K6(){return new BM("Router",xi)}let l1=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[Z6,[],{provide:Al,multi:!0,useValue:n},{provide:c1,useFactory:X6,deps:[[xi,new li,new Zg]]},{provide:M_,useValue:r||{}},r?.useHash?{provide:vu,useClass:sW}:{provide:vu,useClass:_N},{provide:wD,useFactory:()=>{const t=we(Tq),e=we(Et),n=we(M_),r=we(P_),i=we(Xh);return n.scrollOffset&&t.setOffset(n.scrollOffset),new i1(i,r,t,e,n)}},r?.preloadingStrategy?W6(r.preloadingStrategy).\u0275providers:[],{provide:BM,multi:!0,useFactory:K6},r?.initialNavigation?e5(r):[],r?.bindToComponentInputs?Ao(8,[Fx,{provide:T_,useExisting:Fx}]).\u0275providers:[],[{provide:d1,useFactory:o1},{provide:mw,multi:!0,useExisting:d1}]]}}static forChild(n){return{ngModule:t,providers:[{provide:Al,multi:!0,useValue:n}]}}static#e=this.\u0275fac=function(r){return new(r||t)(oe(c1,8))};static#t=this.\u0275mod=lr({type:t});static#n=this.\u0275inj=Er({})}return t})();function X6(t){return"guarded"}function e5(t){return["disabled"===t.initialNavigation?Ao(3,[{provide:uw,multi:!0,useFactory:()=>{const e=we(xi);return()=>{e.setUpLocationChangeListener()}}},{provide:DD,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?Ao(2,[{provide:DD,useValue:0},{provide:uw,multi:!0,deps:[br],useFactory:e=>{const n=e.get(rW,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=e.get(xi),s=e.get(a1);t1(i,()=>{r(!0)}),e.get(P_).afterPreactivation=()=>(r(!0),s.closed?A(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const d1=new ae("");xe(365);var Rr=xe(534);(0,Rr.registerVersion)("firebase","10.8.0","app");class i5 extends _t{constructor(e,n){super()}schedule(e,n=0){return this}}const N_={setInterval(t,e,...n){const{delegate:r}=N_;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=N_;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class h1 extends i5{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return N_.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&N_.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ce(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const CD={now:()=>(CD.delegate||Date).now(),delegate:void 0};class pf{constructor(e,n=pf.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}pf.now=CD.now;class f1 extends pf{constructor(e,n=pf.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const a5=new class o5 extends f1{}(class s5 extends h1{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),p1=new f1(h1),x_=new Zc("ANGULARFIRE2_VERSION");function g1(t,e,n){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===n);if(1===s.length)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}const TD=(t,e)=>{const n=e?[e]:(0,Rr.getApps)(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};class O_{constructor(){return TD(u5)}}const u5="app-check";function bl(){}class m1{zone;delegate;constructor(e,n=a5){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},n,r)}}class c5{zone;task=null;constructor(e){this.zone=e}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",bl,{},bl,bl)),n.pipe(pr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let gf=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new m1(Zone.current)),this.insideAngular=n.run(()=>new m1(Zone.current,p1)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(oe(Et))};static \u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Sl(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}function Du(t){return Sl().ngZone.run(()=>t())}function Oi(t){return function d5(t){return function(n){return(n=n.lift(new c5(t.ngZone))).pipe(Yn(t.outsideAngular),yn(t.insideAngular))}}(Sl())(t)}const h5=(t,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),Du(()=>t.apply(void 0,r))},AD=(t,e)=>function(){let n;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(n||=Du(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",bl,{},bl,bl))),r[s]=h5(r[s],n));const i=function l5(t){return Sl().ngZone.runOutsideAngular(()=>t())}(()=>t.apply(this,r));if(!e){if(i instanceof qe){const s=Sl();return i.pipe(Yn(s.outsideAngular),yn(s.insideAngular))}return Du(()=>i)}return i instanceof qe?i.pipe(Oi):i instanceof Promise?Du(()=>new Promise((s,o)=>i.then(a=>Du(()=>s(a)),a=>Du(()=>o(a))))):"function"==typeof i&&n?function(){return setTimeout(()=>{n&&"scheduled"===n.state&&n.invoke()},10),i.apply(this,arguments)}:Du(()=>i)};var k_=xe(106);k_.Z.registerVersion("firebase","10.8.0","app-compat");const g5=["ngOnDestroy"];class _1{constructor(e){return e}}const V_=new ae("angularfire2.app.options"),bD=new ae("angularfire2.app.name");function SD(t,e,n){const i="object"==typeof n&&n||{};i.name=i.name||"string"==typeof n&&n||"[DEFAULT]";const o=k_.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>k_.Z.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(o.options)){const a=!!module.hot;y5("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new _1(o)}const y5=(t,...e)=>{};function y1(t,e,n,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(s)return function v5(t,e){try{return t.toString()===e.toString()}catch{return t===e}}(i,o)||(v1("error",`${e} was already initialized on the ${n} Firebase App with different settings.${I5?" You may need to reload as Firebase is not HMR aware.":""}`),v1("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}const I5=typeof module<"u"&&!!module.hot,v1=(t,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[];class E5 extends H{constructor(e=1/0,n=1/0,r=CD){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;n||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=n.now();let a=0;for(let u=1;u<r.length&&r[u]<=o;u+=2)a=u;a&&r.splice(0,a+1)}}}function I1(t,e,n){let r,i=!1;return t&&"object"==typeof t?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t):r=t??1/0,W({connector:()=>new E5(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function E1(t,e){return D(e)?Ie(()=>t,e):Ie(()=>t)}const w1=new ae("angularfire2.auth.use-emulator"),D1=new ae("angularfire2.auth.settings"),C1=new ae("angularfire2.auth.tenant-id"),T1=new ae("angularfire2.auth.langugage-code"),A1=new ae("angularfire2.auth.use-device-language"),b1=new ae("angularfire.auth.persistence"),S1=(t,e,n,r,i,s,o,a)=>y1(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{const u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(const[l,h]of Object.entries(o))u.settings[l]=h;return a&&u.setPersistence(a),u},[n,r,i,s,o,a]);let RD=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,s,o,a,u,l,h,g,m,y){const C=new H,S=A(void 0).pipe(yn(o.outsideAngular),Ie(()=>s.runOutsideAngular(()=>Promise.resolve().then(xe.bind(xe,365)))),me(()=>SD(n,s,r)),me(M=>S1(M,s,a,l,h,g,u,m)),I1({bufferSize:1,refCount:!1}));if(u_(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=A(null);else{S.pipe(ia()).subscribe();const M=S.pipe(Ie($=>$.getRedirectResult().then(re=>re,()=>null)),Oi,I1({bufferSize:1,refCount:!1})),V=S.pipe(Ie($=>new qe(re=>({unsubscribe:s.runOutsideAngular(()=>$.onAuthStateChanged(de=>re.next(de),de=>re.error(de),()=>re.complete()))})))),x=S.pipe(Ie($=>new qe(re=>({unsubscribe:s.runOutsideAngular(()=>$.onIdTokenChanged(de=>re.next(de),de=>re.error(de),()=>re.complete()))}))));this.authState=M.pipe(E1(V),Yn(o.outsideAngular),yn(o.insideAngular)),this.user=M.pipe(E1(x),Yn(o.outsideAngular),yn(o.insideAngular)),this.idToken=this.user.pipe(Ie($=>$?I($.getIdToken()):A(null))),this.idTokenResult=this.user.pipe(Ie($=>$?I($.getIdTokenResult()):A(null))),this.credential=w(M,C,this.authState.pipe(Is($=>!$))).pipe(me($=>$?.user?$:null),Yn(o.outsideAngular),yn(o.insideAngular))}return((t,e,n,r={})=>new Proxy(t,{get:(i,s)=>n.runOutsideAngular(()=>{if(t[s])return r?.spy?.get&&r.spy.get(s,t[s]),t[s];if(g5.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const u=a?.[s];return"function"==typeof u?u.bind(a):u?.then?u.then(l=>n.run(()=>l)):n.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>o[u],apply:(a,u,l)=>o.then(h=>{const g=h?.(...l);return r?.spy?.apply&&r.spy.apply(s,l,g),g})})})}))(this,S,s,{spy:{apply:(M,V,x)=>{(M.startsWith("signIn")||M.startsWith("createUser"))&&x.then($=>C.next($))}}})}static \u0275fac=function(r){return new(r||t)(oe(V_),oe(bD,8),oe(go),oe(Et),oe(gf),oe(w1,8),oe(D1,8),oe(C1,8),oe(T1,8),oe(A1,8),oe(b1,8),oe(O_,8))};static \u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),PD=(()=>{class t{constructor(n,r){this.firebaseauth=n,this.router=r}login(n,r){this.firebaseauth.signInWithEmailAndPassword(n,r).then(i=>{localStorage.setItem("token","true"),this.router.navigate(["/dashboard"])},i=>{alert(i.message),this.router.navigate(["/login"])})}register(n,r){this.firebaseauth.createUserWithEmailAndPassword(n,r).then(i=>{alert("Registration Successfull!!"),this.router.navigate(["/login"]),this.sendEmailForVerification(i.user)},i=>{alert(i.message),this.router.navigate(["/register"])})}logout(){this.firebaseauth.signOut().then(()=>{localStorage.removeItem("token"),this.router.navigate(["/login"])},n=>{alert(n.message)})}forgotPassword(n){this.firebaseauth.sendPasswordResetEmail(n).then(()=>{this.router.navigate(["/verify-email"])},r=>{alert("Something Went Wrong")})}sendEmailForVerification(n){n.sendEmailVerification().then(r=>{this.router.navigate(["/verify-email"])},r=>{alert("Something Went Wrong!!, Unable To Send Email")})}static#e=this.\u0275fac=function(r){return new(r||t)(oe(RD),oe(xi))};static#t=this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),R1=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static#e=this.\u0275fac=function(r){return new(r||t)(se(mo),se(Pi))};static#t=this.\u0275dir=Oe({type:t})}return t})(),Cu=(()=>{class t extends R1{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=Nn(t)))(i||t)}}();static#t=this.\u0275dir=Oe({type:t,features:[Nt]})}return t})();const Hs=new ae("NgValueAccessor"),T5={provide:Hs,useExisting:k(()=>Rl),multi:!0},b5=new ae("CompositionEventMode");let Rl=(()=>{class t extends R1{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function A5(){const t=na()?na().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static#e=this.\u0275fac=function(r){return new(r||t)(se(mo),se(Pi),se(b5,8))};static#t=this.\u0275dir=Oe({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Pt("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[cn([T5]),Nt]})}return t})();const Pr=new ae("NgValidators"),ua=new ae("NgAsyncValidators");function B1(t){return null!=t}function j1(t){return xh(t)?I(t):t}function $1(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function H1(t,e){return e.map(n=>n(t))}function z1(t){return t.map(e=>function R5(t){return!t.validate}(e)?e:n=>e.validate(n))}function MD(t){return null!=t?function G1(t){if(!t)return null;const e=t.filter(B1);return 0==e.length?null:function(n){return $1(H1(n,e))}}(z1(t)):null}function ND(t){return null!=t?function W1(t){if(!t)return null;const e=t.filter(B1);return 0==e.length?null:function(n){return function D5(...t){const e=zi(t),{args:n,keys:r}=rx(t),i=new qe(s=>{const{length:o}=n;if(!o)return void s.complete();const a=new Array(o);let u=o,l=o;for(let h=0;h<o;h++){let g=!1;ht(n[h]).subscribe(ce(s,m=>{g||(g=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!g)&&(l||s.next(r?sx(r,a):a),s.complete())}))}});return e?i.pipe(ix(e)):i}(H1(n,e).map(j1)).pipe(me($1))}}(z1(t)):null}function q1(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function xD(t){return t?Array.isArray(t)?t:[t]:[]}function L_(t,e){return Array.isArray(t)?t.includes(e):t===e}function Q1(t,e){const n=xD(e);return xD(t).forEach(i=>{L_(n,i)||n.push(i)}),n}function Y1(t,e){return xD(e).filter(n=>!L_(t,n))}class J1{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=MD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ND(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class ei extends J1{get formDirective(){return null}get path(){return null}}class ca extends J1{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class X1{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let U_=(()=>{class t extends X1{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(se(ca,2))};static#t=this.\u0275dir=Oe({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&km("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Nt]})}return t})(),B_=(()=>{class t extends X1{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(se(ei,10))};static#t=this.\u0275dir=Oe({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&km("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Nt]})}return t})();const mf="VALID",$_="INVALID",Pl="PENDING",_f="DISABLED";function VD(t){return(H_(t)?t.validators:t)||null}function FD(t,e){return(H_(e)?e.asyncValidators:t)||null}function H_(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class rO{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===mf}get invalid(){return this.status===$_}get pending(){return this.status==Pl}get disabled(){return this.status===_f}get enabled(){return this.status!==_f}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Q1(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Q1(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Y1(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Y1(e,this._rawAsyncValidators))}hasValidator(e){return L_(this._rawValidators,e)}hasAsyncValidator(e){return L_(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Pl,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=_f,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=mf,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===mf||this.status===Pl)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?_f:mf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Pl,this._hasOwnPendingAsyncValidator=!0;const n=j1(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new In,this.statusChanges=new In}_calculateStatus(){return this._allControlsDisabled()?_f:this.errors?$_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Pl)?Pl:this._anyControlsHaveStatus($_)?$_:mf}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){H_(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function x5(t){return Array.isArray(t)?MD(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function O5(t){return Array.isArray(t)?ND(t):t||null}(this._rawAsyncValidators)}}class LD extends rO{constructor(e,n,r){super(VD(n),FD(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){(function nO(t,e,n){t._forEachChild((r,i)=>{if(void 0===n[i])throw new z(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function tO(t,e,n){const r=t.controls;if(!(e?Object.keys(r):r).length)throw new z(1e3,"");if(!r[n])throw new z(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Ml=new ae("CallSetDisabledState",{providedIn:"root",factory:()=>z_}),z_="always";function yf(t,e,n=z_){UD(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function F5(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&iO(t,e)})}(t,e),function U5(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function L5(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&iO(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function V5(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function q_(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function UD(t,e){const n=function Z1(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(q1(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function K1(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(q1(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();q_(e._rawValidators,i),q_(e._rawAsyncValidators,i)}function iO(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}const z5={provide:ei,useExisting:k(()=>Nl)},vf=(()=>Promise.resolve())();let Nl=(()=>{class t extends ei{constructor(n,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new In,this.form=new LD({},MD(n),ND(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){vf.then(()=>{const r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),yf(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){vf.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){vf.then(()=>{const r=this._findContainer(n.path),i=new LD({});(function sO(t,e){UD(t,e)})(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){vf.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){vf.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submitted=!0,function oO(t,e){t._syncPendingControls(),e.forEach(n=>{const r=n.control;"submit"===r.updateOn&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static#e=this.\u0275fac=function(r){return new(r||t)(se(Pr,10),se(ua,10),se(Ml,8))};static#t=this.\u0275dir=Oe({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&Pt("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[cn([z5]),Nt]})}return t})();function aO(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function uO(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const cO=class extends rO{constructor(e=null,n,r){super(VD(n),FD(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),H_(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=uO(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){aO(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){aO(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){uO(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},q5={provide:ca,useExisting:k(()=>If)},hO=(()=>Promise.resolve())();let If=(()=>{class t extends ca{constructor(n,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new cO,this._registered=!1,this.name="",this.update=new In,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function $D(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===Rl?n=s:function $5(t){return Object.getPrototypeOf(t.constructor)===Cu}(s)?r=s:i=s}),i||r||n||null}(0,s)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function jD(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){yf(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){hO.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,i=0!==r&&function gl(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}(r);hO.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function G_(t,e){return[...e.path,t]}(n,this._parent):[n]}static#e=this.\u0275fac=function(r){return new(r||t)(se(ei,9),se(Pr,10),se(ua,10),se(Hs,10),se(qm,8),se(Ml,8))};static#t=this.\u0275dir=Oe({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[cn([q5]),Nt,ui]})}return t})(),K_=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=Oe({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return t})();const Z5={provide:Hs,useExisting:k(()=>HD),multi:!0};let HD=(()=>{class t extends Cu{writeValue(n){this.setProperty("value",n??"")}registerOnChange(n){this.onChange=r=>{n(""==r?null:parseFloat(r))}}static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=Nn(t)))(i||t)}}();static#t=this.\u0275dir=Oe({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){1&r&&Pt("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},features:[cn([Z5]),Nt]})}return t})(),fO=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=lr({type:t});static#n=this.\u0275inj=Er({})}return t})(),_8=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=lr({type:t});static#n=this.\u0275inj=Er({imports:[fO]})}return t})(),v8=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:Ml,useValue:n.callSetDisabledState??z_}]}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=lr({type:t});static#n=this.\u0275inj=Er({imports:[_8]})}return t})(),I8=(()=>{class t{constructor(n){this.auth=n,this.email="",this.password=""}login(){""!=this.email&&""!=this.password?(this.auth.login(this.email,this.password),this.email="",this.password=""):alert("Please Enter Valid Details")}static#e=this.\u0275fac=function(r){return new(r||t)(se(PD))};static#t=this.\u0275cmp=hs({type:t,selectors:[["app-login"]],decls:27,vars:2,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-4"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-dark","text-muted"],["for","exampleInputEmail1",1,"form-label"],["type","email","name","email",1,"form-control",3,"ngModel","ngModelChange"],["for","exampleInputPassword1",1,"form-label"],["type","password","name","password",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-info",3,"click"],[1,"row"],[1,"col-md-6"],["href","/register",2,"text-decoration","none"],[1,"text-danger"]],template:function(r,i){1&r&&(Pe(0,"div",0)(1,"div",1),Ls(2,"div",2),Pe(3,"div",3)(4,"div",4)(5,"div",5)(6,"form")(7,"div",6)(8,"h4",7),tt(9,"Login"),Ne()(),Pe(10,"div",6)(11,"label",8),tt(12,"Email"),Ne(),Pe(13,"input",9),Pt("ngModelChange",function(o){return i.email=o}),Ne()(),Pe(14,"div",6)(15,"label",10),tt(16,"Password"),Ne(),Pe(17,"input",11),Pt("ngModelChange",function(o){return i.password=o}),Ne()(),Pe(18,"button",12),Pt("click",function(){return i.login()}),tt(19,"Login"),Ne(),Pe(20,"div",13)(21,"div",14)(22,"a",15),tt(23,"No Account ? "),Pe(24,"span",16),tt(25,"Register"),Ne()()()()()()()(),Ls(26,"div",2),Ne()()),2&r&&(Gn(13),rs("ngModel",i.email),Gn(4),rs("ngModel",i.password))},dependencies:[K_,Rl,U_,B_,If,Nl]})}return t})();function QD(){return K((t,e)=>{let n,r=!1;t.subscribe(ce(e,i=>{const s=n;n=i,r&&e.next([s,i]),r=!0}))})}var pe,q=xe(861),MO=xe(537),zs=xe(879),wt=xe(58),E8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ws={},YD=YD||{},Ge=E8||self;function Q_(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Ef(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var JD="closure_uid_"+(1e9*Math.random()>>>0),D8=0;function C8(t,e,n){return t.call.apply(t.bind,arguments)}function T8(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Mr(t,e,n){return(Mr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?C8:T8).apply(null,arguments)}function Y_(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function sr(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function la(){this.s=this.s,this.o=this.o}la.prototype.s=!1,la.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function w8(t){Object.prototype.hasOwnProperty.call(t,JD)&&t[JD]||(t[JD]=++D8)}(this)},la.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const NO=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function XD(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function xO(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Q_(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Nr(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Nr.prototype.h=function(){this.defaultPrevented=!0};var b8=function(){if(!Ge.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};Ge.addEventListener("test",n,e),Ge.removeEventListener("test",n,e)}catch{}return t}();function wf(t){return/^[\s\xa0]*$/.test(t)}function J_(){var t=Ge.navigator;return t&&(t=t.userAgent)?t:""}function Gs(t){return-1!=J_().indexOf(t)}function eC(t){return eC[" "](t),t}eC[" "]=function(){};var nC,t,R8=Gs("Opera"),xl=Gs("Trident")||Gs("MSIE"),OO=Gs("Edge"),tC=OO||xl,kO=Gs("Gecko")&&!(-1!=J_().toLowerCase().indexOf("webkit")&&!Gs("Edge"))&&!(Gs("Trident")||Gs("MSIE"))&&!Gs("Edge"),P8=-1!=J_().toLowerCase().indexOf("webkit")&&!Gs("Edge");function VO(){var t=Ge.document;return t?t.documentMode:void 0}e:{var rC="",iC=(t=J_(),kO?/rv:([^\);]+)(\)|;)/.exec(t):OO?/Edge\/([\d\.]+)/.exec(t):xl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):P8?/WebKit\/(\S+)/.exec(t):R8?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(iC&&(rC=iC?iC[1]:""),xl){var sC=VO();if(null!=sC&&sC>parseFloat(rC)){nC=String(sC);break e}}nC=rC}var M8=Ge.document&&xl&&(VO()||parseInt(nC,10))||void 0;function Df(t,e){if(Nr.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(kO){e:{try{eC(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:N8[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Df.$.h.call(this)}}sr(Df,Nr);var N8={2:"touch",3:"pen",4:"mouse"};Df.prototype.h=function(){Df.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Cf="closure_listenable_"+(1e6*Math.random()|0),x8=0;function O8(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++x8,this.fa=this.ia=!1}function X_(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function aC(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function LO(t){const e={};for(const n in t)e[n]=t[n];return e}const UO="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function BO(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let s=0;s<UO.length;s++)n=UO[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ey(t){this.src=t,this.g={},this.h=0}function uC(t,e){var n=e.type;if(n in t.g){var s,r=t.g[n],i=NO(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(X_(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function cC(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}ey.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=cC(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new O8(e,this.src,s,!!r,i)).ia=n,t.push(e)),e};var lC="closure_lm_"+(1e6*Math.random()|0),dC={};function jO(t,e,n,r,i){if(r&&r.once)return HO(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)jO(t,e[s],n,r,i);return null}return n=gC(n),t&&t[Cf]?t.O(e,n,Ef(r)?!!r.capture:!!r,i):$O(t,e,n,!1,r,i)}function $O(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Ef(i)?!!i.capture:!!i,a=fC(t);if(a||(t[lC]=a=new ey(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function V8(){const e=F8;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)b8||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(GO(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function HO(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)HO(t,e[s],n,r,i);return null}return n=gC(n),t&&t[Cf]?t.P(e,n,Ef(r)?!!r.capture:!!r,i):$O(t,e,n,!0,r,i)}function zO(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)zO(t,e[s],n,r,i);else r=Ef(r)?!!r.capture:!!r,n=gC(n),t&&t[Cf]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=cC(s=t.g[e],n,r,i))&&(X_(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=fC(t))&&(e=t.g[e.toString()],t=-1,e&&(t=cC(e,n,r,i)),(n=-1<t?e[t]:null)&&hC(n))}function hC(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[Cf])uC(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(GO(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=fC(e))?(uC(n,t),0==n.h&&(n.src=null,e[lC]=null)):X_(t)}}}function GO(t){return t in dC?dC[t]:dC[t]="on"+t}function F8(t,e){if(t.fa)t=!0;else{e=new Df(e,this);var n=t.listener,r=t.la||t.src;t.ia&&hC(t),t=n.call(r,e)}return t}function fC(t){return(t=t[lC])instanceof ey?t:null}var pC="__closure_events_fn_"+(1e9*Math.random()>>>0);function gC(t){return"function"==typeof t?t:(t[pC]||(t[pC]=function(e){return t.handleEvent(e)}),t[pC])}function or(){la.call(this),this.i=new ey(this),this.S=this,this.J=null}function gr(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new Nr(e,t);else if(e instanceof Nr)e.target=e.target||t;else{var i=e;BO(e=new Nr(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=ty(o,r,!0,e)&&i}if(i=ty(o=e.g=t,r,!0,e)&&i,i=ty(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=ty(o=e.g=n[s],r,!1,e)&&i}function ty(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,u=o.la||o.src;o.ia&&uC(t.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}sr(or,la),or.prototype[Cf]=!0,or.prototype.removeEventListener=function(t,e,n,r){zO(this,t,e,n,r)},or.prototype.N=function(){if(or.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)X_(n[r]);delete t.g[e],t.h--}}this.J=null},or.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},or.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var mC=Ge.JSON.stringify;function U8(){var t=_C;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var WO=new class L8{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new j8,t=>t.reset());class j8{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function $8(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function H8(t){Ge.setTimeout(()=>{throw t},0)}let Tf,Af=!1,_C=new class B8{constructor(){this.h=this.g=null}add(e,n){const r=WO.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},qO=()=>{const t=Ge.Promise.resolve(void 0);Tf=()=>{t.then(z8)}};var z8=()=>{for(var t;t=U8();){try{t.h.call(t.g)}catch(n){H8(n)}var e=WO;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Af=!1};function ny(t,e){or.call(this),this.h=t||1,this.g=e||Ge,this.j=Mr(this.qb,this),this.l=Date.now()}function yC(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function vC(t,e,n){if("function"==typeof t)n&&(t=Mr(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Mr(t.handleEvent,t)}return 2147483647<Number(e)?-1:Ge.setTimeout(t,e||0)}function ZO(t){t.g=vC(()=>{t.g=null,t.i&&(t.i=!1,ZO(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}sr(ny,or),(pe=ny.prototype).ga=!1,pe.T=null,pe.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),gr(this,"tick"),this.ga&&(yC(this),this.start()))}},pe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},pe.N=function(){ny.$.N.call(this),yC(this),delete this.g};class G8 extends la{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ZO(this)}N(){super.N(),this.g&&(Ge.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bf(t){la.call(this),this.h=t,this.g={}}sr(bf,la);var KO=[];function QO(t,e,n,r){Array.isArray(n)||(n&&(KO[0]=n.toString()),n=KO);for(var i=0;i<n.length;i++){var s=jO(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function YO(t){aC(t.g,function(e,n){this.g.hasOwnProperty(n)&&hC(e)},t),t.g={}}function ry(){this.g=!0}function Ol(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function K8(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return mC(n)}catch{return e}}(t,n)+(r?" "+r:"")})}bf.prototype.N=function(){bf.$.N.call(this),YO(this)},bf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ry.prototype.Ea=function(){this.g=!1},ry.prototype.info=function(){};var Au={},JO=null;function iy(){return JO=JO||new or}function XO(t){Nr.call(this,Au.Ta,t)}function Sf(t){const e=iy();gr(e,new XO(e))}function ek(t,e){Nr.call(this,Au.STAT_EVENT,t),this.stat=e}function ti(t){const e=iy();gr(e,new ek(e,t))}function tk(t,e){Nr.call(this,Au.Ua,t),this.size=e}function Rf(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Ge.setTimeout(function(){t()},e)}Au.Ta="serverreachability",sr(XO,Nr),Au.STAT_EVENT="statevent",sr(ek,Nr),Au.Ua="timingevent",sr(tk,Nr);var sy={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},nk={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function IC(){}function ik(){}IC.prototype.h=null;var DC,Pf={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function EC(){Nr.call(this,"d")}function wC(){Nr.call(this,"c")}function oy(){}function Mf(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new bf(this),this.P=Q8,this.V=new ny(t=tC?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new sk}function sk(){this.i=null,this.g="",this.h=!1}sr(EC,Nr),sr(wC,Nr),sr(oy,IC),oy.prototype.g=function(){return new XMLHttpRequest},oy.prototype.i=function(){return{}},DC=new oy;var Q8=45e3,ok={},CC={};function TC(t,e,n){t.L=1,t.A=ly(bo(e)),t.u=n,t.S=!0,ak(t,null)}function ak(t,e){t.G=Date.now(),Nf(t),t.B=bo(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),_k(n.i,"t",r),t.o=0,n=t.l.J,t.h=new sk,t.g=jk(t.l,n?e:null,!t.u),0<t.O&&(t.M=new G8(Mr(t.Pa,t,t.g),t.O)),QO(t.U,t.g,"readystatechange",t.nb),e=t.I?LO(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Sf(),function W8(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var l=a[u].split("=");if(1<l.length){var h=l[0];l=l[1];var g=h.split("_");o=2<=g.length&&"type"==g[1]?o+(h+"=")+l+"&":o+(h+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.v,t.B,t.m,t.W,t.u)}function uk(t){return!!t.g&&"GET"==t.v&&2!=t.L&&t.l.Ha}function ck(t,e,n){let i,r=!0;for(;!t.J&&t.o<n.length;){if(i=Y8(t,n),i==CC){4==e&&(t.s=4,ti(14),r=!1),Ol(t.j,t.m,null,"[Incomplete Response]");break}if(i==ok){t.s=4,ti(15),Ol(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}Ol(t.j,t.m,i,null),AC(t,i)}uk(t)&&0!=t.o&&(t.h.g=t.h.g.slice(t.o),t.o=0),4!=e||0!=n.length||t.h.h||(t.s=1,ti(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),xC(e),e.M=!0,ti(11))):(Ol(t.j,t.m,n,"[Invalid Chunked Response]"),bu(t),xf(t))}function Y8(t,e){var n=t.o,r=e.indexOf("\n",n);return-1==r?CC:(n=Number(e.substring(n,r)),isNaN(n)?ok:(r+=1)+n>e.length?CC:(e=e.slice(r,r+n),t.o=r+n,e))}function Nf(t){t.Y=Date.now()+t.P,lk(t,t.P)}function lk(t,e){if(null!=t.C)throw Error("WatchDog timer not null");t.C=Rf(Mr(t.lb,t),e)}function ay(t){t.C&&(Ge.clearTimeout(t.C),t.C=null)}function xf(t){0==t.l.H||t.J||Fk(t.l,t)}function bu(t){ay(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,yC(t.V),YO(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function AC(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||bC(n.i,t)))if(!t.K&&bC(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break e;my(n),py(n)}NC(n),ti(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Rf(Mr(n.ib,n),6e3));if(1>=Ik(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Ru(n,11)}else if((t.K||n.g==t)&&my(n),!wf(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const h=l[3];null!=h&&(n.ra=h,n.l.info("VER="+n.ra));const g=l[4];null!=g&&(n.Ga=g,n.l.info("SVER="+n.Ga));const m=l[5];null!=m&&"number"==typeof m&&0<m&&(n.L=r=1.5*m,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const y=t.g;if(y){const C=y.g?y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(C){var s=r.i;s.g||-1==C.indexOf("spdy")&&-1==C.indexOf("quic")&&-1==C.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(SC(s,s.h),s.h=null))}if(r.F){const S=y.g?y.g.getResponseHeader("X-HTTP-Session-Id"):null;S&&(r.Da=S,rn(r.I,r.F,S))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((r=n).wa=Bk(r,r.J?r.pa:null,r.Y),o.K){Ek(r.i,o);var a=o,u=r.L;u&&a.setTimeout(u),a.C&&(ay(a),Nf(a)),r.g=o}else kk(r);0<n.j.length&&gy(n)}else"stop"!=l[0]&&"close"!=l[0]||Ru(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?Ru(n,7):MC(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}Sf()}catch{}}function dk(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Q_(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function X8(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Q_(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function J8(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(Q_(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}(pe=Mf.prototype).setTimeout=function(t){this.P=t},pe.nb=function(t){t=t.target;const e=this.M;e&&3==Ws(t)?e.l():this.Pa(t)},pe.Pa=function(t){try{if(t==this.g)e:{const h=Ws(this.g);var e=this.g.Ia();if(this.g.da(),!(3>h)&&(3!=h||tC||this.g&&(this.h.h||this.g.ja()||Rk(this.g)))){this.J||4!=h||7==e||Sf(),ay(this);var n=this.g.da();this.ca=n;t:if(uk(this)){var r=Rk(this.g);t="";var i=r.length,s=4==Ws(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){bu(this),xf(this);var o="";break t}this.h.i=new Ge.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function q8(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.v,this.B,this.m,this.W,h,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!wf(a)){var l=a;break t}}l=null}if(!(n=l)){this.i=!1,this.s=3,ti(12),bu(this),xf(this);break e}Ol(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,AC(this,n)}this.S?(ck(this,h,o),tC&&this.i&&3==h&&(QO(this.U,this.V,"tick",this.mb),this.V.start())):(Ol(this.j,this.m,o,null),AC(this,o)),4==h&&bu(this),this.i&&!this.J&&(4==h?Fk(this.l,this):(this.i=!1,Nf(this)))}else(function _7(t){const e={};t=(t.g&&2<=Ws(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(wf(t[r]))continue;var n=$8(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}!function k8(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(r){return r.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,ti(12)):(this.s=0,ti(13)),bu(this),xf(this)}}}catch{}},pe.mb=function(){if(this.g){var t=Ws(this.g),e=this.g.ja();this.o<e.length&&(ay(this),ck(this,t,e),this.i&&4!=t&&Nf(this))}},pe.cancel=function(){this.J=!0,bu(this)},pe.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(function Z8(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(Sf(),ti(17)),bu(this),this.s=2,xf(this)):lk(this,this.Y-t)};var hk=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Su(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Su){this.h=t.h,uy(this,t.j),this.s=t.s,this.g=t.g,cy(this,t.m),this.l=t.l;var e=t.i,n=new Vf;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),fk(this,n),this.o=t.o}else t&&(e=String(t).match(hk))?(this.h=!1,uy(this,e[1]||"",!0),this.s=Of(e[2]||""),this.g=Of(e[3]||"",!0),cy(this,e[4]),this.l=Of(e[5]||"",!0),fk(this,e[6]||"",!0),this.o=Of(e[7]||"")):(this.h=!1,this.i=new Vf(null,this.h))}function bo(t){return new Su(t)}function uy(t,e,n){t.j=n?Of(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function cy(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function fk(t,e,n){e instanceof Vf?(t.i=e,function o7(t,e){e&&!t.j&&(da(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(gk(this,r),_k(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=kf(e,i7)),t.i=new Vf(e,t.h))}function rn(t,e,n){t.i.set(e,n)}function ly(t){return rn(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Of(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function kf(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,t7),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function t7(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Su.prototype.toString=function(){var t=[],e=this.j;e&&t.push(kf(e,pk,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(kf(e,pk,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(kf(n,"/"==n.charAt(0)?r7:n7,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",kf(n,s7)),t.join("")};var pk=/[#\/\?@]/g,n7=/[#\?:]/g,r7=/[#\?]/g,i7=/[#\?@]/g,s7=/#/g;function Vf(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function da(t){t.g||(t.g=new Map,t.h=0,t.i&&function e7(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function gk(t,e){da(t),e=kl(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function mk(t,e){return da(t),e=kl(t,e),t.g.has(e)}function _k(t,e,n){gk(t,e),0<n.length&&(t.i=null,t.g.set(kl(t,e),XD(n)),t.h+=n.length)}function kl(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function yk(t){this.l=t||u7,t=Ge.PerformanceNavigationTiming?0<(t=Ge.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Ge.g&&Ge.g.Ka&&Ge.g.Ka()&&Ge.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(pe=Vf.prototype).add=function(t,e){da(this),this.i=null,t=kl(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},pe.forEach=function(t,e){da(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},pe.ta=function(){da(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n},pe.Z=function(t){da(this);let e=[];if("string"==typeof t)mk(this,t)&&(e=e.concat(this.g.get(kl(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},pe.set=function(t,e){return da(this),this.i=null,mk(this,t=kl(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},pe.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},pe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};var u7=10;function vk(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Ik(t){return t.h?1:t.g?t.g.size:0}function bC(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function SC(t,e){t.g?t.g.add(e):t.h=e}function Ek(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function wk(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return XD(t.i)}yk.prototype.cancel=function(){if(this.i=wk(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var c7=class{stringify(t){return Ge.JSON.stringify(t,void 0)}parse(t){return Ge.JSON.parse(t,void 0)}};function l7(){this.g=new c7}function d7(t,e,n){const r=n||"";try{dk(t,function(i,s){let o=i;Ef(i)&&(o=mC(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function dy(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Ff(t){this.l=t.ec||null,this.j=t.ob||!1}function hy(t,e){or.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=RC,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}sr(Ff,IC),Ff.prototype.g=function(){return new hy(this.l,this.j)},Ff.prototype.i=function(t){return function(){return t}}({}),sr(hy,or);var RC=0;function Dk(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function Lf(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Uf(t)}function Uf(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(pe=hy.prototype).open=function(t,e){if(this.readyState!=RC)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Uf(this)},pe.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Ge).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},pe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Lf(this)),this.readyState=RC},pe.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Uf(this)),this.g&&(this.readyState=3,Uf(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Ge.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Dk(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},pe.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Lf(this):Uf(this),3==this.readyState&&Dk(this)}},pe.Za=function(t){this.g&&(this.response=this.responseText=t,Lf(this))},pe.Ya=function(t){this.g&&(this.response=t,Lf(this))},pe.ka=function(){this.g&&Lf(this)},pe.setRequestHeader=function(t,e){this.v.append(t,e)},pe.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},pe.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(hy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var f7=Ge.JSON.parse;function wn(t){or.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Ck,this.L=this.M=!1}sr(wn,or);var Ck="",p7=/^https?$/i,g7=["POST","PUT"];function Tk(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Ak(t),fy(t)}function Ak(t){t.F||(t.F=!0,gr(t,"complete"),gr(t,"error"))}function bk(t){if(t.h&&typeof YD<"u"&&(!t.C[1]||4!=Ws(t)||2!=t.da()))if(t.v&&4==Ws(t))vC(t.La,0,t);else if(gr(t,"readystatechange"),4==Ws(t)){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===o){var i=String(t.I).match(hk)[1]||null;!i&&Ge.self&&Ge.self.location&&(i=Ge.self.location.protocol.slice(0,-1)),r=!p7.test(i?i.toLowerCase():"")}n=r}if(n)gr(t,"complete"),gr(t,"success");else{t.m=6;try{var s=2<Ws(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",Ak(t)}}finally{fy(t)}}}function fy(t,e){if(t.g){Sk(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||gr(t,"ready");try{n.onreadystatechange=r}catch{}}}function Sk(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Ge.clearTimeout(t.A),t.A=null)}function Ws(t){return t.g?t.g.readyState:0}function Rk(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case Ck:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function Pk(t){let e="";return aC(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function PC(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Pk(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):rn(t,e,n))}function Bf(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Mk(t){this.Ga=0,this.j=[],this.l=new ry,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Bf("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Bf("baseRetryDelayMs",5e3,t),this.hb=Bf("retryDelaySeedMs",1e4,t),this.eb=Bf("forwardChannelMaxRetries",2,t),this.xa=Bf("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new yk(t&&t.concurrentRequestLimit),this.Ja=new l7,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function MC(t){if(Nk(t),3==t.H){var e=t.W++,n=bo(t.I);if(rn(n,"SID",t.K),rn(n,"RID",e),rn(n,"TYPE","terminate"),jf(t,n),(e=new Mf(t,t.l,e)).L=2,e.A=ly(bo(n)),n=!1,Ge.navigator&&Ge.navigator.sendBeacon)try{n=Ge.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&Ge.Image&&((new Image).src=e.A,n=!0),n||(e.g=jk(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Nf(e)}Uk(t)}function py(t){t.g&&(xC(t),t.g.cancel(),t.g=null)}function Nk(t){py(t),t.u&&(Ge.clearTimeout(t.u),t.u=null),my(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Ge.clearTimeout(t.m),t.m=null)}function gy(t){if(!vk(t.i)&&!t.m){t.m=!0;var e=t.Na;Tf||qO(),Af||(Tf(),Af=!0),_C.add(e,t),t.C=0}}function xk(t,e){var n;n=e?e.m:t.W++;const r=bo(t.I);rn(r,"SID",t.K),rn(r,"RID",n),rn(r,"AID",t.V),jf(t,r),t.o&&t.s&&PC(r,t.o,t.s),n=new Mf(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Ok(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),SC(t.i,n),TC(n,r,e)}function jf(t,e){t.na&&aC(t.na,function(n,r){rn(e,r,n)}),t.h&&dk({},function(n,r){rn(e,r,n)})}function Ok(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Mr(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];-1==s?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let l=i[u].g;const h=i[u].map;if(l-=s,0>l)s=Math.max(0,i[u].g-100),a=!1;else try{d7(h,o,"req"+l+"_")}catch{r&&r(h)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function kk(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Tf||qO(),Af||(Tf(),Af=!0),_C.add(e,t),t.A=0}}function NC(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=Rf(Mr(t.Ma,t),Lk(t,t.A)),t.A++,0))}function xC(t){null!=t.B&&(Ge.clearTimeout(t.B),t.B=null)}function Vk(t){t.g=new Mf(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=bo(t.wa);rn(e,"RID","rpc"),rn(e,"SID",t.K),rn(e,"AID",t.V),rn(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&rn(e,"TO",t.qa),rn(e,"TYPE","xmlhttp"),jf(t,e),t.o&&t.s&&PC(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=ly(bo(e)),n.u=null,n.S=!0,ak(n,t)}function my(t){null!=t.v&&(Ge.clearTimeout(t.v),t.v=null)}function Fk(t,e){var n=null;if(t.g==e){my(t),xC(t),t.g=null;var r=2}else{if(!bC(t.i,e))return;n=e.F,Ek(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;gr(r=iy(),new tk(r,n)),gy(t)}else kk(t);else if(3==(i=e.s)||0==i&&0<e.ca||!(1==r&&function y7(t,e){return!(Ik(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=Rf(Mr(t.Na,t,e),Lk(t,t.C)),t.C++,0)))}(t,e)||2==r&&NC(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Ru(t,5);break;case 4:Ru(t,10);break;case 3:Ru(t,6);break;default:Ru(t,2)}}function Lk(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Ru(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=Mr(t.pb,t);n||(n=new Su("//www.google.com/images/cleardot.gif"),Ge.location&&"http"==Ge.location.protocol||uy(n,"https"),ly(n)),function h7(t,e){const n=new ry;if(Ge.Image){const r=new Image;r.onload=Y_(dy,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Y_(dy,n,r,"TestLoadImage: error",!1,e),r.onabort=Y_(dy,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Y_(dy,n,r,"TestLoadImage: timeout",!1,e),Ge.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else ti(2);t.H=0,t.h&&t.h.za(e),Uk(t),Nk(t)}function Uk(t){if(t.H=0,t.ma=[],t.h){const e=wk(t.i);(0!=e.length||0!=t.j.length)&&(xO(t.ma,e),xO(t.ma,t.j),t.i.i.length=0,XD(t.j),t.j.length=0),t.h.ya()}}function Bk(t,e,n){var r=n instanceof Su?bo(n):new Su(n);if(""!=r.g)e&&(r.g=e+"."+r.g),cy(r,r.m);else{var i=Ge.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Su(null);r&&uy(s,r),e&&(s.g=e),i&&cy(s,i),n&&(s.l=n),r=s}return e=t.Da,(n=t.F)&&e&&rn(r,n,e),rn(r,"VER",t.ra),jf(t,r),r}function jk(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new wn(t.Ha&&!t.va?new Ff({ob:n}):t.va)).Oa(t.J),e}function $k(){}function _y(){if(xl&&!(10<=Number(M8)))throw Error("Environmental error: no available transport.")}function ki(t,e){or.call(this),this.g=new Mk(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!wf(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!wf(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Vl(this)}function Hk(t){EC.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function zk(){wC.call(this),this.status=1}function Vl(t){this.g=t}function Ds(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function OC(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var s=t.g[3],o=(e=t.g[0])+(s^(n=t.g[1])&((i=t.g[2])^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}function Ot(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=0|t[i];r&&s==e||(n[i]=s,r=!1)}this.g=n}(pe=wn.prototype).Oa=function(t){this.M=t},pe.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():DC.g(),this.C=function rk(t){return t.h||(t.h=t.i())}(this.u?this.u:DC),this.g.onreadystatechange=Mr(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){return void Tk(this,s)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())n.set(s,r.get(s))}r=Array.from(n.keys()).find(s=>"content-type"==s.toLowerCase()),i=Ge.FormData&&t instanceof Ge.FormData,!(0<=NO(g7,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Sk(this),0<this.B&&((this.L=function m7(t){return xl&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Mr(this.ua,this)):this.A=vC(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){Tk(this,s)}},pe.ua=function(){typeof YD<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,gr(this,"timeout"),this.abort(8))},pe.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,gr(this,"complete"),gr(this,"abort"),fy(this))},pe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),fy(this,!0)),wn.$.N.call(this)},pe.La=function(){this.s||(this.G||this.v||this.l?bk(this):this.kb())},pe.kb=function(){bk(this)},pe.isActive=function(){return!!this.g},pe.da=function(){try{return 2<Ws(this)?this.g.status:-1}catch{return-1}},pe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},pe.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),f7(e)}},pe.Ia=function(){return this.m},pe.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(pe=Mk.prototype).ra=8,pe.H=1,pe.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Mf(this,this.l,t);let s=this.s;if(this.U&&(s?(s=LO(s),BO(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Ok(this,i,e),rn(n=bo(this.I),"RID",t),rn(n,"CVER",22),this.F&&rn(n,"X-HTTP-Session-Id",this.F),jf(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(Pk(s)))+"&"+e:this.o&&PC(n,this.o,s)),SC(this.i,i),this.bb&&rn(n,"TYPE","init"),this.P?(rn(n,"$req",e),rn(n,"SID","null"),i.aa=!0,TC(i,n,null)):TC(i,n,e),this.H=2}}else 3==this.H&&(t?xk(this,t):0==this.j.length||vk(this.i)||xk(this))},pe.Ma=function(){if(this.u=null,Vk(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Rf(Mr(this.jb,this),t)}},pe.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ti(10),py(this),Vk(this))},pe.ib=function(){null!=this.v&&(this.v=null,py(this),NC(this),ti(19))},pe.pb=function(t){t?(this.l.info("Successfully pinged google.com"),ti(2)):(this.l.info("Failed to ping google.com"),ti(1))},pe.isActive=function(){return!!this.h&&this.h.isActive(this)},(pe=$k.prototype).Ba=function(){},pe.Aa=function(){},pe.za=function(){},pe.ya=function(){},pe.isActive=function(){return!0},pe.Va=function(){},_y.prototype.g=function(t,e){return new ki(t,e)},sr(ki,or),ki.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;ti(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Bk(t,null,t.Y),gy(t)},ki.prototype.close=function(){MC(this.g)},ki.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=mC(t),t=n);e.j.push(new class{constructor(t,e){this.g=t,this.map=e}}(e.fb++,t)),3==e.H&&gy(e)},ki.prototype.N=function(){this.g.h=null,delete this.j,MC(this.g),delete this.g,ki.$.N.call(this)},sr(Hk,EC),sr(zk,wC),sr(Vl,$k),Vl.prototype.Ba=function(){gr(this.g,"a")},Vl.prototype.Aa=function(t){gr(this.g,new Hk(t))},Vl.prototype.za=function(t){gr(this.g,new zk)},Vl.prototype.ya=function(){gr(this.g,"b")},sr(Ds,function v7(){this.blockSize=-1}),Ds.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ds.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=n;)OC(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){OC(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){OC(this,r),i=0;break}}this.h=i,this.i+=e},Ds.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var I7={};function kC(t){return-128<=t&&128>t?function S8(t,e){var n=I7;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(e){return new Ot([0|e],0>e?-1:0)}):new Ot([0|t],0>t?-1:0)}function qs(t){if(isNaN(t)||!isFinite(t))return Fl;if(0>t)return mr(qs(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=VC;return new Ot(e,0)}var VC=4294967296,Fl=kC(0),FC=kC(1),Wk=kC(16777216);function So(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function as(t){return-1==t.h}function mr(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Ot(n,~t.h).add(FC)}function yy(t,e){return t.add(mr(e))}function vy(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function $f(t,e){this.g=t,this.h=e}function Iy(t,e){if(So(e))throw Error("division by zero");if(So(t))return new $f(Fl,Fl);if(as(t))return e=Iy(mr(t),e),new $f(mr(e.g),mr(e.h));if(as(e))return e=Iy(t,mr(e)),new $f(mr(e.g),e.h);if(30<t.g.length){if(as(t)||as(e))throw Error("slowDivide_ only works with positive integers.");for(var n=FC,r=e;0>=r.X(t);)n=qk(n),r=qk(r);var i=Ll(n,1),s=Ll(r,1);for(r=Ll(r,2),n=Ll(n,2);!So(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Ll(r,1),n=Ll(n,1)}return e=yy(t,i.R(e)),new $f(i,e)}for(i=Fl;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=qs(n)).R(e);as(o)||0<o.X(t);)o=(s=qs(n-=r)).R(e);So(s)&&(s=FC),i=i.add(s),t=yy(t,o)}return new $f(i,t)}function qk(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Ot(n,t.h)}function Ll(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Ot(i,t.h)}(pe=Ot.prototype).ea=function(){if(as(this))return-mr(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:VC+r)*e,e*=VC}return t},pe.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(So(this))return"0";if(as(this))return"-"+mr(this).toString(t);for(var e=qs(Math.pow(t,6)),n=this,r="";;){var i=Iy(n,e).g,s=((0<(n=yy(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(So(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},pe.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},pe.X=function(t){return as(t=yy(this,t))?-1:So(t)?0:1},pe.abs=function(){return as(this)?mr(this):this},pe.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&t.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,n[i]=(o&=65535)<<16|(s&=65535)}return new Ot(n,-2147483648&n[n.length-1]?-1:0)},pe.R=function(t){if(So(this)||So(t))return Fl;if(as(this))return as(t)?mr(this).R(mr(t)):mr(mr(this).R(t));if(as(t))return mr(this.R(mr(t)));if(0>this.X(Wk)&&0>t.X(Wk))return qs(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=t.D(i)>>>16,u=65535&t.D(i);n[2*r+2*i]+=o*u,vy(n,2*r+2*i),n[2*r+2*i+1]+=s*u,vy(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,vy(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,vy(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Ot(n,0)},pe.gb=function(t){return Iy(this,t).h},pe.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Ot(n,this.h&t.h)},pe.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Ot(n,this.h|t.h)},pe.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Ot(n,this.h^t.h)},_y.prototype.createWebChannel=_y.prototype.g,ki.prototype.send=ki.prototype.u,ki.prototype.open=ki.prototype.m,ki.prototype.close=ki.prototype.close,sy.NO_ERROR=0,sy.TIMEOUT=8,sy.HTTP_ERROR=6,nk.COMPLETE="complete",ik.EventType=Pf,Pf.OPEN="a",Pf.CLOSE="b",Pf.ERROR="c",Pf.MESSAGE="d",or.prototype.listen=or.prototype.O,wn.prototype.listenOnce=wn.prototype.P,wn.prototype.getLastError=wn.prototype.Sa,wn.prototype.getLastErrorCode=wn.prototype.Ia,wn.prototype.getStatus=wn.prototype.da,wn.prototype.getResponseJson=wn.prototype.Wa,wn.prototype.getResponseText=wn.prototype.ja,wn.prototype.send=wn.prototype.ha,wn.prototype.setWithCredentials=wn.prototype.Oa,Ds.prototype.digest=Ds.prototype.l,Ds.prototype.reset=Ds.prototype.reset,Ds.prototype.update=Ds.prototype.j,Ot.prototype.add=Ot.prototype.add,Ot.prototype.multiply=Ot.prototype.R,Ot.prototype.modulo=Ot.prototype.gb,Ot.prototype.compare=Ot.prototype.X,Ot.prototype.toNumber=Ot.prototype.ea,Ot.prototype.toString=Ot.prototype.toString,Ot.prototype.getBits=Ot.prototype.D,Ot.fromNumber=qs,Ot.fromString=function Gk(t,e){if(0==t.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return mr(Gk(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=qs(Math.pow(e,8)),r=Fl,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=qs(Math.pow(e,s)),r=r.R(s).add(qs(o))):r=(r=r.R(n)).add(qs(o))}return r};var E7=ws.createWebChannelTransport=function(){return new _y},w7=ws.getStatEventTarget=function(){return iy()},LC=ws.ErrorCode=sy,D7=ws.EventType=nk,C7=ws.Event=Au,Zk=ws.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Ey=(ws.FetchXmlHttpFactory=Ff,ws.WebChannel=ik),T7=ws.XhrIo=wn,A7=ws.Md5=Ds,Ul=ws.Integer=Ot;const Kk="@firebase/firestore";class ar{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ar.UNAUTHENTICATED=new ar(null),ar.GOOGLE_CREDENTIALS=new ar("google-credentials-uid"),ar.FIRST_PARTY=new ar("first-party-uid"),ar.MOCK_USER=new ar("mock-user");let Bl="10.8.0";const ha=new zs.Yd("@firebase/firestore");function jl(){return ha.logLevel}function ne(t,...e){if(ha.logLevel<=zs.in.DEBUG){const n=e.map(UC);ha.debug(`Firestore (${Bl}): ${t}`,...n)}}function On(t,...e){if(ha.logLevel<=zs.in.ERROR){const n=e.map(UC);ha.error(`Firestore (${Bl}): ${t}`,...n)}}function pi(t,...e){if(ha.logLevel<=zs.in.WARN){const n=e.map(UC);ha.warn(`Firestore (${Bl}): ${t}`,...n)}}function UC(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function ve(t="Unexpected state"){const e=`FIRESTORE (${Bl}) INTERNAL ASSERTION FAILED: `+t;throw On(e),new Error(e)}function Ae(t,e){t||ve()}function ue(t,e){return t}const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends wt.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class qn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class Qk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class R7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ar.UNAUTHENTICATED))}shutdown(){}}class P7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class M7{constructor(e){this.t=e,this.currentUser=ar.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const s=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let o=new qn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new qn,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=o;e.enqueueRetryable((0,q.Z)(function*(){yield l.promise,yield s(r.currentUser)}))},u=l=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(l=>u(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?u(l):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new qn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ae("string"==typeof r.accessToken),new Qk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ae(null===e||"string"==typeof e),new ar(e)}}class N7{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ar.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class x7{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new N7(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ar.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Yk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class O7{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{null!=s.error&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ne("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ae("string"==typeof n.token),this.R=n.token,new Yk(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function k7(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class Jk{static newId(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=k7(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function je(t,e){return t<e?-1:t>e?1:0}function $l(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function Xk(t){return t+"\0"}class ln{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new X(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ln.fromMillis(Date.now())}static fromDate(e){return ln.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ln(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Se{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Se(e)}static min(){return new Se(new ln(0,0))}static max(){return new Se(new ln(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Hf{constructor(e,n,r){void 0===n?n=0:n>e.length&&ve(),void 0===r?r=e.length-n:r>e.length-n&&ve(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===Hf.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Hf?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class gt extends Hf{construct(e,n,r){return new gt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new X(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new gt(n)}static emptyPath(){return new gt([])}}const V7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sn extends Hf{construct(e,n,r){return new sn(e,n,r)}static isValidIdentifier(e){return V7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new sn(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(0===r.length)throw new X(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new X(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new X(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new X(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new sn(n)}static emptyPath(){return new sn([])}}class le{constructor(e){this.path=e}static fromPath(e){return new le(gt.fromString(e))}static fromName(e){return new le(gt.fromString(e).popFirst(5))}static empty(){return new le(gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===gt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return gt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new le(new gt(e.slice()))}}class Hl{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function BC(t){return t.fields.find(e=>2===e.kind)}function Pu(t){return t.fields.filter(e=>2!==e.kind)}Hl.UNKNOWN_ID=-1;class Mu{constructor(e,n){this.fieldPath=e,this.kind=n}}class zl{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new zl(0,Vi.min())}}function eV(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Se.fromTimestamp(1e9===r?new ln(n+1,0):new ln(n,r));return new Vi(i,le.empty(),e)}function tV(t){return new Vi(t.readTime,t.key,-1)}class Vi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Vi(Se.min(),le.empty(),-1)}static max(){return new Vi(Se.max(),le.empty(),-1)}}function jC(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=le.comparator(t.documentKey,e.documentKey),0!==n?n:je(t.largestBatchId,e.largestBatchId))}const nV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function fa(t){return $C.apply(this,arguments)}function $C(){return $C=(0,q.Z)(function*(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==nV)throw t;ne("LocalStore","Unexpectedly lost primary lease")}),$C.apply(this,arguments)}class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ve(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,r)=>{n(e)})}static reject(e){return new O((n,r)=>{r(e)})}static waitFor(e){return new O((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next(i=>i?O.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new O((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new O((r,i)=>{const s=()=>{!0===e()?n().next(()=>{s()},i):r()};s()})}}class wy{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new qn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new zf(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=HC(r.target.error);this.V.reject(new zf(e,i))}}static open(e,n,r,i){try{return new wy(n,e.transaction(i,r))}catch(s){throw new zf(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ne("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new B7(n)}}class us{constructor(e,n,r){this.name=e,this.version=n,this.p=r,12.2===us.S((0,wt.z$)())&&On("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ne("SimpleDb","Removing database:",e),Nu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,wt.hl)())return!1;if(us.C())return!0;const e=(0,wt.z$)(),n=us.S(e),r=0<n&&n<10,i=us.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var n=this;return(0,q.Z)(function*(){return n.db||(ne("SimpleDb","Opening database:",n.name),n.db=yield new Promise((r,i)=>{const s=indexedDB.open(n.name,n.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new zf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new X(B.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new X(B.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new zf(e,a))},s.onupgradeneeded=o=>{ne("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',o.oldVersion),n.p.N(o.target.result,s.transaction,o.oldVersion,n.version).next(()=>{ne("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=r=>n.B(r)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){var s=this;return(0,q.Z)(function*(){const o="readonly"===n;let a=0;for(;;){++a;try{s.db=yield s.O(e);const u=wy.open(s.db,e,o?"readonly":"readwrite",r),l=i(u).next(h=>(u.g(),h)).catch(h=>(u.abort(h),O.reject(h))).toPromise();return l.catch(()=>{}),yield u.m,l}catch(u){const l=u,h="FirebaseError"!==l.name&&a<3;if(ne("SimpleDb","Transaction failed with error:",l.message,"Retrying:",h),s.close(),!h)return Promise.reject(l)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class U7{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Nu(this.k.delete())}}class zf extends X{constructor(e,n){super(B.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function pa(t){return"IndexedDbTransactionError"===t.name}class B7{constructor(e){this.store=e}put(e,n){let r;return void 0!==n?(ne("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(ne("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Nu(r)}add(e){return ne("SimpleDb","ADD",this.store.name,e,e),Nu(this.store.add(e))}get(e){return Nu(this.store.get(e)).next(n=>(void 0===n&&(n=null),ne("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return ne("SimpleDb","DELETE",this.store.name,e),Nu(this.store.delete(e))}count(){return ne("SimpleDb","COUNT",this.store.name),Nu(this.store.count())}W(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new O((o,a)=>{s.onerror=u=>{a(u.target.error)},s.onsuccess=u=>{o(u.target.result)}})}{const s=this.cursor(r),o=[];return this.G(s,(a,u)=>{o.push(u)}).next(()=>o)}}j(e,n){const r=this.store.getAll(e,null===n?void 0:n);return new O((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){ne("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new O((r,i)=>{n.onerror=s=>{const o=HC(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new O((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new U7(a),l=n(a.primaryKey,a.value,u);if(l instanceof O){const h=l.catch(g=>(u.done(),O.reject(g)));r.push(h)}u.isDone?i():null===u.$?a.continue():a.continue(u.$)}}).next(()=>O.waitFor(r))}options(e,n){let r;return void 0!==e&&("string"==typeof e?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Nu(t){return new O((e,n)=>{t.onsuccess=r=>{e(r.target.result)},t.onerror=r=>{const i=HC(r.target.error);n(i)}})}let iV=!1;function HC(t){const e=us.S((0,wt.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new X("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return iV||(iV=!0,setTimeout(()=>{throw r},0)),r}}return t}class j7{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;ne("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,q.Z)(function*(){n.task=null;try{ne("IndexBackfiller",`Documents written: ${yield n.X.te()}`)}catch(r){pa(r)?ne("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield fa(r)}yield n.ee(6e4)}))}}class $7{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,q.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>n.ne(r,e))})()}ne(e,n){const r=new Set;let i=n,s=!0;return O.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return ne("IndexBackfiller",`Processing collection: ${o}`),this.re(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(i,s)).next(a=>(ne("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=tV(s);jC(o,r)>0&&(r=o)}),new Vi(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}let Fi=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function Gf(t){return null==t}function Wf(t){return 0===t&&1/t==-1/0}function sV(t){return"number"==typeof t&&Number.isInteger(t)&&!Wf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function xr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=oV(e)),e=H7(t.get(n),e);return oV(e)}function H7(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=s}}return n}function oV(t){return t+"\x01\x01"}function Zs(t){const e=t.length;if(Ae(e>=2),2===e)return Ae("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),gt.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("\x01",s);switch((o<0||o>n)&&ve(),t.charAt(o+1)){case"\x01":const a=t.substring(s,o);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=t.substring(s,o),i+="\0";break;case"\x11":i+=t.substring(s,o+1);break;default:ve()}s=o+2}return new gt(r)}const aV=["userId","batchId"];function Dy(t,e){return[t,xr(e)]}function uV(t,e,n){return[t,xr(e),n]}const z7={},G7=["prefixPath","collectionGroup","readTime","documentId"],W7=["prefixPath","collectionGroup","documentId"],q7=["collectionGroup","readTime","prefixPath","documentId"],Z7=["canonicalId","targetId"],K7=["targetId","path"],Q7=["path","targetId"],Y7=["collectionId","parent"],J7=["indexId","uid"],X7=["uid","sequenceNumber"],eZ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],tZ=["indexId","uid","orderedDocumentKey"],nZ=["userId","collectionPath","documentId"],rZ=["userId","collectionPath","largestBatchId"],iZ=["userId","collectionGroup","largestBatchId"],cV=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],sZ=[...cV,"documentOverlays"],lV=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],dV=lV,oZ=[...dV,"indexConfiguration","indexState","indexEntries"];class zC extends rV{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function ur(t,e){const n=ue(t);return us.M(n.ae,e)}function hV(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ga(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function fV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Gt{constructor(e,n){this.comparator=e,this.root=n||_r.EMPTY}insert(e,n){return new Gt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_r.BLACK,null,null))}remove(e){return new Gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_r.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cy(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cy(this.root,e,this.comparator,!0)}}class Cy{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _r{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??_r.RED,this.left=i??_r.EMPTY,this.right=s??_r.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new _r(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===s?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return _r.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return _r.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_r.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_r.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ve();const e=this.left.check();if(e!==this.right.check())throw ve();return e+(this.isRed()?0:1)}}_r.EMPTY=null,_r.RED=!0,_r.BLACK=!1,_r.EMPTY=new class{constructor(){this.size=0}get key(){throw ve()}get value(){throw ve()}get color(){throw ve()}get left(){throw ve()}get right(){throw ve()}copy(e,n,r,i,s){return this}insert(e,n,r){return new _r(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ut{constructor(e){this.comparator=e,this.data=new Gt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new pV(this.data.getIterator())}getIteratorFrom(e){return new pV(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ut(this.comparator);return n.data=e,n}}class pV{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Gl(t){return t.hasNext()?t.getNext():void 0}class gi{constructor(e){this.fields=e,e.sort(sn.comparator)}static empty(){return new gi([])}unionWith(e){let n=new Ut(sn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new gi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return $l(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class gV extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Zn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new gV("Invalid base64 string: "+s):s}}(e);return new Zn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Zn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zn.EMPTY_BYTE_STRING=new Zn("");const uZ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ma(t){if(Ae(!!t),"string"==typeof t){let e=0;const n=uZ.exec(t);if(Ae(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Dn(t.seconds),nanos:Dn(t.nanos)}}function Dn(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ro(t){return"string"==typeof t?Zn.fromBase64String(t):Zn.fromUint8Array(t)}function Ty(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ay(t){const e=t.mapValue.fields.__previous_value__;return Ty(e)?Ay(e):e}function qf(t){const e=ma(t.mapValue.fields.__local_write_time__.timestampValue);return new ln(e.seconds,e.nanos)}class cZ{constructor(e,n,r,i,s,o,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class _a{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new _a("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof _a&&e.projectId===this.projectId&&e.database===this.database}}const ya={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},by={nullValue:"NULL_VALUE"};function va(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ty(t)?4:vV(t)?9007199254740991:10:ve()}function Ks(t,e){if(t===e)return!0;const n=va(t);if(n!==va(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return qf(t).isEqual(qf(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ma(i.timestampValue),a=ma(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return s=e,Ro(t.bytesValue).isEqual(Ro(s.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Dn(i.geoPointValue.latitude)===Dn(s.geoPointValue.latitude)&&Dn(i.geoPointValue.longitude)===Dn(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Dn(i.integerValue)===Dn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Dn(i.doubleValue),a=Dn(s.doubleValue);return o===a?Wf(o)===Wf(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return $l(t.arrayValue.values||[],e.arrayValue.values||[],Ks);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(hV(o)!==hV(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(void 0===a[u]||!Ks(o[u],a[u])))return!1;return!0}(t,e);default:return ve()}var s}function Zf(t,e){return void 0!==(t.values||[]).find(n=>Ks(n,e))}function Ia(t,e){if(t===e)return 0;const n=va(t),r=va(e);if(n!==r)return je(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return je(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Dn(s.integerValue||s.doubleValue),u=Dn(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return mV(t.timestampValue,e.timestampValue);case 4:return mV(qf(t),qf(e));case 5:return je(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Ro(s),u=Ro(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const h=je(a[l],u[l]);if(0!==h)return h}return je(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=je(Dn(s.latitude),Dn(o.latitude));return 0!==a?a:je(Dn(s.longitude),Dn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const h=Ia(a[l],u[l]);if(h)return h}return je(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===ya.mapValue&&o===ya.mapValue)return 0;if(s===ya.mapValue)return 1;if(o===ya.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let g=0;g<u.length&&g<h.length;++g){const m=je(u[g],h[g]);if(0!==m)return m;const y=Ia(a[u[g]],l[h[g]]);if(0!==y)return y}return je(u.length,h.length)}(t.mapValue,e.mapValue);default:throw ve()}}function mV(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return je(t,e);const n=ma(t),r=ma(e),i=je(n.seconds,r.seconds);return 0!==i?i:je(n.nanos,r.nanos)}function Wl(t){return GC(t)}function GC(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ma(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ro(t.bytesValue).toBase64():"referenceValue"in t?le.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=GC(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${GC(n.fields[o])}`;return i+"}"}(t.mapValue):ve()}function xu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function WC(t){return!!t&&"integerValue"in t}function Kf(t){return!!t&&"arrayValue"in t}function _V(t){return!!t&&"nullValue"in t}function yV(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ry(t){return!!t&&"mapValue"in t}function Qf(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ga(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Qf(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Qf(t.arrayValue.values[n]);return e}return Object.assign({},t)}function vV(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function lZ(t){return"nullValue"in t?by:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?xu(_a.empty(),le.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:ve()}function dZ(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?xu(_a.empty(),le.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?ya:ve()}function IV(t,e){const n=Ia(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function EV(t,e){const n=Ia(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class yr{constructor(e){this.value=e}static empty(){return new yr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ry(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qf(n)}setAll(e){let n=sn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Qf(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Ry(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ks(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ry(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ga(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new yr(Qf(this.value))}}function wV(t){const e=[];return ga(t.fields,(n,r)=>{const i=new sn([n]);if(Ry(r)){const s=wV(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new gi(e)}class on{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new on(e,0,Se.min(),Se.min(),Se.min(),yr.empty(),0)}static newFoundDocument(e,n,r,i){return new on(e,1,n,Se.min(),r,i,0)}static newNoDocument(e,n){return new on(e,2,n,Se.min(),Se.min(),yr.empty(),0)}static newUnknownDocument(e,n){return new on(e,3,n,Se.min(),Se.min(),yr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Se.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ea{constructor(e,n){this.position=e,this.inclusive=n}}function DV(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?le.comparator(le.fromName(o.referenceValue),n.key):Ia(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function CV(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ks(t.position[n],e.position[n]))return!1;return!0}class Yf{constructor(e,n="asc"){this.field=e,this.dir=n}}function hZ(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class TV{}class mt extends TV{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new fZ(e,n,r):"array-contains"===n?new mZ(e,r):"in"===n?new MV(e,r):"not-in"===n?new _Z(e,r):"array-contains-any"===n?new yZ(e,r):new mt(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new pZ(e,r):new gZ(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Ia(n,this.value)):null!==n&&va(this.value)===va(n)&&this.matchesComparison(Ia(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ve()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kt extends TV{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new kt(e,n)}matches(e){return ql(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function ql(t){return"and"===t.op}function qC(t){return"or"===t.op}function ZC(t){return AV(t)&&ql(t)}function AV(t){for(const e of t.filters)if(e instanceof kt)return!1;return!0}function KC(t){if(t instanceof mt)return t.field.canonicalString()+t.op.toString()+Wl(t.value);if(ZC(t))return t.filters.map(e=>KC(e)).join(",");{const e=t.filters.map(n=>KC(n)).join(",");return`${t.op}(${e})`}}function bV(t,e){return t instanceof mt?(r=t,(i=e)instanceof mt&&r.op===i.op&&r.field.isEqual(i.field)&&Ks(r.value,i.value)):t instanceof kt?function(r,i){return i instanceof kt&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&bV(o,i.filters[a]),!0)}(t,e):void ve();var r,i}function SV(t,e){const n=t.filters.concat(e);return kt.create(n,t.op)}function RV(t){return t instanceof mt?`${(n=t).field.canonicalString()} ${n.op} ${Wl(n.value)}`:t instanceof kt?function(n){return n.op.toString()+" {"+n.getFilters().map(RV).join(" ,")+"}"}(t):"Filter";var n}class fZ extends mt{constructor(e,n,r){super(e,n,r),this.key=le.fromName(r.referenceValue)}matches(e){const n=le.comparator(e.key,this.key);return this.matchesComparison(n)}}class pZ extends mt{constructor(e,n){super(e,"in",n),this.keys=PV(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class gZ extends mt{constructor(e,n){super(e,"not-in",n),this.keys=PV(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function PV(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>le.fromName(r.referenceValue))}class mZ extends mt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Kf(n)&&Zf(n.arrayValue,this.value)}}class MV extends mt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&Zf(this.value.arrayValue,n)}}class _Z extends mt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Zf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!Zf(this.value.arrayValue,n)}}class yZ extends mt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Kf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Zf(this.value.arrayValue,r))}}class vZ{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function QC(t,e=null,n=[],r=[],i=null,s=null,o=null){return new vZ(t,e,n,r,i,s,o)}function Ou(t){const e=ue(t);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>KC(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Gf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Wl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Wl(r)).join(",")),e.ce=n}return e.ce}function Jf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!hZ(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!bV(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!CV(t.startAt,e.startAt)&&CV(t.endAt,e.endAt)}function Py(t){return le.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function My(t,e){return t.filters.filter(n=>n instanceof mt&&n.field.isEqual(e))}function NV(t,e,n){let r=by,i=!0;for(const s of My(t,e)){let o=by,a=!0;switch(s.op){case"<":case"<=":o=lZ(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=by}IV({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];IV({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}return{value:r,inclusive:i}}function xV(t,e,n){let r=ya,i=!0;for(const s of My(t,e)){let o=ya,a=!0;switch(s.op){case">=":case">":o=dZ(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=ya}EV({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];EV({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}return{value:r,inclusive:i}}class Po{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null}}function OV(t,e,n,r,i,s,o,a){return new Po(t,e,n,r,i,s,o,a)}function Zl(t){return new Po(t)}function kV(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function YC(t){return null!==t.collectionGroup}function Kl(t){const e=ue(t);if(null===e.le){e.le=[];const n=new Set;for(const s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ut(sn.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new Yf(s,r))}),n.has(sn.keyField().canonicalString())||e.le.push(new Yf(sn.keyField(),r))}return e.le}function ni(t){const e=ue(t);return e.he||(e.he=function VV(t,e){if("F"===t.limitType)return QC(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new Yf(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new Ea(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ea(t.startAt.position,t.startAt.inclusive):null;return QC(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,Kl(t))),e.he}function JC(t,e){const n=t.filters.concat([e]);return new Po(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ny(t,e,n){return new Po(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Xf(t,e){return Jf(ni(t),ni(e))&&t.limitType===e.limitType}function FV(t){return`${Ou(ni(t))}|lt:${t.limitType}`}function Ql(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>RV(i)).join(", ")}]`),Gf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Wl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Wl(i)).join(",")),`Target(${r})`}(ni(t))}; limitType=${t.limitType})`}function ep(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):le.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Kl(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(o,a,u){const l=DV(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,Kl(r),i)||r.endAt&&!function(o,a,u){const l=DV(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,Kl(r),i)));var r,i}function LV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function UV(t){return(e,n)=>{let r=!1;for(const i of Kl(t)){const s=IZ(i,e,n);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function IZ(t,e,n){const r=t.field.isKeyField()?le.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return null!==u&&null!==l?Ia(u,l):ve()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ve()}}class Mo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ga(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return fV(this.inner)}size(){return this.innerSize}}const EZ=new Gt(le.comparator);function mi(){return EZ}const BV=new Gt(le.comparator);function tp(...t){let e=BV;for(const n of t)e=e.insert(n.key,n);return e}function jV(t){let e=BV;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Qs(){return np()}function $V(){return np()}function np(){return new Mo(t=>t.toString(),(t,e)=>t.isEqual(e))}const wZ=new Gt(le.comparator),DZ=new Ut(le.comparator);function Qe(...t){let e=DZ;for(const n of t)e=e.add(n);return e}const CZ=new Ut(je);function XC(){return CZ}function HV(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wf(e)?"-0":e}}function zV(t){return{integerValue:""+t}}function GV(t,e){return sV(e)?zV(e):HV(t,e)}class xy{constructor(){this._=void 0}}function TZ(t,e,n){return t instanceof Yl?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Ty(s)&&(s=Ay(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof ku?qV(t,e):t instanceof Vu?ZV(t,e):function(i,s){const o=WV(i,s),a=KV(o)+KV(i.Ie);return WC(o)&&WC(i.Ie)?zV(a):HV(i.serializer,a)}(t,e)}function AZ(t,e,n){return t instanceof ku?qV(t,e):t instanceof Vu?ZV(t,e):n}function WV(t,e){return t instanceof Jl?WC(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class Yl extends xy{}class ku extends xy{constructor(e){super(),this.elements=e}}function qV(t,e){const n=QV(e);for(const r of t.elements)n.some(i=>Ks(i,r))||n.push(r);return{arrayValue:{values:n}}}class Vu extends xy{constructor(e){super(),this.elements=e}}function ZV(t,e){let n=QV(e);for(const r of t.elements)n=n.filter(i=>!Ks(i,r));return{arrayValue:{values:n}}}class Jl extends xy{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function KV(t){return Dn(t.integerValue||t.doubleValue)}function QV(t){return Kf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class rp{constructor(e,n){this.field=e,this.transform=n}}class SZ{constructor(e,n){this.version=e,this.transformResults=n}}class dn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new dn}static exists(e){return new dn(void 0,e)}static updateTime(e){return new dn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Oy(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class ky{}function YV(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new ed(t.key,dn.none()):new Xl(t.key,t.data,dn.none());{const n=t.data,r=yr.empty();let i=new Ut(sn.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);null===o&&s.length>1&&(s=s.popLast(),o=n.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new No(t.key,r,new gi(i.toArray()),dn.none())}}function RZ(t,e,n){t instanceof Xl?function(i,s,o){const a=i.value.clone(),u=eF(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof No?function(i,s,o){if(!Oy(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=eF(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(XV(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function ip(t,e,n,r){return t instanceof Xl?function(s,o,a,u){if(!Oy(s.precondition,o))return a;const l=s.value.clone(),h=tF(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof No?function(s,o,a,u){if(!Oy(s.precondition,o))return a;const l=tF(s.fieldTransforms,u,o),h=o.data;return h.setAll(XV(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,r):(a=n,Oy(t.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function PZ(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=WV(r.transform,i||null);null!=s&&(null===n&&(n=yr.empty()),n.set(r.field,s))}return n||null}function JV(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&$l(r,i,(s,o)=>function bZ(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof ku&&i instanceof ku||r instanceof Vu&&i instanceof Vu?$l(r.elements,i.elements,Ks):r instanceof Jl&&i instanceof Jl?Ks(r.Ie,i.Ie):r instanceof Yl&&i instanceof Yl);var r,i}(s,o))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class Xl extends ky{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class No extends ky{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function XV(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function eF(t,e,n){const r=new Map;Ae(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,AZ(o,a,n[i]))}return r}function tF(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,TZ(s,o,e))}return r}class ed extends ky{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class eT extends ky{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class tT{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&RZ(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ip(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ip(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=$V();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=YV(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Se.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Qe())}isEqual(e){return this.batchId===e.batchId&&$l(this.mutations,e.mutations,(n,r)=>JV(n,r))&&$l(this.baseMutations,e.baseMutations,(n,r)=>JV(n,r))}}class nT{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ae(e.mutations.length===r.length);let i=wZ;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new nT(e,n,r,i)}}class rT{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class NZ{constructor(e,n){this.count=e,this.unchangedNames=n}}var Ln,It;function nF(t){switch(t){default:return ve();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function rF(t){if(void 0===t)return On("GRPC error has no .code"),B.UNKNOWN;switch(t){case Ln.OK:return B.OK;case Ln.CANCELLED:return B.CANCELLED;case Ln.UNKNOWN:return B.UNKNOWN;case Ln.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Ln.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Ln.INTERNAL:return B.INTERNAL;case Ln.UNAVAILABLE:return B.UNAVAILABLE;case Ln.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Ln.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Ln.NOT_FOUND:return B.NOT_FOUND;case Ln.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Ln.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Ln.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Ln.ABORTED:return B.ABORTED;case Ln.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Ln.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Ln.DATA_LOSS:return B.DATA_LOSS;default:return ve()}}(It=Ln||(Ln={}))[It.OK=0]="OK",It[It.CANCELLED=1]="CANCELLED",It[It.UNKNOWN=2]="UNKNOWN",It[It.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",It[It.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",It[It.NOT_FOUND=5]="NOT_FOUND",It[It.ALREADY_EXISTS=6]="ALREADY_EXISTS",It[It.PERMISSION_DENIED=7]="PERMISSION_DENIED",It[It.UNAUTHENTICATED=16]="UNAUTHENTICATED",It[It.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",It[It.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",It[It.ABORTED=10]="ABORTED",It[It.OUT_OF_RANGE=11]="OUT_OF_RANGE",It[It.UNIMPLEMENTED=12]="UNIMPLEMENTED",It[It.INTERNAL=13]="INTERNAL",It[It.UNAVAILABLE=14]="UNAVAILABLE",It[It.DATA_LOSS=15]="DATA_LOSS";function iF(){return new TextEncoder}const xZ=new Ul([4294967295,4294967295],0);function sF(t){const e=iF().encode(t),n=new A7;return n.update(e),new Uint8Array(n.digest())}function oF(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ul([n,r],0),new Ul([i,s],0)]}class iT{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new sp(`Invalid padding: ${n}`);if(r<0)throw new sp(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new sp(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new sp(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Ul.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(Ul.fromNumber(r)));return 1===i.compare(xZ)&&(i=new Ul([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=sF(e),[r,i]=oF(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new iT(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Te)return;const n=sF(e),[r,i]=oF(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class sp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class op{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ap.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new op(Se.min(),i,new Gt(je),mi(),Qe())}}class ap{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ap(r,n,Qe(),Qe(),Qe())}}class Fy{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class aF{constructor(e,n){this.targetId=e,this.fe=n}}class uF{constructor(e,n,r=Zn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class cF{constructor(){this.ge=0,this.pe=dF(),this.ye=Zn.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Qe(),n=Qe(),r=Qe();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ve()}}),new ap(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=dF()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Ae(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class OZ{constructor(e){this.Le=e,this.ke=new Map,this.qe=mi(),this.Qe=lF(),this.Ke=new Gt(je)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:ve()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const s=i.target;if(Py(s))if(0===r){const o=new le(s.path);this.We(n,o,on.newNoDocument(o,Se.min()))}else Ae(1===r);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),u=a?this.et(a,e,o):1;0!==u&&(this.He(n),this.Ke=this.Ke.insert(n,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Ro(r).toUint8Array()}catch(u){if(u instanceof gV)return pi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new iT(o,i,s)}catch(u){return pi(u instanceof sp?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Te?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&Py(a.target)){const u=new le(a.target.path);null!==this.qe.get(u)||this.st(o,u)||this.We(o,u,on.newNoDocument(u,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=Qe();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Ye(u);return!l||"TargetPurposeLimboResolution"===l.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const i=new op(e,n,this.Ke,this.qe,r);return this.qe=mi(),this.Qe=lF(),this.Ke=new Gt(je),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new cF,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Ut(je),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||ne("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new cF),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function lF(){return new Gt(le.comparator)}function dF(){return new Gt(le.comparator)}const kZ={asc:"ASCENDING",desc:"DESCENDING"},VZ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FZ={and:"AND",or:"OR"};class LZ{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function sT(t,e){return t.useProto3Json||Gf(e)?e:{value:e}}function td(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hF(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function UZ(t,e){return td(t,e.toTimestamp())}function kn(t){return Ae(!!t),Se.fromTimestamp(function(n){const r=ma(n);return new ln(r.seconds,r.nanos)}(t))}function oT(t,e){return aT(t,e).canonicalString()}function aT(t,e){const n=(i=t,new gt(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?n:n.child(e)}function fF(t){const e=gt.fromString(t);return Ae(DF(e)),e}function up(t,e){return oT(t.databaseId,e.path)}function Ys(t,e){const n=fF(e);if(n.get(1)!==t.databaseId.projectId)throw new X(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new X(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new le(mF(n))}function pF(t,e){return oT(t.databaseId,e)}function gF(t){const e=fF(t);return 4===e.length?gt.emptyPath():mF(e)}function uT(t){return new gt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function mF(t){return Ae(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function _F(t,e,n){return{name:up(t,e),fields:n.value.mapValue.fields}}function yF(t,e,n){const r=Ys(t,e.name),i=kn(e.updateTime),s=e.createTime?kn(e.createTime):Se.min(),o=new yr({mapValue:{fields:e.fields}}),a=on.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function cp(t,e){let n;if(e instanceof Xl)n={update:_F(t,e.key,e.value)};else if(e instanceof ed)n={delete:up(t,e.key)};else if(e instanceof No)n={update:_F(t,e.key,e.data),updateMask:qZ(e.fieldMask)};else{if(!(e instanceof eT))return ve();n={verify:up(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Yl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ku)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Vu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Jl)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw ve()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:UZ(t,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:ve()),n;var s}function cT(t,e){const n=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?dn.updateTime(kn(s.updateTime)):void 0!==s.exists?dn.exists(s.exists):dn.none():dn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;"setToServerValue"in a?(Ae("REQUEST_TIME"===a.setToServerValue),u=new Yl):"appendMissingElements"in a?u=new ku(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new Vu(a.removeAllFromArray.values||[]):"increment"in a?u=new Jl(o,a.increment):ve();const l=sn.fromServerFormat(a.fieldPath);return new rp(l,u)}(t,i)):[];var s;if(e.update){const i=Ys(t,e.update.name),s=new yr({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new gi((e.updateMask.fieldPaths||[]).map(h=>sn.fromServerFormat(h)));return new No(i,s,o,n,r)}return new Xl(i,s,n,r)}if(e.delete){const i=Ys(t,e.delete);return new ed(i,n)}if(e.verify){const i=Ys(t,e.verify);return new eT(i,n)}return ve()}function vF(t,e){return{documents:[pF(t,e.path)]}}function lT(t,e){const n={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=pF(t,i);const s=function(l){if(0!==l.length)return wF(kt.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(0!==l.length)return l.map(h=>{return{field:wa((m=h).field),direction:zZ(m.dir)};var m})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=sT(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ut:n,parent:i};var l}function IF(t){let e=gF(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ae(1===r);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(g){const m=EF(g);return m instanceof kt&&ZC(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(m=>{return new Yf(nd((C=m).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction));var C}));let a=null;n.limit&&(a=function(g){let m;return m="object"==typeof g?g.value:g,Gf(m)?null:m}(n.limit));let u=null;var g;n.startAt&&(u=new Ea((g=n.startAt).values||[],!!g.before));let l=null;return n.endAt&&(l=function(g){return new Ea(g.values||[],!g.before)}(n.endAt)),OV(e,i,o,s,a,"F",u,l)}function EF(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=nd(n.unaryFilter.field);return mt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=nd(n.unaryFilter.field);return mt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=nd(n.unaryFilter.field);return mt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=nd(n.unaryFilter.field);return mt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ve()}}(t):void 0!==t.fieldFilter?mt.create(nd((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ve()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return kt.create(n.compositeFilter.filters.map(r=>EF(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ve()}}(n.compositeFilter.op))}(t):ve();var n}function zZ(t){return kZ[t]}function GZ(t){return VZ[t]}function WZ(t){return FZ[t]}function wa(t){return{fieldPath:t.canonicalString()}}function nd(t){return sn.fromServerFormat(t.fieldPath)}function wF(t){return t instanceof mt?function(n){if("=="===n.op){if(yV(n.value))return{unaryFilter:{field:wa(n.field),op:"IS_NAN"}};if(_V(n.value))return{unaryFilter:{field:wa(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(yV(n.value))return{unaryFilter:{field:wa(n.field),op:"IS_NOT_NAN"}};if(_V(n.value))return{unaryFilter:{field:wa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wa(n.field),op:GZ(n.op),value:n.value}}}(t):t instanceof kt?function(n){const r=n.getFilters().map(i=>wF(i));return 1===r.length?r[0]:{compositeFilter:{op:WZ(n.op),filters:r}}}(t):ve()}function qZ(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function DF(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class xo{constructor(e,n,r,i,s=Se.min(),o=Se.min(),a=Zn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new xo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new xo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class CF{constructor(e){this.ct=e}}function TF(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Ly(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:up(s=t.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:td(s,o.version.toTimestamp()),createTime:td(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Fu(e.version)};else{if(!e.isUnknownDocument())return ve();r.unknownDocument={path:n.path.toArray(),version:Fu(e.version)}}var s,o;return r}function Ly(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Fu(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Lu(t){const e=new ln(t.seconds,t.nanoseconds);return Se.fromTimestamp(e)}function Uu(t,e){const n=(e.baseMutations||[]).map(s=>cT(t.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>cT(t.ct,s)),i=ln.fromMillis(e.localWriteTimeMs);return new tT(e.batchId,i,n,r)}function lp(t){const e=Lu(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?Lu(t.lastLimboFreeSnapshotVersion):Se.min();let r;return r=void 0!==t.query.documents?(Ae(1===(s=t.query).documents.length),ni(Zl(gF(s.documents[0])))):function(s){return ni(IF(s))}(t.query),new xo(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Zn.fromBase64String(t.resumeToken));var s}function AF(t,e){const n=Fu(e.snapshotVersion),r=Fu(e.lastLimboFreeSnapshotVersion);let i;i=Py(e.target)?vF(t.ct,e.target):lT(t.ct,e.target).ut;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ou(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function dT(t){const e=IF({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Ny(e,e.limit,"L"):e}function hT(t,e){return new rT(e.largestBatchId,cT(t.ct,e.overlayMutation))}function bF(t,e){const n=e.path.lastSegment();return[t,xr(e.path.popLast()),n]}function SF(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Fu(r.readTime),documentKey:xr(r.documentKey.path),largestBatchId:r.largestBatchId}}class KZ{getBundleMetadata(e,n){return RF(e).get(n).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Lu(s.createTime),version:s.version};var s})}saveBundleMetadata(e,n){return RF(e).put({bundleId:(i=n).id,createTime:Fu(kn(i.createTime)),version:i.version});var i}getNamedQuery(e,n){return PF(e).get(n).next(r=>{if(r)return{name:(s=r).name,query:dT(s.bundledQuery),readTime:Lu(s.readTime)};var s})}saveNamedQuery(e,n){return PF(e).put({name:(i=n).name,readTime:Fu(kn(i.readTime)),bundledQuery:i.bundledQuery});var i}}function RF(t){return ur(t,"bundles")}function PF(t){return ur(t,"namedQueries")}class Uy{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){return new Uy(e,n.uid||"")}getOverlay(e,n){return dp(e).get(bF(this.userId,n)).next(r=>r?hT(this.serializer,r):null)}getOverlays(e,n){const r=Qs();return O.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new rT(n,o);i.push(this.ht(e,a))}),O.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(xr(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(dp(e).H("collectionPathOverlayIndex",a))}),O.waitFor(s)}getOverlaysForCollection(e,n,r){const i=Qs(),s=xr(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return dp(e).W("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const l=hT(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=Qs();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return dp(e).Y({index:"collectionGroupOverlayIndex",range:a},(u,l,h)=>{const g=hT(this.serializer,l);s.size()<i||g.largestBatchId===o?(s.set(g.getKey(),g),o=g.largestBatchId):h.done()}).next(()=>s)}ht(e,n){return dp(e).put(function(i,s,o){const[a,u,l]=bF(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:cp(i.ct,o.mutation)}}(this.serializer,this.userId,n))}}function dp(t){return ur(t,"documentOverlays")}class Bu{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Dn(e.integerValue));else if("doubleValue"in e){const r=Dn(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),Wf(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Et(n,20),"string"==typeof r?n.At(r):(n.At(`${r.seconds||""}`),n.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Ro(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?vV(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):ve()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){const r=e.fields||{};this.Et(n,55);for(const i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){const r=e.values||[];this.Et(n,50);for(const i of r)this.It(i,n)}gt(e,n){this.Et(n,37),le.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}}function QZ(t){if(0===t)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function MF(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=QZ(255&r[s]);if(i+=o,8!==o)break}return i}(t);return Math.ceil(e/8)}Bu.bt=new Bu;class YZ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Bt(e){const n=this.Lt(e),r=MF(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){const n=this.Lt(e),r=MF(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(e){const n=255&e;0===n?(this.Kt(0),this.Kt(255)):255===n?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){const n=255&e;0===n?(this.Ut(0),this.Ut(255)):255===n?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class JZ{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}}class XZ{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class hp{constructor(){this.Gt=new YZ,this.zt=new JZ(this.Gt),this.jt=new XZ(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class ju{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ju(this.indexId,this.documentKey,this.arrayValue,r)}}function Da(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=NF(t.arrayValue,e.arrayValue),0!==n?n:(n=NF(t.directionalValue,e.directionalValue),0!==n?n:le.comparator(t.documentKey,e.documentKey)))}function NF(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(0!==r)return r}return t.length-e.length}class xF{constructor(e){this.Yt=new Ut((n,r)=>sn.comparator(n.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(Ae(e.collectionGroup===this.collectionId),this.en)return!1;const n=BC(e);if(void 0!==n&&!this.nn(n))return!1;const r=Pu(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[s];if(!this.rn(a,u)||!this.sn(this.Zt[o++],u))return!1}++s}for(;s<r.length;++s)if(o>=this.Zt.length||!this.sn(this.Zt[o++],r[s]))return!1;return!0}on(){if(this.en)return null;let e=new Ut(sn.comparator);const n=[];for(const r of this.Xt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)n.push(new Mu(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Mu(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Mu(r.field,"asc"===r.dir?0:1)));return new Hl(Hl.UNKNOWN_ID,this.collectionId,n,zl.empty())}nn(e){for(const n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function OF(t){var e,n;if(Ae(t instanceof mt||t instanceof kt),t instanceof mt){if(t instanceof MV){const i=(null===(n=null===(e=t.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(s=>mt.create(t.field,"==",s)))||[];return kt.create(i,"or")}return t}const r=t.filters.map(i=>OF(i));return kt.create(r,t.op)}function eK(t){if(0===t.getFilters().length)return[];const e=gT(OF(t));return Ae(kF(e)),fT(e)||pT(e)?[e]:e.getFilters()}function fT(t){return t instanceof mt}function pT(t){return t instanceof kt&&ZC(t)}function kF(t){return fT(t)||pT(t)||function(n){if(n instanceof kt&&qC(n)){for(const r of n.getFilters())if(!fT(r)&&!pT(r))return!1;return!0}return!1}(t)}function gT(t){if(Ae(t instanceof mt||t instanceof kt),t instanceof mt)return t;if(1===t.filters.length)return gT(t.filters[0]);const e=t.filters.map(r=>gT(r));let n=kt.create(e,t.op);return n=By(n),kF(n)?n:(Ae(n instanceof kt),Ae(ql(n)),Ae(n.filters.length>1),n.filters.reduce((r,i)=>mT(r,i)))}function mT(t,e){let n;return Ae(t instanceof mt||t instanceof kt),Ae(e instanceof mt||e instanceof kt),n=t instanceof mt?e instanceof mt?kt.create([t,e],"and"):VF(t,e):e instanceof mt?VF(e,t):function(i,s){if(Ae(i.filters.length>0&&s.filters.length>0),ql(i)&&ql(s))return SV(i,s.getFilters());const o=qC(i)?i:s,a=qC(i)?s:i,u=o.filters.map(l=>mT(l,a));return kt.create(u,"or")}(t,e),By(n)}function VF(t,e){if(ql(e))return SV(e,t.getFilters());{const n=e.filters.map(r=>mT(t,r));return kt.create(n,"or")}}function By(t){if(Ae(t instanceof mt||t instanceof kt),t instanceof mt)return t;const e=t.getFilters();if(1===e.length)return By(e[0]);if(AV(t))return t;const n=e.map(i=>By(i)),r=[];return n.forEach(i=>{i instanceof mt?r.push(i):i instanceof kt&&(i.op===t.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:kt.create(r,t.op)}class tK{constructor(){this._n=new _T}addToCollectionParentIndex(e,n){return this._n.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(Vi.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(Vi.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class _T{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ut(gt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ut(gt.comparator)).toArray()}}const jy=new Uint8Array(0);class nK{constructor(e,n){this.databaseId=n,this.an=new _T,this.un=new Mo(r=>Ou(r),(r,i)=>Jf(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});const s={collectionId:r,parent:xr(i)};return FF(e).put(s)}return O.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[Xk(n),""],!1,!0);return FF(e).W(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(Zs(o.parent))}return r})}addFieldIndex(e,n){const r=fp(e),i={indexId:(a=n).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const s=r.add(i);if(n.indexState){const o=id(e);return s.next(a=>{o.put(SF(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=fp(e),i=id(e),s=rd(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=fp(e),r=rd(e),i=id(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return O.forEach(this.cn(n),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new xF(r).on();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=rd(e);let i=!0;const s=new Map;return O.forEach(this.cn(n),o=>this.ln(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=Qe();const a=[];return O.forEach(s,(u,l)=>{var $;ne("IndexedDbIndexManager",`Using index ${$=u,`id=${$.indexId}|cg=${$.collectionGroup}|f=${$.fields.map(re=>`${re.fieldPath}:${re.kind}`).join(",")}`} to execute ${Ou(n)}`);const h=function($,re){const de=BC(re);if(void 0===de)return null;for(const $e of My($,de.fieldPath))switch($e.op){case"array-contains-any":return $e.value.arrayValue.values||[];case"array-contains":return[$e.value]}return null}(l,u),g=function($,re){const de=new Map;for(const $e of Pu(re))for(const St of My($,$e.fieldPath))switch(St.op){case"==":case"in":de.set($e.fieldPath.canonicalString(),St.value);break;case"not-in":case"!=":return de.set($e.fieldPath.canonicalString(),St.value),Array.from(de.values())}return null}(l,u),m=function($,re){const de=[];let $e=!0;for(const St of Pu(re)){const Kn=0===St.kind?NV($,St.fieldPath,$.startAt):xV($,St.fieldPath,$.startAt);de.push(Kn.value),$e&&($e=Kn.inclusive)}return new Ea(de,$e)}(l,u),y=function($,re){const de=[];let $e=!0;for(const St of Pu(re)){const Kn=0===St.kind?xV($,St.fieldPath,$.endAt):NV($,St.fieldPath,$.endAt);de.push(Kn.value),$e&&($e=Kn.inclusive)}return new Ea(de,$e)}(l,u),C=this.hn(u,l,m),S=this.hn(u,l,y),M=this.Pn(u,l,g),V=this.In(u.indexId,h,C,m.inclusive,S,y.inclusive,M);return O.forEach(V,x=>r.j(x,n.limit).next($=>{$.forEach(re=>{const de=le.fromSegments(re.documentKey);o.has(de)||(o=o.add(de),a.push(de))})}))}).next(()=>a)}return O.resolve(null)})}cn(e){let n=this.un.get(e);return n||(n=0===e.filters.length?[e]:eK(kt.create(e.filters,"and")).map(r=>QC(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,i,s,o,a){const u=(null!=n?n.length:1)*Math.max(r.length,s.length),l=u/(null!=n?n.length:1),h=[];for(let g=0;g<u;++g){const m=n?this.Tn(n[g/l]):jy,y=this.En(e,m,r[g%l],i),C=this.dn(e,m,s[g%l],o),S=a.map(M=>this.En(e,m,M,!0));h.push(...this.createRange(y,C,S))}return h}En(e,n,r,i){const s=new ju(e,le.empty(),n,r);return i?s:s.Jt()}dn(e,n,r,i){const s=new ju(e,le.empty(),n,r);return i?s.Jt():s}ln(e,n){const r=new xF(n),i=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.cn(n);return O.forEach(i,s=>this.ln(e,s).next(o=>{o?0!==r&&o.fields.length<function(u){let l=new Ut(sn.comparator),h=!1;for(const g of u.filters)for(const m of g.getFlattenedFilters())m.field.isKeyField()||("array-contains"===m.op||"array-contains-any"===m.op?h=!0:l=l.add(m.field));for(const g of u.orderBy)g.field.isKeyField()||(l=l.add(g.field));return l.size+(h?1:0)}(s)&&(r=1):r=0})).next(()=>null!==n.limit&&i.length>1&&2===r?1:r)}An(e,n){const r=new hp;for(const i of Pu(e)){const s=n.data.field(i.fieldPath);if(null==s)return null;const o=r.Ht(i.kind);Bu.bt.Pt(s,o)}return r.Wt()}Tn(e){const n=new hp;return Bu.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){const r=new hp;return Bu.bt.Pt(xu(this.databaseId,n),r.Ht(function(s){const o=Pu(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(null===r)return[];let i=[];i.push(new hp);let s=0;for(const o of Pu(e)){const a=r[s++];for(const u of i)if(this.Vn(n,o.fieldPath)&&Kf(a))i=this.mn(i,o,a);else{const l=u.Ht(o.kind);Bu.bt.Pt(a,l)}}return this.fn(i)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new hp;u.seed(a.Wt()),Bu.bt.Pt(o,u.Ht(n.kind)),s.push(u)}return s}Vn(e,n){return!!e.filters.find(r=>r instanceof mt&&r.field.isEqual(n)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,n){const r=fp(e),i=id(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(s=>{const o=[];return O.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(h,g){const m=g?new zl(g.sequenceNumber,new Vi(Lu(g.readTime),new le(Zs(g.documentKey)),g.largestBatchId)):zl.empty(),y=h.fields.map(([C,S])=>new Mu(sn.fromServerFormat(C),S));return new Hl(h.indexId,h.collectionGroup,y,m)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:je(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=fp(e),s=id(e);return this.gn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>O.forEach(a,u=>s.put(SF(u.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return O.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?O.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),O.forEach(a,u=>this.pn(e,i,u).next(l=>{const h=this.yn(s,u);return l.isEqual(h)?O.resolve():this.wn(e,s,u,l,h)}))))})}Sn(e,n,r,i){return rd(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,i){return rd(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){const i=rd(e);let s=new Ut(Da);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(o,a)=>{s=s.add(new ju(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,n){let r=new Ut(Da);const i=this.An(n,e);if(null==i)return r;const s=BC(n);if(null!=s){const o=e.data.field(s.fieldPath);if(Kf(o))for(const a of o.arrayValue.values||[])r=r.add(new ju(n.indexId,e.key,this.Tn(a),i))}else r=r.add(new ju(n.indexId,e.key,jy,i));return r}wn(e,n,r,i,s){ne("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(u,l,h,g,m){const y=u.getIterator(),C=l.getIterator();let S=Gl(y),M=Gl(C);for(;S||M;){let V=!1,x=!1;if(S&&M){const $=h(S,M);$<0?x=!0:$>0&&(V=!0)}else null!=S?x=!0:V=!0;V?(g(M),M=Gl(C)):x?(m(S),S=Gl(y)):(S=Gl(y),M=Gl(C))}}(i,s,Da,a=>{o.push(this.Sn(e,n,r,a))},a=>{o.push(this.bn(e,n,r,a))}),O.waitFor(o)}gn(e){let n=1;return id(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Da(o,a)).filter((o,a,u)=>!a||0!==Da(o,u[a-1]));const i=[];i.push(e);for(const o of r){const a=Da(o,e),u=Da(o,n);if(0===a)i[0]=e.Jt();else if(a>0&&u<0)i.push(o),i.push(o.Jt());else if(u>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Dn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,jy,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,jy,[]]))}return s}Dn(e,n){return Da(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(LF)}getMinOffset(e,n){return O.mapArray(this.cn(n),r=>this.ln(e,r).next(i=>i||ve())).next(LF)}}function FF(t){return ur(t,"collectionParents")}function rd(t){return ur(t,"indexEntries")}function fp(t){return ur(t,"indexConfiguration")}function id(t){return ur(t,"indexState")}function LF(t){Ae(0!==t.length);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;jC(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Vi(e.readTime,e.documentKey,n)}const UF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Or{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Or(e,Or.DEFAULT_COLLECTION_PERCENTILE,Or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function BF(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.Y({range:o},(h,g,m)=>(a++,m.delete()));s.push(u.next(()=>{Ae(1===a)}));const l=[];for(const h of n.mutations){const g=uV(e,h.key.path,n.batchId);s.push(i.delete(g)),l.push(h.key)}return O.waitFor(s).next(()=>l)}function $y(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ve();e=t.noDocument}return JSON.stringify(e).length}Or.DEFAULT_COLLECTION_PERCENTILE=10,Or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Or.DEFAULT=new Or(41943040,Or.DEFAULT_COLLECTION_PERCENTILE,Or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Or.DISABLED=new Or(-1,0,0);class Hy{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,n,r,i){Ae(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new Hy(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ca(e).Y({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=sd(e),o=Ca(e);return o.add({}).next(a=>{Ae("number"==typeof a);const u=new tT(a,n,r,i),l=function(y,C,S){const M=S.baseMutations.map(x=>cp(y.ct,x)),V=S.mutations.map(x=>cp(y.ct,x));return{userId:C,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:M,mutations:V}}(this.serializer,this.userId,u),h=[];let g=new Ut((m,y)=>je(m.canonicalString(),y.canonicalString()));for(const m of i){const y=uV(this.userId,m.key.path,a);g=g.add(m.key.path.popLast()),h.push(o.put(l)),h.push(s.put(y,z7))}return g.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Cn[a]=u.keys()}),O.waitFor(h).next(()=>u)})}lookupMutationBatch(e,n){return Ca(e).get(n).next(r=>r?(Ae(r.userId===this.userId),Uu(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?O.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Ca(e).Y({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(Ae(a.batchId>=r),s=Uu(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ca(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ca(e).W("userMutationsIndex",n).next(r=>r.map(i=>Uu(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Dy(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return sd(e).Y({range:i},(o,a,u)=>{const[l,h,g]=o,m=Zs(h);if(l===this.userId&&n.path.isEqual(m))return Ca(e).get(g).next(y=>{if(!y)throw ve();Ae(y.userId===this.userId),s.push(Uu(this.serializer,y))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ut(je);const i=[];return n.forEach(s=>{const o=Dy(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=sd(e).Y({range:a},(l,h,g)=>{const[m,y,C]=l,S=Zs(y);m===this.userId&&s.path.isEqual(S)?r=r.add(C):g.done()});i.push(u)}),O.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=Dy(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Ut(je);return sd(e).Y({range:o},(u,l,h)=>{const[g,m,y]=u,C=Zs(m);g===this.userId&&r.isPrefixOf(C)?C.length===i&&(a=a.add(y)):h.done()}).next(()=>this.Fn(e,a))}Fn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Ca(e).get(s).next(o=>{if(null===o)throw ve();Ae(o.userId===this.userId),r.push(Uu(this.serializer,o))}))}),O.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return BF(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),O.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return O.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return sd(e).Y({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=Zs(s[1]);i.push(u)}else a.done()}).next(()=>{Ae(0===i.length)})})}containsKey(e,n){return jF(e,this.userId,n)}xn(e){return $F(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function jF(t,e,n){const r=Dy(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return sd(t).Y({range:s,J:!0},(a,u,l)=>{const[h,g,m]=a;h===e&&g===i&&(o=!0),l.done()}).next(()=>o)}function Ca(t){return ur(t,"mutations")}function sd(t){return ur(t,"documentMutations")}function $F(t){return ur(t,"mutationQueues")}class $u{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new $u(0)}static Bn(){return new $u(-1)}}class rK{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Ln(e).next(n=>{const r=new $u(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ln(e).next(n=>Se.fromTimestamp(new ln(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ln(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Ln(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(e,i)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Ln(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>od(e).delete(n.targetId)).next(()=>this.Ln(e)).next(r=>(Ae(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return od(e).Y((o,a)=>{const u=lp(a);u.sequenceNumber<=n&&null===r.get(u.targetId)&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>O.waitFor(s)).next(()=>i)}forEachTarget(e,n){return od(e).Y((r,i)=>{const s=lp(i);n(s)})}Ln(e){return HF(e).get("targetGlobalKey").next(n=>(Ae(null!==n),n))}kn(e,n){return HF(e).put("targetGlobalKey",n)}qn(e,n){return od(e).put(AF(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ln(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Ou(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return od(e).Y({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const l=lp(a);Jf(n,l.target)&&(s=l,u.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Ta(e);return n.forEach(o=>{const a=xr(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),O.waitFor(i)}removeMatchingKeys(e,n,r){const i=Ta(e);return O.forEach(n,s=>{const o=xr(s.path);return O.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Ta(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Ta(e);let s=Qe();return i.Y({range:r,J:!0},(o,a,u)=>{const l=Zs(o[1]),h=new le(l);s=s.add(h)}).next(()=>s)}containsKey(e,n){const r=xr(n.path),i=IDBKeyRange.bound([r],[Xk(r)],!1,!0);let s=0;return Ta(e).Y({index:"documentTargetsIndex",J:!0,range:i},([o,a],u,l)=>{0!==o&&(s++,l.done())}).next(()=>s>0)}_t(e,n){return od(e).get(n).next(r=>r?lp(r):null)}}function od(t){return ur(t,"targets")}function HF(t){return ur(t,"targetGlobal")}function Ta(t){return ur(t,"targetDocuments")}function zF([t,e],[n,r]){const i=je(t,n);return 0===i?je(e,r):i}class iK{constructor(e){this.Kn=e,this.buffer=new Ut(zF),this.$n=0}Un(){return++this.$n}Wn(e){const n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();zF(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class GF{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var n=this;ne("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,q.Z)(function*(){n.Gn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(r){pa(r)?ne("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield fa(r)}yield n.zn(3e5)}))}}class sK{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(0===n)return O.resolve(Fi._e);const r=new iK(n);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(UF)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),UF):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,i,s,o,a,u,l;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,n))).next(g=>(s=g,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(l=Date.now(),jl()<=zs.in.DEBUG&&ne("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-h}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(u-a)+`ms\n\tRemoved ${g} documents in `+(l-u)+`ms\nTotal Duration: ${l-h}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}}class oK{constructor(e,n){this.db=e,this.garbageCollector=function WF(t,e){return new sK(t,e)}(this,n)}Hn(e){const n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,i)=>n(i))}addReference(e,n,r){return zy(e,r)}removeReference(e,n,r){return zy(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return zy(e,n)}er(e,n){return function(i,s){let o=!1;return $F(i).Z(a=>jF(i,a,s).next(u=>(u&&(o=!0),O.resolve(!u)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Xn(e,(o,a)=>{if(a<=n){const u=this.er(e,o).next(l=>{if(!l)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Se.min()),Ta(e).delete([0,xr(o.path)])))});i.push(u)}}).next(()=>O.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return zy(e,n)}Xn(e,n){const r=Ta(e);let i,s=Fi._e;return r.Y({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:l})=>{0===o?(s!==Fi._e&&n(new le(Zs(i)),s),s=l,i=u):s=Fi._e}).next(()=>{s!==Fi._e&&n(new le(Zs(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function zy(t,e){return Ta(t).put((i=t.currentSequenceNumber,{targetId:0,path:xr(e.path),sequenceNumber:i}));var i}class qF{constructor(){this.changes=new Mo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class aK{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Hu(e).put(r)}removeEntry(e,n,r){return Hu(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Ly(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=on.newInvalidDocument(n);return Hu(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(pp(n))},(i,s)=>{r=this.nr(n,s)}).next(()=>r)}rr(e,n){let r={size:0,document:on.newInvalidDocument(n)};return Hu(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(pp(n))},(i,s)=>{r={document:this.nr(n,s),size:$y(s)}}).next(()=>r)}getEntries(e,n){let r=mi();return this.ir(e,n,(i,s)=>{const o=this.nr(i,s);r=r.insert(i,o)}).next(()=>r)}sr(e,n){let r=mi(),i=new Gt(le.comparator);return this.ir(e,n,(s,o)=>{const a=this.nr(s,o);r=r.insert(s,a),i=i.insert(s,$y(o))}).next(()=>({documents:r,_r:i}))}ir(e,n,r){if(n.isEmpty())return O.resolve();let i=new Ut(YF);n.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(pp(i.first()),pp(i.last())),o=i.getIterator();let a=o.getNext();return Hu(e).Y({index:"documentKeyIndex",range:s},(u,l,h)=>{const g=le.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&YF(a,g)<0;)r(a,null),a=o.getNext();a&&a.isEqual(g)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?h.U(pp(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Ly(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Hu(e).W(IDBKeyRange.bound(a,u,!0)).next(l=>{s?.incrementDocumentReadCount(l.length);let h=mi();for(const g of l){const m=this.nr(le.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);m.isFoundDocument()&&(ep(n,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,n,r,i){let s=mi();const o=QF(n,r),a=QF(n,Vi.max());return Hu(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,l,h)=>{const g=this.nr(le.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(g.key,g),s.size===i&&h.done()}).next(()=>s)}newChangeBuffer(e){return new uK(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return KF(e).get("remoteDocumentGlobalKey").next(n=>(Ae(!!n),n))}tr(e,n){return KF(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){const r=function ZZ(t,e){let n;if(e.document)n=yF(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=le.fromSegments(e.noDocument.path),i=Lu(e.noDocument.readTime);n=on.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ve();{const r=le.fromSegments(e.unknownDocument.path),i=Lu(e.unknownDocument.version);n=on.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new ln(i[0],i[1]);return Se.fromTimestamp(s)}(e.readTime)),n}(this.serializer,n);if(!r.isNoDocument()||!r.version.isEqual(Se.min()))return r}return on.newInvalidDocument(e)}}function ZF(t){return new aK(t)}class uK extends qF{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new Mo(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Ut((s,o)=>je(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ur.get(s);if(n.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=TF(this.ar.serializer,o);i=i.add(s.path.popLast());const l=$y(u);r+=l-a.size,n.push(this.ar.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=TF(this.ar.serializer,o.convertToNoDocument(Se.min()));n.push(this.ar.addEntry(e,s,u))}}),i.forEach(s=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.ar.updateMetadata(e,r)),O.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:i})=>(i.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function KF(t){return ur(t,"remoteDocumentGlobal")}function Hu(t){return ur(t,"remoteDocumentsV14")}function pp(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function QF(t,e){const n=e.documentKey.path.toArray();return[t,Ly(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function YF(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=je(n[s],r[s]),i)return i;return i=je(n.length,r.length),i||(i=je(n[n.length-2],r[r.length-2]),i||je(n[n.length-1],r[r.length-1]))}class cK{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class JF{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&ip(r.mutation,i,gi.empty(),ln.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Qe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Qe()){const i=Qs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=tp();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Qs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Qe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=mi();const o=np(),a=np();return n.forEach((u,l)=>{const h=r.get(l.key);i.has(l.key)&&(void 0===h||h.mutation instanceof No)?s=s.insert(l.key,l):void 0!==h?(o.set(l.key,h.mutation.getFieldMask()),ip(h.mutation,l,h.mutation.getFieldMask(),ln.now())):o.set(l.key,gi.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),n.forEach((l,h)=>{var g;return a.set(l,new cK(h,null!==(g=o.get(l))&&void 0!==g?g:null))}),a))}recalculateAndSaveOverlays(e,n){const r=np();let i=new Gt((o,a)=>o-a),s=Qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(null===l)return;let h=r.get(u)||gi.empty();h=a.applyToLocalView(l,h),r.set(u,h);const g=(i.get(a.batchId)||Qe()).add(u);i=i.insert(a.batchId,g)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,h=u.value,g=$V();h.forEach(m=>{if(!s.has(m)){const y=YV(n.get(m),r.get(m));null!==y&&g.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,g))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return le.isDocumentKey((o=n).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):YC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var o}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):O.resolve(Qs());let a=-1,u=s;return o.next(l=>O.forEach(l,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,Qe())).next(h=>({batchId:a,changes:jV(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new le(n)).next(r=>{let i=tp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=tp();return this.indexManager.getCollectionParents(e,s).next(a=>O.forEach(a,u=>{const l=(g=n,m=u.child(s),new Po(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,m;return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((g,m)=>{o=o.insert(g,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const h=l.getKey();null===o.get(h)&&(o=o.insert(h,on.newInvalidDocument(h)))});let a=tp();return o.forEach((u,l)=>{const h=s.get(u);void 0!==h&&ip(h.mutation,l,gi.empty(),ln.now()),ep(n,l)&&(a=a.insert(u,l))}),a})}}class lK{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return O.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,{id:(i=n).id,version:i.version,createTime:kn(i.createTime)}),O.resolve();var i}getNamedQuery(e,n){return O.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,{name:(i=n).name,query:dT(i.bundledQuery),readTime:kn(i.readTime)}),O.resolve();var i}}class dK{constructor(){this.overlays=new Gt(le.comparator),this.hr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Qs();return O.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),O.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const i=Qs(),s=n.length+1,o=new le(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return O.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Gt((l,h)=>l-h);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=s.get(l.largestBatchId);null===h&&(h=Qs(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}const a=Qs(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return O.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new rT(n,r));let s=this.hr.get(n);void 0===s&&(s=Qe(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}class yT{constructor(){this.Pr=new Ut(cr.Ir),this.Tr=new Ut(cr.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new cr(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new cr(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new le(new gt([])),r=new cr(n,e),i=new cr(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new le(new gt([])),r=new cr(n,e),i=new cr(n,e+1);let s=Qe();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new cr(e,0),r=this.Pr.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class cr{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return le.comparator(e.key,n.key)||je(e.pr,n.pr)}static Er(e,n){return je(e.pr,n.pr)||le.comparator(e.key,n.key)}}class hK{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Ut(cr.Ir)}checkEmpty(e){return O.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++;const o=new tT(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new cr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.br(n+1),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new cr(n,0),i=new cr(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ut(je);return n.forEach(i=>{const s=new cr(i,0),o=new cr(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),O.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;le.isDocumentKey(s)||(s=s.child(""));const o=new cr(new le(s),0);let a=new Ut(je);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),O.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){Ae(0===this.Cr(n.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return O.forEach(n.mutations,i=>{const s=new cr(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new cr(n,0),i=this.wr.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return O.resolve()}Cr(e,n){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class fK{constructor(e){this.vr=e,this.docs=new Gt(le.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():on.newInvalidDocument(n))}getEntries(e,n){let r=mi();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():on.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=mi();const o=n.path,a=new le(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||jC(tV(h),r)<=0||(i.has(h.key)||ep(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ve()}Fr(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new pK(this)}getSize(e){return O.resolve(this.size)}}class pK extends qF{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}class gK{constructor(e){this.persistence=e,this.Mr=new Mo(n=>Ou(n),Jf),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.Or=0,this.Nr=new yT,this.targetCount=0,this.Br=$u.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),O.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new $u(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.qn(n),O.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.Nr.containsKey(n))}}class vT{constructor(e,n){this.Lr={},this.overlays={},this.kr=new Fi(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new gK(this),this.indexManager=new tK,this.remoteDocumentCache=new fK(r=>this.referenceDelegate.Kr(r)),this.serializer=new CF(n),this.$r=new lK(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new dK,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new hK(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){ne("MemoryPersistence","Starting transaction:",e);const i=new mK(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return O.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}}class mK extends rV{constructor(e){super(),this.currentSequenceNumber=e}}class Gy{constructor(e){this.persistence=e,this.zr=new yT,this.jr=null}static Hr(e){return new Gy(e)}get Jr(){if(this.jr)return this.jr;throw ve()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),O.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Jr,r=>{const i=le.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,Se.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return O.or([()=>O.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}class _K{constructor(e){this.serializer=e}N(e,n,r,i){const s=new wy("createOrUpgrade",n);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",aV,{unique:!0}),u.createObjectStore("documentMutations"),XF(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=O.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),XF(e)),o=o.next(()=>function(u){const l=u.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Se.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(u,l){return l.store("mutations").W().next(h=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",aV,{unique:!0});const g=l.store("mutations"),m=h.map(y=>g.put(y));return O.waitFor(m)})}(e,s))),o=o.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Xr(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(o=o.next(()=>this.ti(s))),r<8&&i>=8&&(o=o.next(()=>this.ni(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.ri(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(u){const l=u.createObjectStore("documentOverlays",{keyPath:nZ});l.createIndex("collectionPathOverlayIndex",rZ,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",iZ,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const l=u.createObjectStore("remoteDocumentsV14",{keyPath:G7});l.createIndex("documentKeyIndex",W7),l.createIndex("collectionGroupIndex",q7)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:J7}).createIndex("sequenceNumberIndex",X7,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:eZ}).createIndex("documentKeyIndex",tZ,{unique:!1})}(e))),o}ei(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=$y(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>O.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>O.forEach(a,u=>{Ae(u.userId===s.userId);const l=Uu(this.serializer,u);return BF(e,s.userId,l).next(()=>{})}))}))}ti(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Y((o,a)=>{const u=new gt(o),l=[0,xr(u)];s.push(n.get(l).next(h=>h?O.resolve():n.put({targetId:0,path:xr(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>O.waitFor(s))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:Y7});const r=n.store("collectionParents"),i=new _T,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:xr(u)})}};return n.store("remoteDocuments").Y({J:!0},(o,a)=>{const u=new gt(o);return s(u.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([o,a,u],l)=>{const h=Zs(a);return s(h.popLast())}))}ri(e){const n=e.store("targets");return n.Y((r,i)=>{const s=lp(i),o=AF(this.serializer,s);return n.put(o)})}ii(e,n){const r=n.store("remoteDocuments"),i=[];return r.Y((s,o)=>{const a=n.store("remoteDocumentsV14"),u=(g=o,g.document?new le(gt.fromString(g.document.name).popFirst(5)):g.noDocument?le.fromSegments(g.noDocument.path):g.unknownDocument?le.fromSegments(g.unknownDocument.path):ve()).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var g;i.push(a.put(l))}).next(()=>O.waitFor(i))}si(e,n){const r=n.store("mutations"),i=ZF(this.serializer),s=new vT(Gy.Hr,this.serializer.ct);return r.W().next(o=>{const a=new Map;return o.forEach(u=>{var l;let h=null!==(l=a.get(u.userId))&&void 0!==l?l:Qe();Uu(this.serializer,u).keys().forEach(g=>h=h.add(g)),a.set(u.userId,h)}),O.forEach(a,(u,l)=>{const h=new ar(l),g=Uy.lt(this.serializer,h),m=s.getIndexManager(h),y=Hy.lt(h,this.serializer,m,s.referenceDelegate);return new JF(i,y,g,m).recalculateAndSaveOverlaysForDocumentKeys(new zC(n,Fi._e),u).next()})})}}function XF(t){t.createObjectStore("targetDocuments",{keyPath:K7}).createIndex("documentTargetsIndex",Q7,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Z7,{unique:!0}),t.createObjectStore("targetGlobal")}const IT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ET{constructor(e,n,r,i,s,o,a,u,l,h,g=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=s,this.window=o,this.document=a,this._i=l,this.ai=h,this.ui=g,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=m=>Promise.resolve(),!ET.D())throw new X(B.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new oK(this,i),this.Ti=n+"main",this.serializer=new CF(u),this.Ei=new us(this.Ti,this.ui,new _K(this.serializer)),this.Qr=new rK(this.referenceDelegate,this.serializer),this.remoteDocumentCache=ZF(this.serializer),this.$r=new KZ,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===h&&On("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new X(B.FAILED_PRECONDITION,IT);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Fi(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var n=this;return this.Ii=function(){var r=(0,q.Z)(function*(i){if(n.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(function(){var n=(0,q.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,q.Z)(function*(){n.started&&(yield n.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>qy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(pa(e))return ne("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ne("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return gp(e).get("owner").next(n=>O.resolve(this.Si(n)))}bi(e){return qy(e).delete(this.clientId)}Di(){var e=this;return(0,q.Z)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=ur(r,"clientMetadata");return i.W().next(s=>{const o=e.vi(s,18e5),a=s.filter(u=>-1===o.indexOf(u));return O.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.di)for(const r of n)e.di.removeItem(e.Fi(r.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?O.resolve(!0):gp(e).get("owner").next(n=>{if(null!==n&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new X(B.FAILED_PRECONDITION,IT);return!1}}return!(!this.networkEnabled||!this.inForeground)||qy(e).W().next(r=>void 0===this.vi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(n=>(this.isPrimary!==n&&ne("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,q.Z)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const r=new zC(n,Fi._e);return e.yi(r).next(()=>e.bi(r))}),e.Ei.close(),e.Bi()})()}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Li(){return this.runTransaction("getActiveClients","readonly",e=>qy(e).W().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return Hy.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new nK(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Uy.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){ne("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===n?"readonly":"readwrite",s=15===(u=this.ui)?oZ:14===u?dV:13===u?lV:12===u?sZ:11===u?cV:void ve();var u;let o;return this.Ei.runTransaction(e,i,s,a=>(o=new zC(a,this.kr?this.kr.next():Fi._e),"readwrite-primary"===n?this.gi(o).next(u=>!!u||this.pi(o)).next(u=>{if(!u)throw On(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new X(B.FAILED_PRECONDITION,nV);return r(o)}).next(u=>this.wi(o).next(()=>u)):this.ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return gp(e).get("owner").next(n=>{if(null!==n&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new X(B.FAILED_PRECONDITION,IT)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return gp(e).put("owner",n)}static D(){return us.D()}yi(e){const n=gp(e);return n.get("owner").next(r=>this.Si(r)?(ne("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):O.resolve())}Ci(e,n){const r=Date.now();return!(e<r-n||e>r&&(On(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;(0,wt.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{const r=null!==(null===(n=this.di)||void 0===n?void 0:n.getItem(this.Fi(e)));return ne("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return On("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){On("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function gp(t){return ur(t,"owner")}function qy(t){return ur(t,"clientMetadata")}function wT(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class DT{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=Qe(),i=Qe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new DT(e,n.fromCache,r,i)}}class yK{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class eL{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,wt.G6)()?8:us.v((0,wt.z$)())>0?6:4}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new yK;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(jl()<=zs.in.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",Ql(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),O.resolve()):(jl()<=zs.in.DEBUG&&ne("QueryEngine","Query:",Ql(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(jl()<=zs.in.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",Ql(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ni(n))):O.resolve())}ji(e,n){if(kV(n))return O.resolve(null);let r=ni(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=Ny(n,null,"F"),r=ni(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Qe(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(e,Ny(n,null,"F")):this.es(e,l,n,u)}))})))}Hi(e,n,r,i){return kV(n)||i.isEqual(Se.min())?O.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?O.resolve(null):(jl()<=zs.in.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ql(n)),this.es(e,o,n,eV(i,-1)).next(a=>a))})}Zi(e,n){let r=new Ut(UV(e));return n.forEach((i,s)=>{ep(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const s="F"===e.limitType?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return jl()<=zs.in.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",Ql(n)),this.zi.getDocumentsMatchingQuery(e,n,Vi.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}class vK{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Gt(je),this.rs=new Mo(s=>Ou(s),Jf),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JF(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function tL(t,e,n,r){return new vK(t,e,n,r)}function nL(t,e){return CT.apply(this,arguments)}function CT(){return CT=(0,q.Z)(function*(t,e){const n=ue(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Qe();for(const l of i){o.push(l.batchId);for(const h of l.mutations)u=u.add(h.key)}for(const l of s){a.push(l.batchId);for(const h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}),CT.apply(this,arguments)}function rL(t){const e=ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function iL(t,e,n){let r=Qe(),i=Qe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=mi();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Se.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||0===u.version.compareTo(l.version)&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):ne("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function wK(t,e){const n=ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ad(t,e){const n=ue(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new xo(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function ud(t,e,n){return TT.apply(this,arguments)}function TT(){return TT=(0,q.Z)(function*(t,e,n){const r=ue(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!pa(o))throw o;ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}),TT.apply(this,arguments)}function Zy(t,e,n){const r=ue(t);let i=Se.min(),s=Qe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,h){const g=ue(u),m=g.rs.get(h);return void 0!==m?O.resolve(g.ns.get(m)):g.Qr.getTargetData(l,h)}(r,o,ni(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:Se.min(),n?s:Qe())).next(a=>(aL(r,LV(e),a),{documents:a,hs:s})))}function sL(t,e){const n=ue(t),r=ue(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r._t(s,e).next(o=>o?o.target:null))}function oL(t,e){const n=ue(t),r=n.ss.get(e)||Se.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.os.getAllFromCollectionGroup(i,e,eV(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(aL(n,e,i),i))}function aL(t,e,n){let r=t.ss.get(e)||Se.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}function AT(){return AT=(0,q.Z)(function*(t,e,n,r){const i=ue(t);let s=Qe(),o=mi();for(const l of n){const h=e.Ps(l.metadata.name);l.document&&(s=s.add(h));const g=e.Is(l);g.setReadTime(e.Ts(l.metadata.readTime)),o=o.insert(h,g)}const a=i.os.newChangeBuffer({trackRemovals:!0}),u=yield ad(i,(h=r,ni(Zl(gt.fromString(`__bundle__/docs/${h}`)))));var h;return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>iL(l,a,o).next(h=>(a.apply(l),h)).next(h=>i.Qr.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Qr.addMatchingKeys(l,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.cs,h.ls)).next(()=>h.cs)))}),AT.apply(this,arguments)}function CK(t,e){return bT.apply(this,arguments)}function bT(){return bT=(0,q.Z)(function*(t,e,n=Qe()){const r=yield ad(t,ni(dT(e.bundledQuery))),i=ue(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=kn(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(s,e);const a=r.withResumeToken(Zn.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(a.targetId,a),i.Qr.updateTargetData(s,a).next(()=>i.Qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Qr.addMatchingKeys(s,n,r.targetId)).next(()=>i.$r.saveNamedQuery(s,e))})}),bT.apply(this,arguments)}function uL(t,e){return`firestore_clients_${t}_${e}`}function cL(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function ST(t,e){return`firestore_targets_${t}_${e}`}class Ky{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new X(i.error.code,i.error.message))),o?new Ky(e,n,i.state,s):(On("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mp{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new X(r.error.code,r.error.message))),s?new mp(e,r.state,i):(On("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Qy{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){const r=JSON.parse(n);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=XC();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=sV(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Qy(e,s):(On("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class RT{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new RT(n.clientId,n.onlineState):(On("SharedClientState",`Failed to parse online state: ${e}`),null)}}class PT{constructor(){this.activeTargetIds=XC()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class MT{constructor(e,n,r,i,s){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Gt(je),this.started=!1,this.ys=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=uL(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new PT),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,q.Z)(function*(){const n=yield e.syncEngine.Li();for(const i of n){if(i===e.Vs)continue;const s=e.getItem(uL(e.persistenceKey,i));if(s){const o=Qy.Es(i,s);o&&(e.ps=e.ps.insert(o.clientId,o))}}e.Ms();const r=e.storage.getItem(e.vs);if(r){const i=e.xs(r);i&&e.Os(i)}for(const i of e.ys)e.gs(i);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,n,r){this.Bs(e,n,r),this.Ls(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(ST(this.persistenceKey,e));if(r){const i=mp.Es(e,r);i&&(n=i.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ST(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Ls(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return ne("SharedClientState","READ",e,n),n}setItem(e,n){ne("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){ne("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var n=this;const r=e;if(r.storageArea===this.storage){if(ne("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ws)return void On("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,q.Z)(function*(){if(n.started){if(null!==r.key)if(n.bs.test(r.key)){if(null==r.newValue){const i=n.$s(r.key);return n.Us(i,null)}{const i=n.Ws(r.key,r.newValue);if(i)return n.Us(i.clientId,i)}}else if(n.Ds.test(r.key)){if(null!==r.newValue){const i=n.Gs(r.key,r.newValue);if(i)return n.zs(i)}}else if(n.Cs.test(r.key)){if(null!==r.newValue){const i=n.js(r.key,r.newValue);if(i)return n.Hs(i)}}else if(r.key===n.vs){if(null!==r.newValue){const i=n.xs(r.newValue);if(i)return n.Os(i)}}else if(r.key===n.Ss){const i=function(o){let a=Fi._e;if(null!=o)try{const u=JSON.parse(o);Ae("number"==typeof u),a=u}catch(u){On("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==Fi._e&&n.sequenceNumberHandler(i)}else if(r.key===n.Fs){const i=n.Js(r.newValue);yield Promise.all(i.map(s=>n.syncEngine.Ys(s)))}}else n.ys.push(r)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,n,r){const i=new Ky(this.currentUser,e,n,r),s=cL(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ds())}Ls(e){const n=cL(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,n,r){const i=ST(this.persistenceKey,e),s=new mp(e,n,r);this.setItem(i,s.ds())}Ks(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){const n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){const r=this.$s(e);return Qy.Es(r,n)}Gs(e,n){const r=this.Ds.exec(e),i=Number(r[1]);return Ky.Es(new ar(void 0!==r[2]?r[2]:null),i,n)}js(e,n){const r=this.Cs.exec(e),i=Number(r[1]);return mp.Es(i,n)}xs(e){return RT.Es(e)}Js(e){return JSON.parse(e)}zs(e){var n=this;return(0,q.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Zs(e.batchId,e.state,e.error);ne("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){const r=n?this.ps.insert(e,n):this.ps.remove(e),i=this.Ns(this.ps),s=this.Ns(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.eo(o,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=XC();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class lL{constructor(){this.no=new PT,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new PT,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class TK{io(e){}shutdown(){}}class dL{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Yy=null;function NT(){return null===Yy?Yy=268435456+Math.round(2147483648*Math.random()):Yy++,"0x"+Yy.toString(16)}const AK={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bK{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const kr="WebChannelConnection";class SK extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${s}`,this.yo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get wo(){return!1}So(n,r,i,s,o){const a=NT(),u=this.bo(n,r.toUriEncodedString());ne("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(l,s,o),this.Co(n,u,l,i).then(h=>(ne("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw pi("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}vo(n,r,i,s,o,a){return this.So(n,r,i,s,o)}Do(n,r,i){n["X-Goog-Api-Client"]="gl-js/ fire/"+Bl,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}bo(n,r){return`${this.fo}/v1/${r}:${AK[n]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){const s=NT();return new Promise((o,a)=>{const u=new T7;u.setWithCredentials(!0),u.listenOnce(D7.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case LC.NO_ERROR:const h=u.getResponseJson();ne(kr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case LC.TIMEOUT:ne(kr,`RPC '${e}' ${s} timed out`),a(new X(B.DEADLINE_EXCEEDED,"Request time out"));break;case LC.HTTP_ERROR:const g=u.getStatus();if(ne(kr,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m?.error;if(y&&y.status&&y.message){const C=function(M){const V=M.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(V)>=0?V:B.UNKNOWN}(y.status);a(new X(C,y.message))}else a(new X(B.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new X(B.UNAVAILABLE,"Connection failed."));break;default:ve()}}finally{ne(kr,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(i);ne(kr,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Fo(e,n,r){const i=NT(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=E7(),a=w7(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=s.join("");ne(kr,`Creating RPC '${e}' stream ${i}: ${h}`,u);const g=o.createWebChannel(h,u);let m=!1,y=!1;const C=new bK({lo:M=>{y?ne(kr,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(m||(ne(kr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),m=!0),ne(kr,`RPC '${e}' stream ${i} sending:`,M),g.send(M))},ho:()=>g.close()}),S=(M,V,x)=>{M.listen(V,$=>{try{x($)}catch(re){setTimeout(()=>{throw re},0)}})};return S(g,Ey.EventType.OPEN,()=>{y||ne(kr,`RPC '${e}' stream ${i} transport opened.`)}),S(g,Ey.EventType.CLOSE,()=>{y||(y=!0,ne(kr,`RPC '${e}' stream ${i} transport closed`),C.Vo())}),S(g,Ey.EventType.ERROR,M=>{y||(y=!0,pi(kr,`RPC '${e}' stream ${i} transport errored:`,M),C.Vo(new X(B.UNAVAILABLE,"The operation could not be completed")))}),S(g,Ey.EventType.MESSAGE,M=>{var V;if(!y){const x=M.data[0];Ae(!!x);const re=x.error||(null===(V=x[0])||void 0===V?void 0:V.error);if(re){ne(kr,`RPC '${e}' stream ${i} received error:`,re);const de=re.status;let $e=function(xp){const vv=Ln[xp];if(void 0!==vv)return rF(vv)}(de),St=re.message;void 0===$e&&($e=B.INTERNAL,St="Unknown error status: "+de+" with message "+re.message),y=!0,C.Vo(new X($e,St)),g.close()}else ne(kr,`RPC '${e}' stream ${i} received:`,x),C.mo(x)}}),S(a,C7.STAT_EVENT,M=>{M.stat===Zk.PROXY?ne(kr,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===Zk.NOPROXY&&ne(kr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.Ro()},0),C}}function hL(){return typeof window<"u"?window:null}function Jy(){return typeof document<"u"?document:null}function _p(t){return new LZ(t,!0)}class xT{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),i=Math.max(0,n-r);i>0&&ne("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class fL{constructor(e,n,r,i,s,o,a,u){this.oi=e,this.$o=r,this.Uo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new xT(e,n)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}stop(){var e=this;return(0,q.Z)(function*(){e.Ho()&&(yield e.close(0))})()}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){var e=this;return(0,q.Z)(function*(){if(e.Jo())return e.close(0)})()}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){var r=this;return(0,q.Z)(function*(){r.n_(),r.r_(),r.jo.cancel(),r.Wo++,4!==e?r.jo.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(On(n.toString()),On("Using maximum backoff delay to prevent overloading the backend."),r.jo.ko()):n&&n.code===B.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.i_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.To(n)})()}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{const i=new X(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){const r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){var e=this;this.state=5,this.jo.qo((0,q.Z)(function*(){e.state=0,e.start()}))}__(e){return ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class RK extends fL{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=function jZ(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(l=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:ve(),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(Ae(void 0===h||"string"==typeof h),Zn.fromBase64String(h||"")):(Ae(void 0===h||h instanceof Uint8Array),Zn.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const h=void 0===l.code?B.UNKNOWN:rF(l.code);return new X(h,l.message||"")}(o);n=new uF(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Ys(t,r.document.name),s=kn(r.document.updateTime),o=r.document.createTime?kn(r.document.createTime):Se.min(),a=new yr({mapValue:{fields:r.document.fields}}),u=on.newFoundDocument(i,s,o,a);n=new Fy(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=Ys(t,r.document),s=r.readTime?kn(r.readTime):Se.min(),o=on.newNoDocument(i,s);n=new Fy([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Ys(t,r.document);n=new Fy([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ve();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new NZ(i,s);n=new aF(r.targetId,o)}}var l;return n}(this.serializer,e),r=function(s){if(!("targetChange"in s))return Se.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Se.min():o.readTime?kn(o.readTime):Se.min()}(e);return this.listener.u_(n,r)}c_(e){const n={};n.database=uT(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=Py(u)?{documents:vF(s,u)}:{query:lT(s,u).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=hF(s,o.resumeToken);const l=sT(s,o.expectedCount);null!==l&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(Se.min())>0){a.readTime=td(s,o.snapshotVersion.toTimestamp());const l=sT(s,o.expectedCount);null!==l&&(a.expectedCount=l)}return a}(this.serializer,e);const r=function HZ(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.t_(n)}l_(e){const n={};n.database=uT(this.serializer),n.removeTarget=e,this.t_(n)}}class PK extends fL{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=function $Z(t,e){return t&&t.length>0?(Ae(void 0!==e),t.map(n=>function(i,s){let o=kn(i.updateTime?i.updateTime:s);return o.isEqual(Se.min())&&(o=kn(s)),new SZ(o,i.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=kn(e.commitTime);return this.listener.T_(r,n)}return Ae(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=uT(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>cp(this.serializer,r))};this.t_(n)}}class MK extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new X(B.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,aT(n,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new X(B.UNKNOWN,s.toString())})}vo(e,n,r,i,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,aT(n,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new X(B.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class xK{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(On(n),this.g_=!1):ne("OnlineStateTracker",n)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class OK{constructor(e,n,r,i,s){var o=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(a=>{r.enqueueAndForget((0,q.Z)(function*(){var u;Aa(o)&&(ne("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,q.Z)(function*(h){const g=ue(h);g.v_.add(4),yield cd(g),g.x_.set("Unknown"),g.v_.delete(4),yield yp(g)}),function l(h){return u.apply(this,arguments)})(o))}))}),this.x_=new xK(r,i)}}function yp(t){return kT.apply(this,arguments)}function kT(){return kT=(0,q.Z)(function*(t){if(Aa(t))for(const e of t.F_)yield e(!0)}),kT.apply(this,arguments)}function cd(t){return VT.apply(this,arguments)}function VT(){return VT=(0,q.Z)(function*(t){for(const e of t.F_)yield e(!1)}),VT.apply(this,arguments)}function Xy(t,e){const n=ue(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),UT(n)?LT(n):dd(n).Jo()&&FT(n,e))}function vp(t,e){const n=ue(t),r=dd(n);n.C_.delete(e),r.Jo()&&pL(n,e),0===n.C_.size&&(r.Jo()?r.Xo():Aa(n)&&n.x_.set("Unknown"))}function FT(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}dd(t).c_(e)}function pL(t,e){t.O_.Oe(e),dd(t).l_(e)}function LT(t){t.O_=new OZ({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),dd(t).start(),t.x_.p_()}function UT(t){return Aa(t)&&!dd(t).Ho()&&t.C_.size>0}function Aa(t){return 0===ue(t).v_.size}function gL(t){t.O_=void 0}function kK(t){return BT.apply(this,arguments)}function BT(){return BT=(0,q.Z)(function*(t){t.C_.forEach((e,n)=>{FT(t,e)})}),BT.apply(this,arguments)}function VK(t,e){return jT.apply(this,arguments)}function jT(){return jT=(0,q.Z)(function*(t,e){gL(t),UT(t)?(t.x_.S_(e),LT(t)):t.x_.set("Unknown")}),jT.apply(this,arguments)}function FK(t,e,n){return $T.apply(this,arguments)}function $T(){return $T=(0,q.Z)(function*(t,e,n){if(t.x_.set("Online"),e instanceof uF&&2===e.state&&e.cause)try{yield(r=(0,q.Z)(function*(s,o){const a=o.cause;for(const u of o.targetIds)s.C_.has(u)&&(yield s.remoteSyncer.rejectListen(u,a),s.C_.delete(u),s.O_.removeTarget(u))}),function i(s,o){return r.apply(this,arguments)})(t,e)}catch(r){ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ev(t,r)}else if(e instanceof Fy?t.O_.$e(e):e instanceof aF?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(Se.min()))try{const r=yield rL(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){const a=s.O_.it(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.C_.get(l);h&&s.C_.set(l,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const h=s.C_.get(u);if(!h)return;s.C_.set(u,h.withResumeToken(Zn.EMPTY_BYTE_STRING,h.snapshotVersion)),pL(s,u);const g=new xo(h.target,u,l,h.sequenceNumber);FT(s,g)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){ne("RemoteStore","Failed to raise snapshot:",r),yield ev(t,r)}var r}),$T.apply(this,arguments)}function ev(t,e,n){return HT.apply(this,arguments)}function HT(){return HT=(0,q.Z)(function*(t,e,n){if(!pa(e))throw e;t.v_.add(1),yield cd(t),t.x_.set("Offline"),n||(n=()=>rL(t.localStore)),t.asyncQueue.enqueueRetryable((0,q.Z)(function*(){ne("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield yp(t)}))}),HT.apply(this,arguments)}function mL(t,e){return e().catch(n=>ev(t,n,e))}function ld(t){return zT.apply(this,arguments)}function zT(){return zT=(0,q.Z)(function*(t){const e=ue(t),n=ba(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;LK(e);)try{const i=yield wK(e.localStore,r);if(null===i){0===e.D_.length&&n.Xo();break}r=i.batchId,UK(e,i)}catch(i){yield ev(e,i)}_L(e)&&yL(e)}),zT.apply(this,arguments)}function LK(t){return Aa(t)&&t.D_.length<10}function UK(t,e){t.D_.push(e);const n=ba(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function _L(t){return Aa(t)&&!ba(t).Ho()&&t.D_.length>0}function yL(t){ba(t).start()}function BK(t){return GT.apply(this,arguments)}function GT(){return GT=(0,q.Z)(function*(t){ba(t).d_()}),GT.apply(this,arguments)}function jK(t){return WT.apply(this,arguments)}function WT(){return WT=(0,q.Z)(function*(t){const e=ba(t);for(const n of t.D_)e.I_(n.mutations)}),WT.apply(this,arguments)}function $K(t,e,n){return qT.apply(this,arguments)}function qT(){return qT=(0,q.Z)(function*(t,e,n){const r=t.D_.shift(),i=nT.from(r,e,n);yield mL(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield ld(t)}),qT.apply(this,arguments)}function HK(t,e){return ZT.apply(this,arguments)}function ZT(){return ZT=(0,q.Z)(function*(t,e){var n;e&&ba(t).P_&&(yield(n=(0,q.Z)(function*(i,s){if(nF(a=s.code)&&a!==B.ABORTED){const o=i.D_.shift();ba(i).Zo(),yield mL(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield ld(i)}var a}),function r(i,s){return n.apply(this,arguments)})(t,e)),_L(t)&&yL(t)}),ZT.apply(this,arguments)}function vL(t,e){return KT.apply(this,arguments)}function KT(){return KT=(0,q.Z)(function*(t,e){const n=ue(t);n.asyncQueue.verifyOperationInProgress(),ne("RemoteStore","RemoteStore received new credentials");const r=Aa(n);n.v_.add(3),yield cd(n),r&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield yp(n)}),KT.apply(this,arguments)}function QT(t,e){return YT.apply(this,arguments)}function YT(){return YT=(0,q.Z)(function*(t,e){const n=ue(t);e?(n.v_.delete(2),yield yp(n)):e||(n.v_.add(2),yield cd(n),n.x_.set("Unknown"))}),YT.apply(this,arguments)}function dd(t){return t.N_||(t.N_=function(n,r,i){const s=ue(n);return s.R_(),new RK(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:kK.bind(null,t),To:VK.bind(null,t),u_:FK.bind(null,t)}),t.F_.push(function(){var e=(0,q.Z)(function*(n){n?(t.N_.Zo(),UT(t)?LT(t):t.x_.set("Unknown")):(yield t.N_.stop(),gL(t))});return function(n){return e.apply(this,arguments)}}())),t.N_}function ba(t){return t.B_||(t.B_=function(n,r,i){const s=ue(n);return s.R_(),new PK(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:BK.bind(null,t),To:HK.bind(null,t),E_:jK.bind(null,t),T_:$K.bind(null,t)}),t.F_.push(function(){var e=(0,q.Z)(function*(n){n?(t.B_.Zo(),yield ld(t)):(yield t.B_.stop(),t.D_.length>0&&(ne("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))});return function(n){return e.apply(this,arguments)}}())),t.B_}class JT{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new qn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new JT(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new X(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hd(t,e){if(On("AsyncQueue",`${e}: ${t}`),pa(t))return new X(B.UNAVAILABLE,`${e}: ${t}`);throw t}class fd{constructor(e){this.comparator=e?(n,r)=>e(n,r)||le.comparator(n.key,r.key):(n,r)=>le.comparator(n.key,r.key),this.keyedMap=tp(),this.sortedSet=new Gt(this.comparator)}static emptySet(e){return new fd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof fd)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new fd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class IL{constructor(){this.L_=new Gt(le.comparator)}track(e){const n=e.doc.key,r=this.L_.get(n);r?0!==e.type&&3===r.type?this.L_=this.L_.insert(n,e):3===e.type&&1!==r.type?this.L_=this.L_.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.L_=this.L_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.L_=this.L_.remove(n):1===e.type&&2===r.type?this.L_=this.L_.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):ve():this.L_=this.L_.insert(n,e)}k_(){const e=[];return this.L_.inorderTraversal((n,r)=>{e.push(r)}),e}}class pd{constructor(e,n,r,i,s,o,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new pd(e,n,fd.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class zK{constructor(){this.q_=void 0,this.Q_=[]}}class GK{constructor(){this.queries=new Mo(e=>FV(e),Xf),this.onlineState="Unknown",this.K_=new Set}}function XT(t,e){return eA.apply(this,arguments)}function eA(){return eA=(0,q.Z)(function*(t,e){const n=ue(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new zK),i)try{s.q_=yield n.onListen(r)}catch(o){const a=hd(o,`Initialization of query '${Ql(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.Q_.push(e),e.U_(n.onlineState),s.q_&&e.W_(s.q_)&&rA(n)}),eA.apply(this,arguments)}function tA(t,e){return nA.apply(this,arguments)}function nA(){return nA=(0,q.Z)(function*(t,e){const n=ue(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),i=0===s.Q_.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}),nA.apply(this,arguments)}function WK(t,e){const n=ue(t);let r=!1;for(const i of e){const o=n.queries.get(i.query);if(o){for(const a of o.Q_)a.W_(i)&&(r=!0);o.q_=i}}r&&rA(n)}function qK(t,e,n){const r=ue(t),i=r.queries.get(e);if(i)for(const s of i.Q_)s.onError(n);r.queries.delete(e)}function rA(t){t.K_.forEach(e=>{e.next()})}class iA{constructor(e,n,r){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new pd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){return!e.fromCache||(!this.options.Z_||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}H_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Y_(e){e=pd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class ZK{constructor(e,n){this.X_=e,this.byteLength=n}ea(){return"metadata"in this.X_}}class EL{constructor(e){this.serializer=e}Ps(e){return Ys(this.serializer,e)}Is(e){return e.metadata.exists?yF(this.serializer,e.document,!1):on.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return kn(e)}}class KK{constructor(e,n,r){this.ta=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=wL(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++n;const r=gt.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ra(e){const n=new Map,r=new EL(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Ps(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||Qe()).add(s);n.set(o,a)}}return n}complete(){var e=this;return(0,q.Z)(function*(){const n=yield function DK(t,e,n,r){return AT.apply(this,arguments)}(e.localStore,new EL(e.serializer),e.documents,e.ta.id),r=e.ra(e.documents);for(const i of e.queries)yield CK(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,ia:e.collectionGroups,sa:n}})()}}function wL(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class DL{constructor(e){this.key=e}}class CL{constructor(e){this.key=e}}class TL{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=Qe(),this.mutatedKeys=Qe(),this.ua=UV(e),this.ca=new fd(this.ua)}get la(){return this.oa}ha(e,n){const r=n?n.Pa:new IL,i=n?n.ca:this.ca;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{const m=i.get(h),y=ep(this.query,g)?g:null,C=!!m&&this.mutatedKeys.has(m.key),S=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let M=!1;m&&y?m.data.isEqual(y.data)?C!==S&&(r.track({type:3,doc:y}),M=!0):this.Ia(m,y)||(r.track({type:2,doc:y}),M=!0,(u&&this.ua(y,u)>0||l&&this.ua(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),M=!0):m&&!y&&(r.track({type:1,doc:m}),M=!0,(u||l)&&(a=!0)),M&&(y?(o=o.add(y),s=S?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const h="F"===this.query.limitType?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{ca:o,Pa:r,Xi:a,mutatedKeys:s}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const o=e.Pa.k_();o.sort((h,g)=>function(y,C){const S=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve()}};return S(y)-S(C)}(h.type,g.type)||this.ua(h.doc,g.doc)),this.Ta(r),i=null!=i&&i;const a=n&&!i?this.Ea():[],u=0===this.aa.size&&this.current&&!i?1:0,l=u!==this._a;return this._a=u,0!==o.length||l?{snapshot:new pd(this.query,e.ca,s,o,e.mutatedKeys,0===u,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new IL,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=Qe(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});const n=[];return e.forEach(r=>{this.aa.has(r)||n.push(new CL(r))}),this.aa.forEach(r=>{e.has(r)||n.push(new DL(r))}),n}Ra(e){this.oa=e.hs,this.aa=Qe();const n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return pd.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class QK{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class YK{constructor(e){this.key=e,this.ma=!1}}class JK{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new Mo(a=>FV(a),Xf),this.pa=new Map,this.ya=new Set,this.wa=new Gt(le.comparator),this.Sa=new Map,this.ba=new yT,this.Da={},this.Ca=new Map,this.va=$u.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}function XK(t,e){return sA.apply(this,arguments)}function sA(){return sA=(0,q.Z)(function*(t,e){const n=SA(t);let r,i;const s=n.ga.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{const o=yield ad(n.localStore,ni(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield oA(n,e,r,"current"===a,o.resumeToken),n.isPrimaryClient&&Xy(n.remoteStore,o)}return i}),sA.apply(this,arguments)}function oA(t,e,n,r,i){return aA.apply(this,arguments)}function aA(){return aA=(0,q.Z)(function*(t,e,n,r,i){t.Ma=(g,m,y)=>{return(C=(0,q.Z)(function*(M,V,x,$){let re=V.view.ha(x);re.Xi&&(re=yield Zy(M.localStore,V.query,!1).then(({documents:Kn})=>V.view.ha(Kn,re)));const de=$&&$.targetChanges.get(V.targetId),$e=$&&null!=$.targetMismatches.get(V.targetId),St=V.view.applyChanges(re,M.isPrimaryClient,de,$e);return _A(M,V.targetId,St.da),St.snapshot}),function S(M,V,x,$){return C.apply(this,arguments)})(t,g,m,y);var C};const s=yield Zy(t.localStore,e,!0),o=new TL(e,s.hs),a=o.ha(s.documents),u=ap.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),l=o.applyChanges(a,t.isPrimaryClient,u);_A(t,n,l.da);const h=new QK(e,n,o);return t.ga.set(e,h),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),l.snapshot}),aA.apply(this,arguments)}function eQ(t,e){return uA.apply(this,arguments)}function uA(){return uA=(0,q.Z)(function*(t,e){const n=ue(t),r=n.ga.get(e),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter(s=>!Xf(s,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield ud(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),vp(n.remoteStore,r.targetId),gd(n,r.targetId)}).catch(fa))):(gd(n,r.targetId),yield ud(n.localStore,r.targetId,!0))}),uA.apply(this,arguments)}function cA(){return cA=(0,q.Z)(function*(t,e,n){const r=RA(t);try{const i=yield function(o,a){const u=ue(o),l=ln.now(),h=a.reduce((y,C)=>y.add(C.key),Qe());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let C=mi(),S=Qe();return u.os.getEntries(y,h).next(M=>{C=M,C.forEach((V,x)=>{x.isValidDocument()||(S=S.add(V))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,C)).next(M=>{g=M;const V=[];for(const x of a){const $=PZ(x,g.get(x.key).overlayedDocument);null!=$&&V.push(new No(x.key,$,wV($.value.mapValue),dn.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,V,a)}).next(M=>{m=M;const V=M.applyToLocalDocumentSet(g,S);return u.documentOverlayCache.saveOverlays(y,M.batchId,V)})}).then(()=>({batchId:m.batchId,changes:jV(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.Da[o.currentUser.toKey()];l||(l=new Gt(je)),l=l.insert(a,u),o.Da[o.currentUser.toKey()]=l}(r,i.batchId,n),yield Oo(r,i.changes),yield ld(r.remoteStore)}catch(i){const s=hd(i,"Failed to persist write");n.reject(s)}}),cA.apply(this,arguments)}function AL(t,e){return lA.apply(this,arguments)}function lA(){return lA=(0,q.Z)(function*(t,e){const n=ue(t);try{const r=yield function EK(t,e){const n=ue(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];e.targetChanges.forEach((h,g)=>{const m=i.get(g);if(!m)return;a.push(n.Qr.removeMatchingKeys(s,h.removedDocuments,g).next(()=>n.Qr.addMatchingKeys(s,h.addedDocuments,g)));let y=m.withSequenceNumber(s.currentSequenceNumber);var S,M,V;null!==e.targetMismatches.get(g)?y=y.withResumeToken(Zn.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(g,y),M=y,V=h,(0===(S=m).resumeToken.approximateByteSize()||M.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8||V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0)&&a.push(n.Qr.updateTargetData(s,y))});let u=mi(),l=Qe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(iL(s,o,e.documentUpdates).next(h=>{u=h.cs,l=h.ls})),!r.isEqual(Se.min())){const h=n.Qr.getLastRemoteSnapshotVersion(s).next(g=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return O.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Sa.get(s);o&&(Ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.ma=!0:i.modifiedDocuments.size>0?Ae(o.ma):i.removedDocuments.size>0&&(Ae(o.ma),o.ma=!1))}),yield Oo(n,r,e)}catch(r){yield fa(r)}}),lA.apply(this,arguments)}function bL(t,e,n){const r=ue(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.ga.forEach((s,o)=>{const a=o.view.U_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=ue(o);u.onlineState=a;let l=!1;u.queries.forEach((h,g)=>{for(const m of g.Q_)m.U_(a)&&(l=!0)}),l&&rA(u)}(r.eventManager,e),i.length&&r.fa.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function nQ(t,e,n){return dA.apply(this,arguments)}function dA(){return dA=(0,q.Z)(function*(t,e,n){const r=ue(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Sa.get(e),s=i&&i.key;if(s){let o=new Gt(le.comparator);o=o.insert(s,on.newNoDocument(s,Se.min()));const a=Qe().add(s),u=new op(Se.min(),new Map,new Gt(je),o,a);yield AL(r,u),r.wa=r.wa.remove(s),r.Sa.delete(e),yA(r)}else yield ud(r.localStore,e,!1).then(()=>gd(r,e,n)).catch(fa)}),dA.apply(this,arguments)}function rQ(t,e){return hA.apply(this,arguments)}function hA(){return hA=(0,q.Z)(function*(t,e){const n=ue(t),r=e.batch.batchId;try{const i=yield function IK(t,e){const n=ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){const g=l.batch,m=g.keys();let y=O.resolve();return m.forEach(C=>{y=y.next(()=>h.getEntry(u,C)).next(S=>{const M=l.docVersions.get(C);Ae(null!==M),S.version.compareTo(M)<0&&(g.applyToRemoteDocument(S,l),S.isValidDocument()&&(S.setReadTime(l.commitVersion),h.addEntry(S)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,g))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Qe();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);mA(n,r,null),gA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Oo(n,i)}catch(i){yield fa(i)}}),hA.apply(this,arguments)}function iQ(t,e,n){return fA.apply(this,arguments)}function fA(){return fA=(0,q.Z)(function*(t,e,n){const r=ue(t);try{const i=yield function(o,a){const u=ue(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(g=>(Ae(null!==g),h=g.keys(),u.mutationQueue.removeMutationBatch(l,g))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);mA(r,e,n),gA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Oo(r,i)}catch(i){yield fa(i)}}),fA.apply(this,arguments)}function pA(){return pA=(0,q.Z)(function*(t,e){const n=ue(t);Aa(n.remoteStore)||ne("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=ue(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(-1===r)return void e.resolve();const i=n.Ca.get(r)||[];i.push(e),n.Ca.set(r,i)}catch(r){const i=hd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),pA.apply(this,arguments)}function gA(t,e){(t.Ca.get(e)||[]).forEach(n=>{n.resolve()}),t.Ca.delete(e)}function mA(t,e,n){const r=ue(t);let i=r.Da[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Da[r.currentUser.toKey()]=i}}function gd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.pa.get(e))t.ga.delete(r),n&&t.fa.xa(r,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach(r=>{t.ba.containsKey(r)||SL(t,r)})}function SL(t,e){t.ya.delete(e.path.canonicalString());const n=t.wa.get(e);null!==n&&(vp(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),yA(t))}function _A(t,e,n){for(const r of n)r instanceof DL?(t.ba.addReference(r.key,e),oQ(t,r)):r instanceof CL?(ne("SyncEngine","Document no longer in limbo: "+r.key),t.ba.removeReference(r.key,e),t.ba.containsKey(r.key)||SL(t,r.key)):ve()}function oQ(t,e){const n=e.key,r=n.path.canonicalString();t.wa.get(n)||t.ya.has(r)||(ne("SyncEngine","New document in limbo: "+n),t.ya.add(r),yA(t))}function yA(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){const e=t.ya.values().next().value;t.ya.delete(e);const n=new le(gt.fromString(e)),r=t.va.next();t.Sa.set(r,new YK(n)),t.wa=t.wa.insert(n,r),Xy(t.remoteStore,new xo(ni(Zl(n.path)),r,"TargetPurposeLimboResolution",Fi._e))}}function Oo(t,e,n){return vA.apply(this,arguments)}function vA(){return vA=(0,q.Z)(function*(t,e,n){const r=ue(t),i=[],s=[],o=[];var a;r.ga.isEmpty()||(r.ga.forEach((a,u)=>{o.push(r.Ma(u,e,n).then(l=>{if((l||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,l?.fromCache?"not-current":"current"),l){i.push(l);const h=DT.Ki(u.targetId,l);s.push(h)}}))}),yield Promise.all(o),r.fa.u_(i),yield(a=(0,q.Z)(function*(l,h){const g=ue(l);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>O.forEach(h,y=>O.forEach(y.qi,C=>g.persistence.referenceDelegate.addReference(m,y.targetId,C)).next(()=>O.forEach(y.Qi,C=>g.persistence.referenceDelegate.removeReference(m,y.targetId,C)))))}catch(m){if(!pa(m))throw m;ne("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const y=m.targetId;if(!m.fromCache){const C=g.ns.get(y),M=C.withLastLimboFreeSnapshotVersion(C.snapshotVersion);g.ns=g.ns.insert(y,M)}}}),function u(l,h){return a.apply(this,arguments)})(r.localStore,s))}),vA.apply(this,arguments)}function aQ(t,e){return IA.apply(this,arguments)}function IA(){return IA=(0,q.Z)(function*(t,e){const n=ue(t);if(!n.currentUser.isEqual(e)){ne("SyncEngine","User change. New user:",e.toKey());const r=yield nL(n.localStore,e);n.currentUser=e,(s=n).Ca.forEach(a=>{a.forEach(u=>{u.reject(new X(B.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Ca.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Oo(n,r.us)}var s}),IA.apply(this,arguments)}function uQ(t,e){const n=ue(t),r=n.Sa.get(e);if(r&&r.ma)return Qe().add(r.key);{let i=Qe();const s=n.pa.get(e);if(!s)return i;for(const o of s){const a=n.ga.get(o);i=i.unionWith(a.view.la)}return i}}function cQ(t,e){return EA.apply(this,arguments)}function EA(){return EA=(0,q.Z)(function*(t,e){const n=ue(t),r=yield Zy(n.localStore,e.query,!0),i=e.view.Ra(r);return n.isPrimaryClient&&_A(n,e.targetId,i.da),i}),EA.apply(this,arguments)}function lQ(t,e){return wA.apply(this,arguments)}function wA(){return wA=(0,q.Z)(function*(t,e){const n=ue(t);return oL(n.localStore,e).then(r=>Oo(n,r))}),wA.apply(this,arguments)}function dQ(t,e,n,r){return DA.apply(this,arguments)}function DA(){return DA=(0,q.Z)(function*(t,e,n,r){const i=ue(t),s=yield function(a,u){const l=ue(a),h=ue(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",g=>h.vn(g,u).next(m=>m?l.localDocuments.getDocuments(g,m):O.resolve(null)))}(i.localStore,e);var u;null!==s?("pending"===n?yield ld(i.remoteStore):"acknowledged"===n||"rejected"===n?(mA(i,e,r||null),gA(i,e),u=e,ue(ue(i.localStore).mutationQueue).Mn(u)):ve(),yield Oo(i,s)):ne("SyncEngine","Cannot apply mutation batch with id: "+e)}),DA.apply(this,arguments)}function CA(){return CA=(0,q.Z)(function*(t,e){const n=ue(t);if(SA(n),RA(n),!0===e&&!0!==n.Fa){const r=n.sharedClientState.getAllActiveQueryTargets(),i=yield RL(n,r.toArray());n.Fa=!0,yield QT(n.remoteStore,!0);for(const s of i)Xy(n.remoteStore,s)}else if(!1===e&&!1!==n.Fa){const r=[];let i=Promise.resolve();n.pa.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(gd(n,o),ud(n.localStore,o,!0))),vp(n.remoteStore,o)}),yield i,yield RL(n,r),function(o){const a=ue(o);a.Sa.forEach((u,l)=>{vp(a.remoteStore,l)}),a.ba.mr(),a.Sa=new Map,a.wa=new Gt(le.comparator)}(n),n.Fa=!1,yield QT(n.remoteStore,!1)}}),CA.apply(this,arguments)}function RL(t,e,n){return TA.apply(this,arguments)}function TA(){return TA=(0,q.Z)(function*(t,e,n){const r=ue(t),i=[],s=[];for(const o of e){let a;const u=r.pa.get(o);if(u&&0!==u.length){a=yield ad(r.localStore,ni(u[0]));for(const l of u){const h=r.ga.get(l),g=yield cQ(r,h);g.snapshot&&s.push(g.snapshot)}}else{const l=yield sL(r.localStore,o);a=yield ad(r.localStore,l),yield oA(r,PL(l),o,!1,a.resumeToken)}i.push(a)}return r.fa.u_(s),i}),TA.apply(this,arguments)}function PL(t){return OV(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function fQ(t){return n=ue(t).localStore,ue(ue(n).persistence).Li();var n}function pQ(t,e,n,r){return AA.apply(this,arguments)}function AA(){return AA=(0,q.Z)(function*(t,e,n,r){const i=ue(t);if(i.Fa)return void ne("SyncEngine","Ignoring unexpected query state notification.");const s=i.pa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=yield oL(i.localStore,LV(s[0])),a=op.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,Zn.EMPTY_BYTE_STRING);yield Oo(i,o,a);break}case"rejected":yield ud(i.localStore,e,!0),gd(i,e,r);break;default:ve()}}),AA.apply(this,arguments)}function gQ(t,e,n){return bA.apply(this,arguments)}function bA(){return bA=(0,q.Z)(function*(t,e,n){const r=SA(t);if(r.Fa){for(const i of e){if(r.pa.has(i)){ne("SyncEngine","Adding an already active target "+i);continue}const s=yield sL(r.localStore,i),o=yield ad(r.localStore,s);yield oA(r,PL(s),o.targetId,!1,o.resumeToken),Xy(r.remoteStore,o)}for(const i of n)r.pa.has(i)&&(yield ud(r.localStore,i,!1).then(()=>{vp(r.remoteStore,i),gd(r,i)}).catch(fa))}}),bA.apply(this,arguments)}function SA(t){const e=ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=AL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uQ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nQ.bind(null,e),e.fa.u_=WK.bind(null,e.eventManager),e.fa.xa=qK.bind(null,e.eventManager),e}function RA(t){const e=ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rQ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iQ.bind(null,e),e}class Ip{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,q.Z)(function*(){n.serializer=_p(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return tL(this.persistence,new eL,e.initialUser,this.serializer)}createPersistence(e){return new vT(Gy.Hr,this.serializer)}createSharedClientState(e){return new lL}terminate(){var e=this;return(0,q.Z)(function*(){var n,r;null===(n=e.gcScheduler)||void 0===n||n.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class PA extends Ip{constructor(e,n,r){super(),this.Na=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,r=this;return(0,q.Z)(function*(){yield n().call(r,e),yield r.Na.initialize(r,e),yield RA(r.Na.syncEngine),yield ld(r.Na.remoteStore),yield r.persistence.fi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return tL(this.persistence,new eL,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new GF(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new $7(n,this.persistence);return new j7(e.asyncQueue,r)}createPersistence(e){const n=wT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Or.withCacheSize(this.cacheSizeBytes):Or.DEFAULT;return new ET(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,hL(),Jy(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new lL}}class ML extends PA{constructor(e,n){super(e,n,!1),this.Na=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,r=this;return(0,q.Z)(function*(){yield n().call(r,e);const i=r.Na.syncEngine;r.sharedClientState instanceof MT&&(r.sharedClientState.syncEngine={Zs:dQ.bind(null,i),Xs:pQ.bind(null,i),eo:gQ.bind(null,i),Li:fQ.bind(null,i),Ys:lQ.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.fi(function(){var s=(0,q.Z)(function*(o){yield function hQ(t,e){return CA.apply(this,arguments)}(r.Na.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const n=hL();if(!MT.D(n))throw new X(B.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=wT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new MT(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class md{initialize(e,n){var r=this;return(0,q.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>bL(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=aQ.bind(null,r.syncEngine),yield QT(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new GK}createDatastore(e){const n=_p(e.databaseInfo.databaseId),r=new SK(e.databaseInfo);return new MK(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=n=>bL(this.syncEngine,n,0),a=dL.D()?new dL:new TK,new OK(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,n){return function(i,s,o,a,u,l,h){const g=new JK(i,s,o,a,u,l);return h&&(g.Fa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){var e=this;return(0,q.Z)(function*(){var n,r;yield(r=(0,q.Z)(function*(s){const o=ue(s);ne("RemoteStore","RemoteStore shutting down."),o.v_.add(5),yield cd(o),o.M_.shutdown(),o.x_.set("Unknown")}),function i(s){return r.apply(this,arguments)})(e.remoteStore),null===(n=e.datastore)||void 0===n||n.terminate()})()}}function NL(t,e=10240){let n=0;return{read:()=>(0,q.Z)(function*(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})(),cancel:()=>(0,q.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class tv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):On("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class yQ{constructor(e,n){this.ka=e,this.serializer=n,this.metadata=new qn,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then(r=>{r&&r.ea()?this.metadata.resolve(r.X_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.X_)}`))},r=>this.metadata.reject(r))}close(){return this.ka.cancel()}getMetadata(){var e=this;return(0,q.Z)(function*(){return e.metadata.promise})()}Oa(){var e=this;return(0,q.Z)(function*(){return yield e.getMetadata(),e.Qa()})()}Qa(){var e=this;return(0,q.Z)(function*(){const n=yield e.Ka();if(null===n)return null;const r=e.qa.decode(n),i=Number(r);isNaN(i)&&e.$a(`length string (${r}) is not valid number`);const s=yield e.Ua(i);return new ZK(JSON.parse(s),n.length+i)})()}Wa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ka(){var e=this;return(0,q.Z)(function*(){for(;e.Wa()<0&&!(yield e.Ga()););if(0===e.buffer.length)return null;const n=e.Wa();n<0&&e.$a("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),r})()}Ua(e){var n=this;return(0,q.Z)(function*(){for(;n.buffer.length<e;)(yield n.Ga())&&n.$a("Reached the end of bundle when more is expected.");const r=n.qa.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),r})()}$a(e){throw this.ka.cancel(),new Error(`Invalid bundle format: ${e}`)}Ga(){var e=this;return(0,q.Z)(function*(){const n=yield e.ka.read();if(!n.done){const r=new Uint8Array(e.buffer.length+n.value.length);r.set(e.buffer),r.set(n.value,e.buffer.length),e.buffer=r}return n.done})()}}class vQ{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,q.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw n.lastTransactionError=new X(B.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),n.lastTransactionError;const r=yield(i=(0,q.Z)(function*(o,a){const u=ue(o),l={documents:a.map(y=>up(u.serializer,y))},h=yield u.vo("BatchGetDocuments",u.serializer.databaseId,gt.emptyPath(),l,a.length),g=new Map;h.forEach(y=>{const C=function BZ(t,e){return"found"in e?function(r,i){Ae(!!i.found);const s=Ys(r,i.found.name),o=kn(i.found.updateTime),a=i.found.createTime?kn(i.found.createTime):Se.min(),u=new yr({mapValue:{fields:i.found.fields}});return on.newFoundDocument(s,o,a,u)}(t,e):"missing"in e?function(r,i){Ae(!!i.missing),Ae(!!i.readTime);const s=Ys(r,i.missing),o=kn(i.readTime);return on.newNoDocument(s,o)}(t,e):ve()}(u.serializer,y);g.set(C.key.toString(),C)});const m=[];return a.forEach(y=>{const C=g.get(y.toString());Ae(!!C),m.push(C)}),m}),function s(o,a){return i.apply(this,arguments)})(n.datastore,e);var i;return r.forEach(i=>n.recordVersion(i)),r})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ed(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,q.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const n=e.readVersions;var r;e.mutations.forEach(r=>{n.delete(r.key.toString())}),n.forEach((r,i)=>{const s=le.fromPath(i);e.mutations.push(new eT(s,e.precondition(s)))}),yield(r=(0,q.Z)(function*(s,o){const a=ue(s),u={writes:o.map(l=>cp(a.serializer,l))};yield a.So("Commit",a.serializer.databaseId,gt.emptyPath(),u)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ve();n=Se.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new X(B.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Se.min())?dn.exists(!1):dn.updateTime(n):dn.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Se.min()))throw new X(B.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return dn.updateTime(n)}return dn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class IQ{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.za=r.maxAttempts,this.jo=new xT(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){var e=this;this.jo.qo((0,q.Z)(function*(){const n=new vQ(e.datastore),r=e.Ja(n);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Ya(s)}))}).catch(i=>{e.Ya(i)})}))}Ja(e){try{const n=this.updateFunction(e);return!Gf(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ha(),Promise.resolve()))):this.deferred.reject(e)}Za(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!nF(n)}return!1}}class EQ{constructor(e,n,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ar.UNAUTHENTICATED,this.clientId=Jk.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,q.Z)(function*(a){ne("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(ne("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new X(B.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new qn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,q.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=hd(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function nv(t,e){return MA.apply(this,arguments)}function MA(){return MA=(0,q.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress(),ne("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=(0,q.Z)(function*(s){r.isEqual(s)||(yield nL(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),MA.apply(this,arguments)}function NA(t,e){return xA.apply(this,arguments)}function xA(){return xA=(0,q.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield OA(t);ne("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>vL(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>vL(e.remoteStore,i)),t._onlineComponents=e}),xA.apply(this,arguments)}function xL(t){return"FirebaseError"===t.name?t.code===B.FAILED_PRECONDITION||t.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}function OA(t){return kA.apply(this,arguments)}function kA(){return kA=(0,q.Z)(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ne("FirestoreClient","Using user provided OfflineComponentProvider");try{yield nv(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!xL(n))throw n;pi("Error using user provided cache. Falling back to memory cache: "+n),yield nv(t,new Ip)}}else ne("FirestoreClient","Using default OfflineComponentProvider"),yield nv(t,new Ip);return t._offlineComponents}),kA.apply(this,arguments)}function rv(t){return VA.apply(this,arguments)}function VA(){return VA=(0,q.Z)(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ne("FirestoreClient","Using user provided OnlineComponentProvider"),yield NA(t,t._uninitializedComponentsProvider._online)):(ne("FirestoreClient","Using default OnlineComponentProvider"),yield NA(t,new md))),t._onlineComponents}),VA.apply(this,arguments)}function OL(t){return OA(t).then(e=>e.persistence)}function _d(t){return OA(t).then(e=>e.localStore)}function kL(t){return rv(t).then(e=>e.remoteStore)}function FA(t){return rv(t).then(e=>e.syncEngine)}function yd(t){return LA.apply(this,arguments)}function LA(){return LA=(0,q.Z)(function*(t){const e=yield rv(t),n=e.eventManager;return n.onListen=XK.bind(null,e.syncEngine),n.onUnlisten=eQ.bind(null,e.syncEngine),n}),LA.apply(this,arguments)}function FL(t,e,n={}){const r=new qn;return t.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return function(s,o,a,u,l){const h=new tv({next:m=>{o.enqueueAndForget(()=>tA(s,g));const y=m.docs.has(a);!y&&m.fromCache?l.reject(new X(B.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&"server"===u.source?l.reject(new X(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),g=new iA(Zl(a.path),h,{includeMetadataChanges:!0,Z_:!0});return XT(s,g)}(yield yd(t),t.asyncQueue,e,n,r)})),r.promise}function LL(t,e,n={}){const r=new qn;return t.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return function(s,o,a,u,l){const h=new tv({next:m=>{o.enqueueAndForget(()=>tA(s,g)),m.fromCache&&"server"===u.source?l.reject(new X(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),g=new iA(a,h,{includeMetadataChanges:!0,Z_:!0});return XT(s,g)}(yield yd(t),t.asyncQueue,e,n,r)})),r.promise}function UL(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const BL=new Map;function UA(t,e,n){if(!n)throw new X(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function jL(t,e,n,r){if(!0===e&&!0===r)throw new X(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function $L(t){if(!le.isDocumentKey(t))throw new X(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function HL(t){if(le.isDocumentKey(t))throw new X(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function iv(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":ve()}function ct(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=iv(t);throw new X(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function zL(t,e){if(e<=0)throw new X(B.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}class GL{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new X(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new X(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=UL(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new X(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new X(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new X(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ep{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new GL({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new X(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new X(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new GL(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new R7;switch(r.type){case"firstParty":return new x7(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=BL.get(n);r&&(ne("ComponentProvider","Removing Datastore"),BL.delete(n),r.terminate())}(this),Promise.resolve()}}function WL(t,e,n,r={}){var i;const s=(t=ct(t,Ep))._getSettings(),o=`${e}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&pi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=ar.MOCK_USER;else{a=(0,wt.Sg)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new X(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ar(l)}t._authCredentials=new P7(new Qk(a,u))}}class vr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new vr(this.firestore,e,this._query)}}class an{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Js(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new an(this.firestore,e,this._key)}}class Js extends vr{constructor(e,n,r){super(e,n,Zl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new an(this.firestore,null,new le(e))}withConverter(e){return new Js(this.firestore,e,this._path)}}function qL(t,e,...n){if(t=(0,wt.m9)(t),UA("collection","path",e),t instanceof Ep){const r=gt.fromString(e,...n);return HL(r),new Js(t,null,r)}{if(!(t instanceof an||t instanceof Js))throw new X(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(gt.fromString(e,...n));return HL(r),new Js(t.firestore,null,r)}}function sv(t,e,...n){if(t=(0,wt.m9)(t),1===arguments.length&&(e=Jk.newId()),UA("doc","path",e),t instanceof Ep){const r=gt.fromString(e,...n);return $L(r),new an(t,null,new le(r))}{if(!(t instanceof an||t instanceof Js))throw new X(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(gt.fromString(e,...n));return $L(r),new an(t.firestore,t instanceof Js?t.converter:null,new le(r))}}function ZL(t,e){return t=(0,wt.m9)(t),e=(0,wt.m9)(e),(t instanceof an||t instanceof Js)&&(e instanceof an||e instanceof Js)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function BA(t,e){return t=(0,wt.m9)(t),e=(0,wt.m9)(e),t instanceof vr&&e instanceof vr&&t.firestore===e.firestore&&Xf(t._query,e._query)&&t.converter===e.converter}class xQ{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new xT(this,"async_queue_retry"),this._u=()=>{const n=Jy();n&&ne("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=Jy();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const n=Jy();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});const n=new qn;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}cu(){var e=this;return(0,q.Z)(function*(){if(0!==e.eu.length){try{yield e.eu[0](),e.eu.shift(),e.jo.reset()}catch(n){if(!pa(n))throw n;ne("AsyncQueue","Operation failed with retryable error: "+n)}e.eu.length>0&&e.jo.qo(()=>e.cu())}})()}uu(e){const n=this.Xa.then(()=>(this.iu=!0,e().catch(r=>{throw this.ru=r,this.iu=!1,On("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.iu=!1,r))));return this.Xa=n,n}enqueueAfterDelay(e,n,r){this.au(),this.ou.indexOf(e)>-1&&(n=0);const i=JT.createAndSchedule(this,e,n,r,s=>this.lu(s));return this.nu.push(i),i}au(){this.ru&&ve()}verifyOperationInProgress(){}hu(){var e=this;return(0,q.Z)(function*(){let n;do{n=e.Xa,yield n}while(n!==e.Xa)})()}Pu(e){for(const n of this.nu)if(n.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.nu)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){const n=this.nu.indexOf(e);this.nu.splice(n,1)}}function jA(t){return function(n,r){if("object"!=typeof n||null===n)return!1;const i=n;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(t)}class OQ{constructor(){this._progressObserver={},this._taskCompletionResolver=new qn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Wt extends Ep{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new xQ,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||KL(this),this._firestoreClient.terminate()}}function VQ(t,e){const n="object"==typeof t?t:(0,Rr.getApp)(),r="string"==typeof t?t:e||"(default)",i=(0,Rr._getProvider)(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(0,wt.P0)("firestore");s&&WL(i,...s)}return i}function Cn(t){return t._firestoreClient||KL(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function KL(t){var e,n,r;const i=t._freezeSettings(),s=(u=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new cZ(t._databaseId,u,t._persistenceKey,(h=i).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,UL(h.experimentalLongPollingOptions),h.useFetchStreams));var u,h;t._firestoreClient=new EQ(t._authCredentials,t._appCheckCredentials,t._queue,s),null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function QL(t,e,n){const r=new qn;return t.asyncQueue.enqueue((0,q.Z)(function*(){try{yield nv(t,n),yield NA(t,e),r.resolve()}catch(i){const s=i;if(!xL(s))throw s;pi("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function YL(t){if(t._initialized||t._terminated)throw new X(B.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Xs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xs(Zn.fromBase64String(e))}catch(n){throw new X(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Xs(Zn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ko{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new X(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class zu{constructor(e){this._methodName=e}}class ov{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}}const WQ=/^__.*__$/;class qQ{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new No(e,this.data,this.fieldMask,n,this.fieldTransforms):new Xl(e,this.data,n,this.fieldTransforms)}}class JL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new No(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function XL(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve()}}class av{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.Eu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new av(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.mu(e),i}fu(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.Eu(),i}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return lv(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(XL(this.du)&&WQ.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class ZQ{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||_p(e)}Su(e,n,r,i=!1){return new av({du:e,methodName:n,wu:r,path:sn.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gu(t){const e=t._freezeSettings(),n=_p(t._databaseId);return new ZQ(t._databaseId,!!e.ignoreUndefinedProperties,n)}function uv(t,e,n,r,i,s={}){const o=t.Su(s.merge||s.mergeFields?2:0,e,n,i);ZA("Data must be an object, but it was:",o,r);const a=n2(r,o);let u,l;if(s.merge)u=new gi(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const g of s.mergeFields){const m=Cp(e,g,n);if(!o.contains(m))throw new X(B.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);i2(h,m)||h.push(m)}u=new gi(h),l=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,l=o.fieldTransforms;return new qQ(new yr(a),u,l)}class Dp extends zu{_toFieldTransform(e){if(2!==e.du)throw e.pu(1===e.du?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Dp}}function e2(t,e,n){return new av({du:3,wu:e.settings.wu,methodName:t._methodName,Vu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class $A extends zu{_toFieldTransform(e){return new rp(e.path,new Yl)}isEqual(e){return e instanceof $A}}class HA extends zu{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){const n=e2(this,e,!0),r=this.bu.map(s=>Wu(s,n)),i=new ku(r);return new rp(e.path,i)}isEqual(e){return e instanceof HA&&(0,wt.vZ)(this.bu,e.bu)}}class zA extends zu{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){const n=e2(this,e,!0),r=this.bu.map(s=>Wu(s,n)),i=new Vu(r);return new rp(e.path,i)}isEqual(e){return e instanceof zA&&(0,wt.vZ)(this.bu,e.bu)}}class GA extends zu{constructor(e,n){super(e),this.Du=n}_toFieldTransform(e){const n=new Jl(e.serializer,GV(e.serializer,this.Du));return new rp(e.path,n)}isEqual(e){return e instanceof GA&&this.Du===e.Du}}function WA(t,e,n,r){const i=t.Su(1,e,n);ZA("Data must be an object, but it was:",i,r);const s=[],o=yr.empty();ga(r,(u,l)=>{const h=cv(e,u,n);l=(0,wt.m9)(l);const g=i.fu(h);if(l instanceof Dp)s.push(h);else{const m=Wu(l,g);null!=m&&(s.push(h),o.set(h,m))}});const a=new gi(s);return new JL(o,a,i.fieldTransforms)}function qA(t,e,n,r,i,s){const o=t.Su(1,e,n),a=[Cp(e,r,n)],u=[i];if(s.length%2!=0)throw new X(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(Cp(e,s[m])),u.push(s[m+1]);const l=[],h=yr.empty();for(let m=a.length-1;m>=0;--m)if(!i2(l,a[m])){const y=a[m];let C=u[m];C=(0,wt.m9)(C);const S=o.fu(y);if(C instanceof Dp)l.push(y);else{const M=Wu(C,S);null!=M&&(l.push(y),h.set(y,M))}}const g=new gi(l);return new JL(h,g,o.fieldTransforms)}function t2(t,e,n,r=!1){return Wu(n,t.Su(r?4:3,e))}function Wu(t,e){if(r2(t=(0,wt.m9)(t)))return ZA("Unsupported field value:",e,t),n2(t,e);if(t instanceof zu)return function(r,i){if(!XL(i.du))throw i.pu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.pu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&4!==e.du)throw e.pu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=Wu(a,i.gu(o));null==u&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if(null===(r=(0,wt.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return GV(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=ln.fromDate(r);return{timestampValue:td(i.serializer,s)}}if(r instanceof ln){const s=new ln(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:td(i.serializer,s)}}if(r instanceof ov)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Xs)return{bytesValue:hF(i.serializer,r._byteString)};if(r instanceof an){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.pu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:oT(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.pu(`Unsupported field value: ${iv(r)}`)}(t,e)}function n2(t,e){const n={};return fV(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ga(t,(r,i)=>{const s=Wu(i,e.Ru(r));null!=s&&(n[r]=s)}),{mapValue:{fields:n}}}function r2(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof ln||t instanceof ov||t instanceof Xs||t instanceof an||t instanceof zu)}function ZA(t,e,n){if(!r2(n)||"object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=iv(n);throw e.pu("an object"===r?t+" a custom object":t+" "+r)}var i}function Cp(t,e,n){if((e=(0,wt.m9)(e))instanceof ko)return e._internalPath;if("string"==typeof e)return cv(t,e);throw lv("Field path arguments must be of type string or ",t,!1,void 0,n)}const KQ=new RegExp("[~\\*/\\[\\]]");function cv(t,e,n){if(e.search(KQ)>=0)throw lv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ko(...e.split("."))._internalPath}catch{throw lv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function lv(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new X(B.INVALID_ARGUMENT,a+t+u)}function i2(t,e){return t.some(n=>n.isEqual(e))}class Tp{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new an(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new QQ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(dv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class QQ extends Tp{data(){return super.data()}}function dv(t,e){return"string"==typeof e?cv(t,e):e instanceof ko?e._internalPath:e._delegate._internalPath}function s2(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new X(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class KA{}class Ap extends KA{}function Sa(t,e,...n){let r=[];e instanceof KA&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof vd).length,a=s.filter(u=>u instanceof bp).length;if(o>1||o>0&&a>0)throw new X(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class bp extends Ap{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new bp(e,n,r)}_apply(e){const n=this._parse(e);return c2(e._query,n),new vr(e.firestore,e.converter,JC(e._query,n))}_parse(e){const n=Gu(e.firestore);return function(s,o,a,u,l,h,g){let m;if(l.isKeyField()){if("array-contains"===h||"array-contains-any"===h)throw new X(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if("in"===h||"not-in"===h){u2(g,h);const y=[];for(const C of g)y.push(a2(u,s,C));m={arrayValue:{values:y}}}else m=a2(u,s,g)}else"in"!==h&&"not-in"!==h&&"array-contains-any"!==h||u2(g,h),m=t2(a,"where",g,"in"===h||"not-in"===h);return mt.create(l,h,m)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class vd extends KA{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new vd(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:kt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)c2(o,u),o=JC(o,u)}(e._query,n),new vr(e.firestore,e.converter,JC(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class QA extends Ap{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new QA(e,n)}_apply(e){const n=function(i,s,o){if(null!==i.startAt)throw new X(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new X(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yf(s,o)}(e._query,this._field,this._direction);return new vr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Po(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}class hv extends Ap{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new hv(e,n,r)}_apply(e){return new vr(e.firestore,e.converter,Ny(e._query,this._limit,this._limitType))}}class fv extends Ap{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new fv(e,n,r)}_apply(e){const n=o2(e,this.type,this._docOrFields,this._inclusive);return new vr(e.firestore,e.converter,(s=n,new Po((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class pv extends Ap{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new pv(e,n,r)}_apply(e){const n=o2(e,this.type,this._docOrFields,this._inclusive);return new vr(e.firestore,e.converter,(s=n,new Po((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function o2(t,e,n,r){if(n[0]=(0,wt.m9)(n[0]),n[0]instanceof Tp)return function(s,o,a,u,l){if(!u)throw new X(B.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const g of Kl(s))if(g.field.isKeyField())h.push(xu(o,u.key));else{const m=u.data.field(g.field);if(Ty(m))throw new X(B.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===m){const y=g.field.canonicalString();throw new X(B.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(m)}return new Ea(h,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Gu(t.firestore);return function(o,a,u,l,h,g){const m=o.explicitOrderBy;if(h.length>m.length)throw new X(B.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let C=0;C<h.length;C++){const S=h[C];if(m[C].field.isKeyField()){if("string"!=typeof S)throw new X(B.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof S}`);if(!YC(o)&&-1!==S.indexOf("/"))throw new X(B.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${S}' contains a slash.`);const M=o.path.child(gt.fromString(S));if(!le.isDocumentKey(M))throw new X(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);const V=new le(M);y.push(xu(a,V))}else{const M=t2(u,l,S);y.push(M)}}return new Ea(y,g)}(t._query,t.firestore._databaseId,i,e,n,r)}}function a2(t,e,n){if("string"==typeof(n=(0,wt.m9)(n))){if(""===n)throw new X(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!YC(e)&&-1!==n.indexOf("/"))throw new X(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(gt.fromString(n));if(!le.isDocumentKey(r))throw new X(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xu(t,new le(r))}if(n instanceof an)return xu(t,n._key);throw new X(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${iv(n)}.`)}function u2(t,e){if(!Array.isArray(t)||0===t.length)throw new X(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function c2(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new X(B.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class YA{convertValue(e,n="none"){switch(va(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ro(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ve()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ga(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new ov(Dn(e.latitude),Dn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ay(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(qf(e));default:return null}}convertTimestamp(e){const n=ma(e);return new ln(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=gt.fromString(e);Ae(DF(r));const i=new _a(r.get(1),r.get(3)),s=new le(r.popFirst(5));return i.isEqual(n)||On(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}function gv(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class sY extends YA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new an(this.firestore,null,n)}}class qu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vo extends Tp{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Sp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(dv("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Sp extends Vo{data(e={}){return super.data(e)}}class Ra{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new qu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Sp(this._firestore,this._userDataWriter,r.key,r,new qu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new Sp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new qu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const u=new Sp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new qu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,h=-1;return 0!==a.type&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:aY(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function aY(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve()}}function d2(t,e){return t instanceof Vo&&e instanceof Vo?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Ra&&e instanceof Ra&&t._firestore===e._firestore&&BA(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}class Pa extends YA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new an(this.firestore,null,n)}}function h2(t,e,n){t=ct(t,an);const r=ct(t.firestore,Wt),i=gv(t.converter,e,n);return Id(r,[uv(Gu(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,dn.none())])}function f2(t,e,n,...r){t=ct(t,an);const i=ct(t.firestore,Wt),s=Gu(i);let o;return o="string"==typeof(e=(0,wt.m9)(e))||e instanceof ko?qA(s,"updateDoc",t._key,e,n,r):WA(s,"updateDoc",t._key,e),Id(i,[o.toMutation(t._key,dn.exists(!0))])}function p2(t,...e){var n,r,i;t=(0,wt.m9)(t);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||jA(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(jA(e[o])){const g=e[o];e[o]=null===(n=g.next)||void 0===n?void 0:n.bind(g),e[o+1]=null===(r=g.error)||void 0===r?void 0:r.bind(g),e[o+2]=null===(i=g.complete)||void 0===i?void 0:i.bind(g)}let u,l,h;if(t instanceof an)l=ct(t.firestore,Wt),h=Zl(t._key.path),u={next:g=>{e[o]&&e[o](JA(l,t,g))},error:e[o+1],complete:e[o+2]};else{const g=ct(t,vr);l=ct(g.firestore,Wt),h=g._query;const m=new Pa(l);u={next:y=>{e[o]&&e[o](new Ra(l,m,g,y))},error:e[o+1],complete:e[o+2]},s2(t._query)}return function(m,y,C,S){const M=new tv(S),V=new iA(y,M,C);return m.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return XT(yield yd(m),V)})),()=>{M.La(),m.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return tA(yield yd(m),V)}))}}(Cn(l),h,a,u)}function Id(t,e){return function(r,i){const s=new qn;return r.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return function tQ(t,e,n){return cA.apply(this,arguments)}(yield FA(r),i,s)})),s.promise}(Cn(t),e)}function JA(t,e,n){const r=n.docs.get(e._key),i=new Pa(t);return new Vo(t,i,e._key,r,new qu(n.hasPendingWrites,n.fromCache),e.converter)}const TY={maxAttempts:5};class g2{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Gu(e)}set(e,n,r){this._verifyNotCommitted();const i=Ma(e,this._firestore),s=gv(i.converter,n,r),o=uv(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,dn.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Ma(e,this._firestore);let o;return o="string"==typeof(n=(0,wt.m9)(n))||n instanceof ko?qA(this._dataReader,"WriteBatch.update",s._key,n,r,i):WA(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,dn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ma(e,this._firestore);return this._mutations=this._mutations.concat(new ed(n._key,dn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new X(B.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ma(t,e){if((t=(0,wt.m9)(t)).firestore!==e)throw new X(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class AY extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Gu(n)}get(n){const r=Ma(n,this._firestore),i=new sY(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return ve();const o=s[0];if(o.isFoundDocument())return new Tp(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new Tp(this._firestore,i,r._key,null,r.converter);throw ve()})}set(n,r,i){const s=Ma(n,this._firestore),o=gv(s.converter,r,i),a=uv(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=Ma(n,this._firestore);let a;return a="string"==typeof(r=(0,wt.m9)(r))||r instanceof ko?qA(this._dataReader,"Transaction.update",o._key,r,i,s):WA(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=Ma(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ma(e,this._firestore),r=new Pa(this._firestore);return super.get(e).then(i=>new Vo(this._firestore,r,n._key,i._document,new qu(!1,!1),n.converter))}}function e0(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new X("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function v2(){if(typeof Uint8Array>"u")throw new X("unimplemented","Uint8Arrays are not available in this environment.")}function I2(){if(!function aZ(){return typeof atob<"u"}())throw new X("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){Bl=Rr.SDK_VERSION,(0,Rr._registerComponent)(new MO.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Wt(new M7(r.getProvider("auth-internal")),new O7(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new X(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _a(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,Rr.registerVersion)(Kk,"4.4.2",e),(0,Rr.registerVersion)(Kk,"4.4.2","esm2017")}();class Rp{constructor(e){this._delegate=e}static fromBase64String(e){return I2(),new Rp(Xs.fromBase64String(e))}static fromUint8Array(e){return v2(),new Rp(Xs.fromUint8Array(e))}toBase64(){return I2(),this._delegate.toBase64()}toUint8Array(){return v2(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function t0(t){return function VY(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of e)if(r in n&&"function"==typeof n[r])return!0;return!1}(t,["next","error","complete"])}class FY{enableIndexedDbPersistence(e,n){return function FQ(t,e){YL(t=ct(t,Wt));const n=Cn(t);if(n._uninitializedComponentsProvider)throw new X(B.FAILED_PRECONDITION,"SDK cache is already specified.");pi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new md;return QL(n,i,new PA(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function LQ(t){YL(t=ct(t,Wt));const e=Cn(t);if(e._uninitializedComponentsProvider)throw new X(B.FAILED_PRECONDITION,"SDK cache is already specified.");pi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new md;return QL(e,r,new ML(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function UQ(t){if(t._initialized&&!t._terminated)throw new X(B.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new qn;return t._queue.enqueueAndForgetEvenWhileRestricted((0,q.Z)(function*(){try{yield(n=(0,q.Z)(function*(i){if(!us.D())return Promise.resolve();const s=i+"main";yield us.delete(s)}),function r(i){return n.apply(this,arguments)})(wT(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class E2{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof _a||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&pi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,r={}){WL(this._delegate,e,n,r)}enableNetwork(){return function jQ(t){return function wQ(t){return t.asyncQueue.enqueue((0,q.Z)(function*(){const e=yield OL(t),n=yield kL(t);return e.setNetworkEnabled(!0),function(i){const s=ue(i);return s.v_.delete(0),yp(s)}(n)}))}(Cn(t=ct(t,Wt)))}(this._delegate)}disableNetwork(){return function $Q(t){return function DQ(t){return t.asyncQueue.enqueue((0,q.Z)(function*(){const e=yield OL(t),n=yield kL(t);return e.setNetworkEnabled(!1),(r=(0,q.Z)(function*(s){const o=ue(s);o.v_.add(0),yield cd(o),o.x_.set("Offline")}),function i(s){return r.apply(this,arguments)})(n);var r}))}(Cn(t=ct(t,Wt)))}(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,jL("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function BQ(t){return function(n){const r=new qn;return n.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return function sQ(t,e){return pA.apply(this,arguments)}(yield FA(n),r)})),r.promise}(Cn(t=ct(t,Wt)))}(this._delegate)}onSnapshotsInSync(e){return function mY(t,e){return function AQ(t,e){const n=new tv(e);return t.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return i=yield yd(t),s=n,ue(i).K_.add(s),void s.next();var i,s})),()=>{n.La(),t.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return i=yield yd(t),s=n,void ue(i).K_.delete(s);var i,s}))}}(Cn(t=ct(t,Wt)),jA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new X("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ed(this,qL(this._delegate,e))}catch(n){throw ri(n,"collection()","Firestore.collection()")}}doc(e){try{return new cs(this,sv(this._delegate,e))}catch(n){throw ri(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ii(this,function NQ(t,e){if(t=ct(t,Ep),UA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new X(B.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new vr(t,null,(r=e,new Po(gt.emptyPath(),r)));var r}(this._delegate,e))}catch(n){throw ri(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function bY(t,e,n){t=ct(t,Wt);const r=Object.assign(Object.assign({},TY),n);return function(s){if(s.maxAttempts<1)throw new X(B.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const u=new qn;return s.asyncQueue.enqueueAndForget((0,q.Z)(function*(){const l=yield function VL(t){return rv(t).then(e=>e.datastore)}(s);new IQ(s.asyncQueue,l,a,o,u).ja()})),u.promise}(Cn(t),i=>e(new AY(t,i)),r)}(this._delegate,n=>e(new w2(this,n)))}batch(){return Cn(this._delegate),new D2(new g2(this._delegate,e=>Id(this._delegate,e)))}loadBundle(e){return function HQ(t,e){const n=Cn(t=ct(t,Wt)),r=new OQ;return function bQ(t,e,n,r){const i=function(o,a){let u;return u="string"==typeof o?iF().encode(o):o,h=function(h,g){if(h instanceof Uint8Array)return NL(h,g);if(h instanceof ArrayBuffer)return NL(new Uint8Array(h),g);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new yQ(h,a);var h}(n,_p(e));t.asyncQueue.enqueueAndForget((0,q.Z)(function*(){!function mQ(t,e,n){const r=ue(t);var i;(i=(0,q.Z)(function*(o,a,u){try{const l=yield a.getMetadata();if(yield function(C,S){const M=ue(C),V=kn(S.createTime);return M.persistence.runTransaction("hasNewerBundle","readonly",x=>M.$r.getBundleMetadata(x,S.id)).then(x=>!!x&&x.createTime.compareTo(V)>=0)}(o.localStore,l))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(C=l).totalDocuments,bytesLoaded:C.totalBytes,totalDocuments:C.totalDocuments,totalBytes:C.totalBytes}),Promise.resolve(new Set);u._updateProgress(wL(l));const h=new KK(l,o.localStore,a.serializer);let g=yield a.Oa();for(;g;){const y=yield h.na(g);y&&u._updateProgress(y),g=yield a.Oa()}const m=yield h.complete();return yield Oo(o,m.sa,void 0),yield function(C,S){const M=ue(C);return M.persistence.runTransaction("Save bundle","readwrite",V=>M.$r.saveBundleMetadata(V,S))}(o.localStore,l),u._completeWith(m.progress),Promise.resolve(m.ia)}catch(l){return pi("SyncEngine",`Loading bundle failed with ${l}`),u._failWith(l),Promise.resolve(new Set)}var C}),function s(o,a,u){return i.apply(this,arguments)})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield FA(t),i,r)}))}(n,t._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function zQ(t,e){return function SQ(t,e){return t.asyncQueue.enqueue((0,q.Z)(function*(){return function(r,i){const s=ue(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.$r.getNamedQuery(o,i))}(yield _d(t),e)}))}(Cn(t=ct(t,Wt)),e).then(n=>n?new vr(t,null,n.query):null)}(this._delegate,e).then(n=>n?new ii(this,n):null)}}class _v extends YA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rp(new Xs(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return cs.forKey(n,this.firestore,null)}}class w2{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new _v(e)}get(e){const n=Ku(e);return this._delegate.get(n).then(r=>new Pp(this._firestore,new Vo(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Ku(e);return r?(e0("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Ku(e);return 2===arguments.length?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Ku(e);return this._delegate.delete(n),this}}class D2{constructor(e){this._delegate=e}set(e,n,r){const i=Ku(e);return r?(e0("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Ku(e);return 2===arguments.length?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Ku(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Zu{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Sp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Mp(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Zu.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new Zu(e,new _v(e),n),i.set(n,s)),s}}Zu.INSTANCES=new WeakMap;class cs{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new _v(e)}static forPath(e,n,r){if(e.length%2!=0)throw new X("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new cs(n,new an(n._delegate,r,new le(e)))}static forKey(e,n,r){return new cs(n,new an(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ed(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ed(this.firestore,qL(this._delegate,e))}catch(n){throw ri(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,wt.m9)(e))instanceof an&&ZL(this._delegate,e)}set(e,n){n=e0("DocumentReference.set",n);try{return n?h2(this._delegate,e,n):h2(this._delegate,e)}catch(r){throw ri(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return 1===arguments.length?f2(this._delegate,e):f2(this._delegate,e,n,...r)}catch(i){throw ri(i,"updateDoc()","DocumentReference.update()")}}delete(){return function pY(t){return Id(ct(t.firestore,Wt),[new ed(t._key,dn.none())])}(this._delegate)}onSnapshot(...e){const n=C2(e),r=T2(e,i=>new Pp(this.firestore,new Vo(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return p2(this._delegate,n,r)}get(e){let n;return n="cache"===e?.source?function cY(t){t=ct(t,an);const e=ct(t.firestore,Wt),n=Cn(e),r=new Pa(e);return function CQ(t,e){const n=new qn;return t.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return(r=(0,q.Z)(function*(s,o,a){try{const u=yield function(h,g){const m=ue(h);return m.persistence.runTransaction("read document","readonly",y=>m.localDocuments.getDocument(y,g))}(s,o);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new X(B.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const l=hd(u,`Failed to get document '${o} from cache`);a.reject(l)}}),function i(s,o,a){return r.apply(this,arguments)})(yield _d(t),e,n);var r})),n.promise}(n,t._key).then(i=>new Vo(e,r,t._key,i,new qu(null!==i&&i.hasLocalMutations,!0),t.converter))}(this._delegate):"server"===e?.source?function lY(t){t=ct(t,an);const e=ct(t.firestore,Wt);return FL(Cn(e),t._key,{source:"server"}).then(n=>JA(e,t,n))}(this._delegate):function uY(t){t=ct(t,an);const e=ct(t.firestore,Wt);return FL(Cn(e),t._key).then(n=>JA(e,t,n))}(this._delegate),n.then(r=>new Pp(this.firestore,new Vo(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new cs(this.firestore,this._delegate.withConverter(e?Zu.getInstance(this.firestore,e):null))}}function ri(t,e,n){return t.message=t.message.replace(e,n),t}function C2(t){for(const e of t)if("object"==typeof e&&!t0(e))return e;return{}}function T2(t,e){var n,r;let i;return i=t0(t[0])?t[0]:t0(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Pp{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new cs(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return d2(this._delegate,e._delegate)}}class Mp extends Pp{data(e){const n=this._delegate.data(e);return this._delegate._converter||function S7(t,e){t||ve()}(void 0!==n),n}}class ii{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new _v(e)}where(e,n,r){try{return new ii(this.firestore,Sa(this._delegate,function YQ(t,e,n){const r=e,i=dv("where",t);return bp._create(i,r,n)}(e,n,r)))}catch(i){throw ri(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new ii(this.firestore,Sa(this._delegate,function JQ(t,e="asc"){const n=e,r=dv("orderBy",t);return QA._create(r,n)}(e,n)))}catch(r){throw ri(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ii(this.firestore,Sa(this._delegate,function XQ(t){return zL("limit",t),hv._create("limit",t,"F")}(e)))}catch(n){throw ri(n,"limit()","Query.limit()")}}limitToLast(e){try{return new ii(this.firestore,Sa(this._delegate,function eY(t){return zL("limitToLast",t),hv._create("limitToLast",t,"L")}(e)))}catch(n){throw ri(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ii(this.firestore,Sa(this._delegate,function tY(...t){return fv._create("startAt",t,!0)}(...e)))}catch(n){throw ri(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ii(this.firestore,Sa(this._delegate,function nY(...t){return fv._create("startAfter",t,!1)}(...e)))}catch(n){throw ri(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ii(this.firestore,Sa(this._delegate,function rY(...t){return pv._create("endBefore",t,!1)}(...e)))}catch(n){throw ri(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ii(this.firestore,Sa(this._delegate,function iY(...t){return pv._create("endAt",t,!0)}(...e)))}catch(n){throw ri(n,"endAt()","Query.endAt()")}}isEqual(e){return BA(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function hY(t){t=ct(t,vr);const e=ct(t.firestore,Wt),n=Cn(e),r=new Pa(e);return function TQ(t,e){const n=new qn;return t.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return(r=(0,q.Z)(function*(s,o,a){try{const u=yield Zy(s,o,!0),l=new TL(o,u.hs),h=l.ha(u.documents),g=l.applyChanges(h,!1);a.resolve(g.snapshot)}catch(u){const l=hd(u,`Failed to execute query '${o} against cache`);a.reject(l)}}),function i(s,o,a){return r.apply(this,arguments)})(yield _d(t),e,n);var r})),n.promise}(n,t._query).then(i=>new Ra(e,r,t,i))}(this._delegate):"server"===e?.source?function fY(t){t=ct(t,vr);const e=ct(t.firestore,Wt),n=Cn(e),r=new Pa(e);return LL(n,t._query,{source:"server"}).then(i=>new Ra(e,r,t,i))}(this._delegate):function dY(t){t=ct(t,vr);const e=ct(t.firestore,Wt),n=Cn(e),r=new Pa(e);return s2(t._query),LL(n,t._query).then(i=>new Ra(e,r,t,i))}(this._delegate),n.then(r=>new n0(this.firestore,new Ra(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=C2(e),r=T2(e,i=>new n0(this.firestore,new Ra(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return p2(this._delegate,n,r)}withConverter(e){return new ii(this.firestore,this._delegate.withConverter(e?Zu.getInstance(this.firestore,e):null))}}class UY{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Mp(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class n0{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new ii(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Mp(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new UY(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Mp(this._firestore,r))})}isEqual(e){return d2(this._delegate,e._delegate)}}class Ed extends ii{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new cs(this.firestore,e):null}doc(e){try{return new cs(this.firestore,void 0===e?sv(this._delegate):sv(this._delegate,e))}catch(n){throw ri(n,"doc()","CollectionReference.doc()")}}add(e){return function gY(t,e){const n=ct(t.firestore,Wt),r=sv(t),i=gv(t.converter,e);return Id(n,[uv(Gu(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,dn.exists(!1))]).then(()=>r)}(this._delegate,e).then(n=>new cs(this.firestore,n))}isEqual(e){return ZL(this._delegate,e._delegate)}withConverter(e){return new Ed(this.firestore,this._delegate.withConverter(e?Zu.getInstance(this.firestore,e):null))}}function Ku(t){return ct(t,an)}class r0{constructor(...e){this._delegate=new ko(...e)}static documentId(){return new r0(sn.keyField().canonicalString())}isEqual(e){return(e=(0,wt.m9)(e))instanceof ko&&this._delegate._internalPath.isEqual(e._internalPath)}}class Qu{constructor(e){this._delegate=e}static serverTimestamp(){const e=function RY(){return new $A("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Qu(e)}static delete(){const e=function SY(){return new Dp("deleteField")}();return e._methodName="FieldValue.delete",new Qu(e)}static arrayUnion(...e){const n=function PY(...t){return new HA("arrayUnion",t)}(...e);return n._methodName="FieldValue.arrayUnion",new Qu(n)}static arrayRemove(...e){const n=function MY(...t){return new zA("arrayRemove",t)}(...e);return n._methodName="FieldValue.arrayRemove",new Qu(n)}static increment(e){const n=function NY(t){return new GA("increment",t)}(e);return n._methodName="FieldValue.increment",new Qu(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const BY={Firestore:E2,GeoPoint:ov,Timestamp:ln,Blob:Rp,Transaction:w2,WriteBatch:D2,DocumentReference:cs,DocumentSnapshot:Pp,Query:ii,QueryDocumentSnapshot:Mp,QuerySnapshot:n0,CollectionReference:Ed,FieldPath:r0,FieldValue:Qu,setLogLevel:function LY(t){!function b7(t){ha.setLogLevel(t)}(t)},CACHE_SIZE_UNLIMITED:-1};function A2(t,e){return function HY(t,e=p1){return new qe(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}(t,e)}function s0(t,e){return A2(t,e).pipe(me(n=>({payload:n,type:"query"})))}!function $Y(t){(function jY(t,e){t.INTERNAL.registerComponent(new MO.wA("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},BY)))})(t,(e,n)=>new E2(e,n,new FY)),t.registerVersion("@firebase/firestore-compat","0.3.25")}(k_.Z);class b2{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const r=this.ref.collection(e),{ref:i,query:s}=M2(r,n);return new P2(i,s,this.afs)}snapshotChanges(){return function zY(t,e){return A2(t,e).pipe(f_(void 0),QD(),me(n=>{const[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Oi)}valueChanges(e={}){return this.snapshotChanges().pipe(me(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return I(this.ref.get(e)).pipe(Oi)}}function yv(t,e){return s0(t,e).pipe(f_(void 0),QD(),me(n=>{const[r,i]=n,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const l=s.find(g=>g.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(g=>g.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),o}))}function S2(t,e,n){return yv(t,n).pipe(g_((r,i)=>function GY(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=function WY(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return o0(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return o0(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return o0(t,e.oldIndex,1)}return t}(t,r))}),t}(r,i.map(s=>s.payload),e),[]),Ve(),me(r=>r.map(i=>({type:i.type,payload:i}))))}function o0(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function R2(t){return(!t||0===t.length)&&(t=["added","removed","modified"]),t}class P2{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=yv(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(me(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(f_(void 0),QD(),Is(([r,i])=>i.length>0||!r),me(([,r])=>r),Oi)}auditTrail(e){return this.stateChanges(e).pipe(g_((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=R2(e);return S2(this.query,n,this.afs.schedulers.outsideAngular).pipe(Oi)}valueChanges(e={}){return s0(this.query,this.afs.schedulers.outsideAngular).pipe(me(n=>n.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Oi)}get(e){return I(this.query.get(e)).pipe(Oi)}add(e){return this.ref.add(e)}doc(e){return new b2(this.ref.doc(e),this.afs)}}class qY{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?yv(this.query,this.afs.schedulers.outsideAngular).pipe(me(n=>n.filter(r=>e.indexOf(r.type)>-1)),Is(n=>n.length>0),Oi):yv(this.query,this.afs.schedulers.outsideAngular).pipe(Oi)}auditTrail(e){return this.stateChanges(e).pipe(g_((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=R2(e);return S2(this.query,n,this.afs.schedulers.outsideAngular).pipe(Oi)}valueChanges(e={}){return s0(this.query,this.afs.schedulers.outsideAngular).pipe(me(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Oi)}get(e){return I(this.query.get(e)).pipe(Oi)}}const ZY=new ae("angularfire2.enableFirestorePersistence"),KY=new ae("angularfire2.firestore.persistenceSettings"),QY=new ae("angularfire2.firestore.settings"),YY=new ae("angularfire2.firestore.use-emulator");function M2(t,e=(n=>n)){return{query:e(t),ref:t}}let JY=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,s,o,a,u,l,h,g,m,y,C,S,M,V,x){this.schedulers=u;const $=SD(n,a,r),re=h;g&&S1($,a,m,C,S,M,y,V),[this.firestore,this.persistenceEnabled$]=y1(`${$.name}.firestore`,"AngularFirestore",$.name,()=>{const de=a.runOutsideAngular(()=>$.firestore());if(s&&de.settings(s),re&&de.useEmulator(...re),i&&!u_(o)){const $e=()=>{try{return I(de.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(St){return typeof console<"u"&&console.warn(St),A(!1)}};return[de,a.runOutsideAngular($e)]}return[de,A(!1)]},[s,re,i])}collection(n,r){let i;i="string"==typeof n?this.firestore.collection(n):n;const{ref:s,query:o}=M2(i,r),a=this.schedulers.ngZone.run(()=>s);return new P2(a,o,this)}collectionGroup(n,r){const i=r||(o=>o),s=this.firestore.collectionGroup(n);return new qY(i(s),this)}doc(n){let r;r="string"==typeof n?this.firestore.doc(n):n;const i=this.schedulers.ngZone.run(()=>r);return new b2(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(oe(V_),oe(bD,8),oe(ZY,8),oe(QY,8),oe(go),oe(Et),oe(gf),oe(KY,8),oe(YY,8),oe(RD,8),oe(w1,8),oe(D1,8),oe(C1,8),oe(T1,8),oe(A1,8),oe(b1,8),oe(O_,8))};static \u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),XY=(()=>{class t{constructor(n){this.afs=n}addStudent(n){return n.id=this.afs.createId(),this.afs.collection("/Students").add(n)}getAllStudents(){return this.afs.collection("/Students").snapshotChanges()}deleteStudent(n){return this.afs.doc("/Students/"+n.id).delete()}updateStudent(n){this.deleteStudent(n),this.addStudent(n)}editStudent(n){return this.afs.doc("/Students/"+n.id).update(n)}static#e=this.\u0275fac=function(r){return new(r||t)(oe(JY))};static#t=this.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function eJ(t,e){if(1&t){const n=xm();Pe(0,"div")(1,"div",4)(2,"input",15),Pt("keyup",function(i){return hr(n),Kr(Qr().onfirstNameKey(i))}),Ne(),Pe(3,"label",16),tt(4,"First Name"),Ne()(),Pe(5,"div",4)(6,"input",17),Pt("keyup",function(i){return hr(n),Kr(Qr().onlastNameKey(i))}),Ne(),Pe(7,"label",18),tt(8,"Last Name"),Ne()(),Pe(9,"div",4)(10,"input",19),Pt("keyup",function(i){return hr(n),Kr(Qr().onemailKey(i))}),Ne(),Pe(11,"label",20),tt(12,"Email"),Ne()(),Pe(13,"div",4)(14,"input",21),Pt("keyup",function(i){return hr(n),Kr(Qr().onMobileKey(i))}),Ne(),Pe(15,"label",22),tt(16,"Mobile Number"),Ne()(),Pe(17,"button",23),Pt("click",function(){hr(n);const i=Qr();return Kr(i.saveStudent(i.studentObj))}),tt(18,"Save Student"),Ne()()}if(2&t){const n=Qr();Gn(2),al("ngModel",n.studentObj.first_name),Gn(4),al("ngModel",n.studentObj.last_name),Gn(4),al("ngModel",n.studentObj.email),Gn(4),al("ngModel",n.studentObj.mobile)}}function tJ(t,e){if(1&t){const n=xm();Pe(0,"div",4)(1,"input",24),Pt("ngModelChange",function(i){return hr(n),Kr(Qr().first_name=i)}),Ne(),Pe(2,"label",16),tt(3,"First Name"),Ne()(),Pe(4,"div",4)(5,"input",25),Pt("ngModelChange",function(i){return hr(n),Kr(Qr().last_name=i)}),Ne(),Pe(6,"label",18),tt(7,"Last Name"),Ne()(),Pe(8,"div",4)(9,"input",26),Pt("ngModelChange",function(i){return hr(n),Kr(Qr().email=i)}),Ne(),Pe(10,"label",20),tt(11,"Email"),Ne()(),Pe(12,"div",4)(13,"input",27),Pt("ngModelChange",function(i){return hr(n),Kr(Qr().mobile=i)}),Ne(),Pe(14,"label",22),tt(15,"Mobile Number"),Ne()(),Pe(16,"button",28),Pt("click",function(){return hr(n),Kr(Qr().addStudent())}),tt(17,"Add Student"),Ne()}if(2&t){const n=Qr();Gn(1),rs("ngModel",n.first_name),Gn(4),rs("ngModel",n.last_name),Gn(4),rs("ngModel",n.email),Gn(4),rs("ngModel",n.mobile)}}function nJ(t,e){if(1&t){const n=xm();Pe(0,"tr")(1,"td"),tt(2),Ne(),Pe(3,"td"),tt(4),Ne(),Pe(5,"td"),tt(6),Ne(),Pe(7,"td"),tt(8),Ne(),Pe(9,"td")(10,"button",29),Pt("click",function(){const s=hr(n).$implicit;return Kr(Qr().updateStudent(s))}),tt(11,"Edit"),Ne()(),Pe(12,"td")(13,"button",30),Pt("click",function(){const s=hr(n).$implicit;return Kr(Qr().deleteStudent(s))}),tt(14,"Delete"),Ne()()()}if(2&t){const n=e.$implicit;Gn(2),cl(n.first_name),Gn(2),cl(n.last_name),Gn(2),cl(n.mobile),Gn(2),cl(n.email)}}const rJ=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:I8},{path:"dashboard",component:(()=>{class t{constructor(n,r){this.auth=n,this.data=r,this.studentsList=[],this.editMode=!1,this.id="",this.first_name="",this.last_name="",this.email="",this.mobile="",this.studentObj={id:"",first_name:"",last_name:"",email:"",mobile:""}}ngOnInit(){this.getAllStudents()}logout(){this.auth.logout()}getAllStudents(){this.data.getAllStudents().subscribe(n=>{this.studentsList=n.map(r=>{const i=r.payload.doc.data();return i.id=r.payload.doc.id,i})},n=>{alert("Error While Fetching Student Data!!")})}addStudent(){""!=this.first_name&&""!=this.last_name&&""!=this.mobile&&""!=this.email?(this.studentObj.id="",this.studentObj.email=this.email,this.studentObj.first_name=this.first_name,this.studentObj.last_name=this.last_name,this.studentObj.mobile=this.mobile,this.data.addStudent(this.studentObj),this.resetForm()):alert("Please Fill All The Details")}resetForm(){this.id="",this.first_name="",this.last_name="",this.mobile="",this.email=""}updateStudent(n){this.editMode=!0,1==this.editMode&&(console.log("Now you can Edit",n),this.studentObj=n)}saveStudent(n){console.log("Saving the data",n),this.data.updateStudent(n)}deleteStudent(n){window.confirm("Are you Sure you want to Delete "+n.first_name+"?")&&this.data.deleteStudent(n)}onfirstNameKey(n){this.studentObj.first_name=n.target.value,console.log(this.studentObj.first_name)}onlastNameKey(n){this.studentObj.last_name=n.target.value,console.log(this.studentObj.last_name)}onMobileKey(n){this.studentObj.mobile=n.target.value,console.log(this.studentObj.mobile)}onemailKey(n){this.studentObj.email=n.target.value,console.log(this.studentObj.email)}static#e=this.\u0275fac=function(r){return new(r||t)(se(PD),se(XY))};static#t=this.\u0275cmp=hs({type:t,selectors:[["app-dashboard"]],decls:32,vars:3,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-4","mt-5"],[1,"card","shadow","border-0","p-3"],[1,"form-floating","mb-3"],[1,"text-center","text-primary"],[4,"ngIf","ngIfElse"],["normalView",""],[1,"col-md-8","mt-5"],[1,"text-danger","text-center"],[1,"card","shadow"],[1,"card-body"],[1,"table","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],["type","text","name","firstname",1,"form-control",3,"ngModel","keyup"],["for","firstname"],["type","text","name","lastname",1,"form-control",3,"ngModel","keyup"],["for","lastname"],["type","email","name","email",1,"form-control",3,"ngModel","keyup"],["for","email"],["type","number","name","mobile",1,"form-control",3,"ngModel","keyup"],["for","mobile"],["type","button",1,"btn","btn-outline-primary",3,"click"],["type","text","id","firstName","name","firstname",1,"form-control",3,"ngModel","ngModelChange"],["type","text","id","lastName","name","lastname",1,"form-control",3,"ngModel","ngModelChange"],["type","email","id","email","name","email",1,"form-control",3,"ngModel","ngModelChange"],["type","number","id","mobile","placeholder","mobile Number","name","mobile",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-outline-success",3,"click"],[1,"btn","btn-outline-primary",3,"click"],[1,"btn","btn-outline-danger",3,"click"]],template:function(r,i){if(1&r&&(Pe(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),tt(6,"Add Student"),Ne()(),Nm(7,eJ,19,4,"div",6),Nm(8,tJ,18,4,"ng-template",null,7,pM),Ne()(),Pe(10,"div",8)(11,"h5",9),tt(12,"Student List"),Ne(),Pe(13,"div",10)(14,"div",11)(15,"table",12)(16,"thead")(17,"tr")(18,"th",13),tt(19,"First Name"),Ne(),Pe(20,"th",13),tt(21,"Last Name"),Ne(),Pe(22,"th",13),tt(23,"Mobile"),Ne(),Pe(24,"th",13),tt(25,"Email"),Ne(),Pe(26,"th",13),tt(27,"Edit"),Ne(),Pe(28,"th",13),tt(29,"Delete"),Ne()()(),Pe(30,"tbody"),Nm(31,nJ,15,4,"tr",14),Ne()()()()()()()),2&r){const s=function hR(t){return function Ns(t,e){return t[e]}(function Jd(){return ke.lFrame.contextLView}(),st+t)}(9);Gn(7),rs("ngIf",i.editMode)("ngIfElse",s),Gn(24),rs("ngForOf",i.studentsList)}},dependencies:[RN,MN,Rl,HD,U_,If]})}return t})()},{path:"register",component:(()=>{class t{constructor(n){this.auth=n,this.email="",this.password=""}register(){""!=this.email&&""!=this.password?(this.auth.register(this.email,this.password),this.email="",this.password=""):alert("Please Enter Valid Details")}static#e=this.\u0275fac=function(r){return new(r||t)(se(PD))};static#t=this.\u0275cmp=hs({type:t,selectors:[["app-register"]],decls:30,vars:2,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-4"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-dark","text-muted"],["for","exampleInputEmail1",1,"form-label"],["type","email","name","email",1,"form-control",3,"ngModel","ngModelChange"],["for","exampleInputPassword1",1,"form-label"],["type","password","name","password",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-info",3,"click"],[1,"row"],[1,"col-md-6"],["href","/login",2,"text-decoration","none"],[1,"text-danger"],["href","",1,"text-dark",2,"text-decoration","none"]],template:function(r,i){1&r&&(Pe(0,"div",0)(1,"div",1),Ls(2,"div",2),Pe(3,"div",3)(4,"div",4)(5,"div",5)(6,"form")(7,"div",6)(8,"h4",7),tt(9,"Register"),Ne()(),Pe(10,"div",6)(11,"label",8),tt(12,"Email"),Ne(),Pe(13,"input",9),Pt("ngModelChange",function(o){return i.email=o}),Ne()(),Pe(14,"div",6)(15,"label",10),tt(16,"Password"),Ne(),Pe(17,"input",11),Pt("ngModelChange",function(o){return i.password=o}),Ne()(),Pe(18,"button",12),Pt("click",function(){return i.register()}),tt(19,"Register"),Ne(),Pe(20,"div",13)(21,"div",14)(22,"a",15),tt(23,"Have Account ? "),Pe(24,"span",16),tt(25,"Login"),Ne()()(),Pe(26,"div",14)(27,"a",17),tt(28,"Forget Password ?"),Ne()()()()()()(),Ls(29,"div",2),Ne()()),2&r&&(Gn(13),rs("ngModel",i.email),Gn(4),rs("ngModel",i.password))},dependencies:[K_,Rl,U_,B_,If,Nl]})}return t})()},{path:"verify-email",component:(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=hs({type:t,selectors:[["app-verify-email"]],decls:14,vars:0,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-4"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-danger","text-muted"],[1,"text-muted","text-center"]],template:function(r,i){1&r&&(Pe(0,"div",0)(1,"div",1),Ls(2,"div",2),Pe(3,"div",3)(4,"div",4)(5,"div",5)(6,"form")(7,"div",6)(8,"h4",7),tt(9,"Welcome"),Ne()(),Pe(10,"div",6)(11,"p",8),tt(12,"Link has been sent to Registered email. Please Verify it!!"),Ne()()()()()(),Ls(13,"div",2),Ne()())},dependencies:[K_,B_,Nl]})}return t})()}];let iJ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=lr({type:t});static#n=this.\u0275inj=Er({imports:[l1.forRoot(rJ),l1]})}return t})(),sJ=(()=>{class t{constructor(){this.title="FirebaseCRUDApp"}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=hs({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(r,i){1&r&&Ls(0,"router-outlet")},dependencies:[pD]})}return t})();class Np{constructor(e){return e}}class a0{constructor(){return(0,Rr.getApps)()}}const u0=new ae("angularfire2._apps"),aJ={provide:Np,useFactory:function oJ(t){return t&&1===t.length?t[0]:new Np((0,Rr.getApp)())},deps:[[new li,u0]]},uJ={provide:a0,deps:[[new li,u0]]};function cJ(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new Np(r)}}let lJ=(()=>{class t{constructor(n){(0,Rr.registerVersion)("angularfire",x_.full,"core"),(0,Rr.registerVersion)("angularfire",x_.full,"app"),(0,Rr.registerVersion)("angular",Xb.full,n.toString())}static \u0275fac=function(r){return new(r||t)(oe(go))};static \u0275mod=lr({type:t});static \u0275inj=Er({providers:[aJ,uJ]})}return t})();function dJ(t,...e){return{ngModule:lJ,providers:[{provide:u0,useFactory:cJ(t),multi:!0,deps:[Et,br,gf,...e]}]}}const hJ=AD(Rr.initializeApp,!0);var fJ=xe(939);class c0{constructor(e){return e}}class x2{constructor(){return TD("auth")}}const l0=new ae("angularfire2.auth-instances");function gJ(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new c0(r)}}const mJ={provide:x2,deps:[[new li,l0]]},_J={provide:c0,useFactory:function pJ(t,e){const n=g1("auth",t,e);return n&&new c0(n)},deps:[[new li,l0],Np]};let yJ=(()=>{class t{constructor(){(0,Rr.registerVersion)("angularfire",x_.full,"auth")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=lr({type:t});static \u0275inj=Er({providers:[_J,mJ]})}return t})();function vJ(t,...e){return{ngModule:yJ,providers:[{provide:l0,useFactory:gJ(t),multi:!0,deps:[Et,br,gf,a0,[new li,O_],...e]}]}}const IJ=AD(fJ.o,!0);class d0{constructor(e){return e}}const O2="firestore",h0=new ae("angularfire2.firestore-instances");function DJ(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new d0(r)}}const CJ={provide:class EJ{constructor(){return TD(O2)}},deps:[[new li,h0]]},TJ={provide:d0,useFactory:function wJ(t,e){const n=g1(O2,t,e);return n&&new d0(n)},deps:[[new li,h0],Np]};let AJ=(()=>{class t{constructor(){(0,Rr.registerVersion)("angularfire",x_.full,"fst")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=lr({type:t});static \u0275inj=Er({providers:[TJ,CJ]})}return t})();function bJ(t,...e){return{ngModule:AJ,providers:[{provide:h0,useFactory:DJ(t),multi:!0,deps:[Et,br,gf,a0,[new li,x2],[new li,O_],...e]}]}}const SJ=AD(VQ,!0);let RJ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=lr({type:t,bootstrap:[sJ]});static#n=this.\u0275inj=Er({providers:[{provide:V_,useValue:{projectId:"student-management-syste-57980",appId:"1:1065850020104:web:d5b0a33c55006276948cbd",storageBucket:"student-management-syste-57980.appspot.com",apiKey:"AIzaSyBNCj_ppKPJ2Je98BtifnAMTKm0ClxgQlQ",authDomain:"student-management-syste-57980.firebaseapp.com",messagingSenderId:"1065850020104"}}],imports:[v3,iJ,dJ(()=>hJ({projectId:"student-management-syste-57980",appId:"1:1065850020104:web:d5b0a33c55006276948cbd",storageBucket:"student-management-syste-57980.appspot.com",apiKey:"AIzaSyBNCj_ppKPJ2Je98BtifnAMTKm0ClxgQlQ",authDomain:"student-management-syste-57980.firebaseapp.com",messagingSenderId:"1065850020104"})),vJ(()=>IJ()),bJ(()=>SJ()),v8]})}return t})();_3().bootstrapModule(RJ).catch(t=>console.error(t))},106:(Li,Tn,xe)=>{xe.d(Tn,{Z:()=>An});var D=xe(58),G=xe(537),N=xe(534),Ce=xe(879);class _t{constructor(Ue,Be){this._delegate=Ue,this.firebase=Be,(0,N._addComponent)(Ue,new G.wA("app-compat",()=>this,"PUBLIC")),this.container=Ue.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ue){this._delegate.automaticDataCollectionEnabled=Ue}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ue=>{this._delegate.checkDestroyed(),Ue()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(Ue,Be=N._DEFAULT_ENTRY_NAME){var bn;this._delegate.checkDestroyed();const Zt=this._delegate.container.getProvider(Ue);return!Zt.isInitialized()&&"EXPLICIT"===(null===(bn=Zt.getComponent())||void 0===bn?void 0:bn.instantiationMode)&&Zt.initialize(),Zt.getImmediate({identifier:Be})}_removeServiceInstance(Ue,Be=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ue).clearInstance(Be)}_addComponent(Ue){(0,N._addComponent)(this._delegate,Ue)}_addOrOverwriteComponent(Ue){(0,N._addOrOverwriteComponent)(this._delegate,Ue)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const hn=new D.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Z=function lt(){const ot=function Vt(ot){const Ue={},Be={__esModule:!0,initializeApp:function nt(Ze,te={}){const ut=N.initializeApp(Ze,te);if((0,D.r3)(Ue,ut.name))return Ue[ut.name];const Bt=new ot(ut,Be);return Ue[ut.name]=Bt,Bt},app:Zt,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function Vr(Ze){const te=Ze.name,ut=te.replace("-compat","");if(N._registerComponent(Ze)&&"PUBLIC"===Ze.type){const Bt=(un=Zt())=>{if("function"!=typeof un[ut])throw hn.create("invalid-app-argument",{appName:te});return un[ut]()};void 0!==Ze.serviceProps&&(0,D.ZB)(Bt,Ze.serviceProps),Be[ut]=Bt,ot.prototype[ut]=function(...un){return this._getService.bind(this,te).apply(this,Ze.multipleInstances?un:[])}}return"PUBLIC"===Ze.type?Be[ut]:null},removeApp:function bn(Ze){delete Ue[Ze]},useAsService:function _n(Ze,te){return"serverAuth"===te?null:te},modularAPIs:N}};function Zt(Ze){if(!(0,D.r3)(Ue,Ze=Ze||N._DEFAULT_ENTRY_NAME))throw hn.create("no-app",{appName:Ze});return Ue[Ze]}return Be.default=Be,Object.defineProperty(Be,"apps",{get:function Dt(){return Object.keys(Ue).map(Ze=>Ue[Ze])}}),Zt.App=ot,Be}(_t);return ot.INTERNAL=Object.assign(Object.assign({},ot.INTERNAL),{createFirebaseNamespace:lt,extendNamespace:function Ue(Be){(0,D.ZB)(ot,Be)},createSubscribe:D.ne,ErrorFactory:D.LL,deepExtend:D.ZB}),ot}(),ie=new Ce.Yd("@firebase/app-compat");if((0,D.jU)()&&void 0!==self.firebase){ie.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ot=self.firebase.SDK_VERSION;ot&&ot.indexOf("LITE")>=0&&ie.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const An=Z;!function yt(ot){(0,N.registerVersion)("@firebase/app-compat","0.2.27",ot)}()},534:(Li,Tn,xe)=>{xe.r(Tn),xe.d(Tn,{FirebaseError:()=>Ce.ZR,SDK_VERSION:()=>Hi,_DEFAULT_ENTRY_NAME:()=>Ii,_addComponent:()=>Ur,_addOrOverwriteComponent:()=>Br,_apps:()=>Qn,_clearComponents:()=>pn,_components:()=>Lr,_getProvider:()=>Ct,_registerComponent:()=>Bn,_removeServiceInstance:()=>jr,deleteApp:()=>yn,getApp:()=>wi,getApps:()=>Pn,initializeApp:()=>zi,onLog:()=>Fo,registerVersion:()=>$r,setLogLevel:()=>Cs});var D=xe(861),G=xe(537),N=xe(879),Ce=xe(58);const _t=(k,R)=>R.some(J=>k instanceof J);let qt,hn;const Z=new WeakMap,ie=new WeakMap,De=new WeakMap,He=new WeakMap,yt=new WeakMap;let Ue={get(k,R,J){if(k instanceof IDBTransaction){if("done"===R)return ie.get(k);if("objectStoreNames"===R)return k.objectStoreNames||De.get(k);if("store"===R)return J.objectStoreNames[1]?void 0:J.objectStore(J.objectStoreNames[0])}return nt(k[R])},set:(k,R,J)=>(k[R]=J,!0),has:(k,R)=>k instanceof IDBTransaction&&("done"===R||"store"===R)||R in k};function Zt(k){return"function"==typeof k?function bn(k){return k!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function lt(){return hn||(hn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(k)?function(...R){return k.apply(Dt(this),R),nt(Z.get(this))}:function(...R){return nt(k.apply(Dt(this),R))}:function(R,...J){const ge=k.call(Dt(this),R,...J);return De.set(ge,R.sort?R.sort():[R]),nt(ge)}}(k):(k instanceof IDBTransaction&&function ot(k){if(ie.has(k))return;const R=new Promise((J,ge)=>{const Ye=()=>{k.removeEventListener("complete",rt),k.removeEventListener("error",z),k.removeEventListener("abort",z)},rt=()=>{J(),Ye()},z=()=>{ge(k.error||new DOMException("AbortError","AbortError")),Ye()};k.addEventListener("complete",rt),k.addEventListener("error",z),k.addEventListener("abort",z)});ie.set(k,R)}(k),_t(k,function Vt(){return qt||(qt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(k,Ue):k)}function nt(k){if(k instanceof IDBRequest)return function An(k){const R=new Promise((J,ge)=>{const Ye=()=>{k.removeEventListener("success",rt),k.removeEventListener("error",z)},rt=()=>{J(nt(k.result)),Ye()},z=()=>{ge(k.error),Ye()};k.addEventListener("success",rt),k.addEventListener("error",z)});return R.then(J=>{J instanceof IDBCursor&&Z.set(J,k)}).catch(()=>{}),yt.set(R,k),R}(k);if(He.has(k))return He.get(k);const R=Zt(k);return R!==k&&(He.set(k,R),yt.set(R,k)),R}const Dt=k=>yt.get(k),Ze=["get","getKey","getAll","getAllKeys","count"],te=["put","add","delete","clear"],ut=new Map;function Bt(k,R){if(!(k instanceof IDBDatabase)||R in k||"string"!=typeof R)return;if(ut.get(R))return ut.get(R);const J=R.replace(/FromIndex$/,""),ge=R!==J,Ye=te.includes(J);if(!(J in(ge?IDBIndex:IDBObjectStore).prototype)||!Ye&&!Ze.includes(J))return;const rt=function(){var z=(0,D.Z)(function*(Yt,...Ee){const Je=this.transaction(Yt,Ye?"readwrite":"readonly");let xa=Je.store;return ge&&(xa=xa.index(Ee.shift())),(yield Promise.all([xa[J](...Ee),Ye&&Je.done]))[0]});return function(Ee){return z.apply(this,arguments)}}();return ut.set(R,rt),rt}!function Be(k){Ue=k(Ue)}(k=>({...k,get:(R,J,ge)=>Bt(R,J)||k.get(R,J,ge),has:(R,J)=>!!Bt(R,J)||k.has(R,J)}));class un{constructor(R){this.container=R}getPlatformInfoString(){return this.container.getProviders().map(J=>{if(function fn(k){const R=k.getComponent();return"VERSION"===R?.type}(J)){const ge=J.getImmediate();return`${ge.library}/${ge.version}`}return null}).filter(J=>J).join(" ")}}const _i="@firebase/app",qe=new N.Yd("@firebase/app"),Ii="[DEFAULT]",Ei={[_i]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Qn=new Map,Lr=new Map;function Ur(k,R){try{k.container.addComponent(R)}catch(J){qe.debug(`Component ${R.name} failed to register with FirebaseApp ${k.name}`,J)}}function Br(k,R){k.container.addOrOverwriteComponent(R)}function Bn(k){const R=k.name;if(Lr.has(R))return qe.debug(`There were multiple attempts to register component ${R}.`),!1;Lr.set(R,k);for(const J of Qn.values())Ur(J,k);return!0}function Ct(k,R){const J=k.container.getProvider("heartbeat").getImmediate({optional:!0});return J&&J.triggerHeartbeat(),k.container.getProvider(R)}function jr(k,R,J=Ii){Ct(k,R).clearInstance(J)}function pn(){Lr.clear()}const Qt=new Ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class gn{constructor(R,J,ge){this._isDeleted=!1,this._options=Object.assign({},R),this._config=Object.assign({},J),this._name=J.name,this._automaticDataCollectionEnabled=J.automaticDataCollectionEnabled,this._container=ge,this.container.addComponent(new G.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(R){this.checkDestroyed(),this._automaticDataCollectionEnabled=R}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(R){this._isDeleted=R}checkDestroyed(){if(this.isDeleted)throw Qt.create("app-deleted",{appName:this._name})}}const Hi="10.8.0";function zi(k,R={}){let J=k;"object"!=typeof R&&(R={name:R});const ge=Object.assign({name:Ii,automaticDataCollectionEnabled:!1},R),Ye=ge.name;if("string"!=typeof Ye||!Ye)throw Qt.create("bad-app-name",{appName:String(Ye)});if(J||(J=(0,Ce.aH)()),!J)throw Qt.create("no-options");const rt=Qn.get(Ye);if(rt){if((0,Ce.vZ)(J,rt.options)&&(0,Ce.vZ)(ge,rt.config))return rt;throw Qt.create("duplicate-app",{appName:Ye})}const z=new G.H0(Ye);for(const Ee of Lr.values())z.addComponent(Ee);const Yt=new gn(J,ge,z);return Qn.set(Ye,Yt),Yt}function wi(k=Ii){const R=Qn.get(k);if(!R&&k===Ii&&(0,Ce.aH)())return zi();if(!R)throw Qt.create("no-app",{appName:k});return R}function Pn(){return Array.from(Qn.values())}function yn(k){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,D.Z)(function*(k){const R=k.name;Qn.has(R)&&(Qn.delete(R),yield Promise.all(k.container.getProviders().map(J=>J.delete())),k.isDeleted=!0)})).apply(this,arguments)}function $r(k,R,J){var ge;let Ye=null!==(ge=Ei[k])&&void 0!==ge?ge:k;J&&(Ye+=`-${J}`);const rt=Ye.match(/\s|\//),z=R.match(/\s|\//);if(rt||z){const Yt=[`Unable to register library "${Ye}" with version "${R}":`];return rt&&Yt.push(`library name "${Ye}" contains illegal characters (whitespace or "/")`),rt&&z&&Yt.push("and"),z&&Yt.push(`version name "${R}" contains illegal characters (whitespace or "/")`),void qe.warn(Yt.join(" "))}Bn(new G.wA(`${Ye}-version`,()=>({library:Ye,version:R}),"VERSION"))}function Fo(k,R){if(null!==k&&"function"!=typeof k)throw Qt.create("invalid-log-argument");(0,N.Am)(k,R)}function Cs(k){(0,N.Ub)(k)}const eo="firebase-heartbeat-database",Gi=1,b="firebase-heartbeat-store";let T=null;function I(){return T||(T=function Vr(k,R,{blocked:J,upgrade:ge,blocking:Ye,terminated:rt}={}){const z=indexedDB.open(k,R),Yt=nt(z);return ge&&z.addEventListener("upgradeneeded",Ee=>{ge(nt(z.result),Ee.oldVersion,Ee.newVersion,nt(z.transaction),Ee)}),J&&z.addEventListener("blocked",Ee=>J(Ee.oldVersion,Ee.newVersion,Ee)),Yt.then(Ee=>{rt&&Ee.addEventListener("close",()=>rt()),Ye&&Ee.addEventListener("versionchange",Je=>Ye(Je.oldVersion,Je.newVersion,Je))}).catch(()=>{}),Yt}(eo,Gi,{upgrade:(k,R)=>{if(0===R)try{k.createObjectStore(b)}catch(J){console.warn(J)}}}).catch(k=>{throw Qt.create("idb-open",{originalErrorMessage:k.message})})),T}function v(){return(v=(0,D.Z)(function*(k){try{const J=(yield I()).transaction(b),ge=yield J.objectStore(b).get(_e(k));return yield J.done,ge}catch(R){if(R instanceof Ce.ZR)qe.warn(R.message);else{const J=Qt.create("idb-get",{originalErrorMessage:R?.message});qe.warn(J.message)}}})).apply(this,arguments)}function A(k,R){return W.apply(this,arguments)}function W(){return(W=(0,D.Z)(function*(k,R){try{const ge=(yield I()).transaction(b,"readwrite");yield ge.objectStore(b).put(R,_e(k)),yield ge.done}catch(J){if(J instanceof Ce.ZR)qe.warn(J.message);else{const ge=Qt.create("idb-set",{originalErrorMessage:J?.message});qe.warn(ge.message)}}})).apply(this,arguments)}function _e(k){return`${k.name}!${k.options.appId}`}class ft{constructor(R){this.container=R,this._heartbeatsCache=null;const J=this.container.getProvider("app").getImmediate();this._storage=new Te(J),this._heartbeatsCachePromise=this._storage.read().then(ge=>(this._heartbeatsCache=ge,ge))}triggerHeartbeat(){var R=this;return(0,D.Z)(function*(){var J,ge;const rt=R.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),z=fe();if((null!=(null===(J=R._heartbeatsCache)||void 0===J?void 0:J.heartbeats)||(R._heartbeatsCache=yield R._heartbeatsCachePromise,null!=(null===(ge=R._heartbeatsCache)||void 0===ge?void 0:ge.heartbeats)))&&R._heartbeatsCache.lastSentHeartbeatDate!==z&&!R._heartbeatsCache.heartbeats.some(Yt=>Yt.date===z))return R._heartbeatsCache.heartbeats.push({date:z,agent:rt}),R._heartbeatsCache.heartbeats=R._heartbeatsCache.heartbeats.filter(Yt=>{const Ee=new Date(Yt.date).valueOf();return Date.now()-Ee<=2592e6}),R._storage.overwrite(R._heartbeatsCache)})()}getHeartbeatsHeader(){var R=this;return(0,D.Z)(function*(){var J;if(null===R._heartbeatsCache&&(yield R._heartbeatsCachePromise),null==(null===(J=R._heartbeatsCache)||void 0===J?void 0:J.heartbeats)||0===R._heartbeatsCache.heartbeats.length)return"";const ge=fe(),{heartbeatsToSend:Ye,unsentEntries:rt}=function Rt(k,R=1024){const J=[];let ge=k.slice();for(const Ye of k){const rt=J.find(z=>z.agent===Ye.agent);if(rt){if(rt.dates.push(Ye.date),Vn(J)>R){rt.dates.pop();break}}else if(J.push({agent:Ye.agent,dates:[Ye.date]}),Vn(J)>R){J.pop();break}ge=ge.slice(1)}return{heartbeatsToSend:J,unsentEntries:ge}}(R._heartbeatsCache.heartbeats),z=(0,Ce.L)(JSON.stringify({version:2,heartbeats:Ye}));return R._heartbeatsCache.lastSentHeartbeatDate=ge,rt.length>0?(R._heartbeatsCache.heartbeats=rt,yield R._storage.overwrite(R._heartbeatsCache)):(R._heartbeatsCache.heartbeats=[],R._storage.overwrite(R._heartbeatsCache)),z})()}}function fe(){return(new Date).toISOString().substring(0,10)}class Te{constructor(R){this.app=R,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,D.Z)(function*(){return!!(0,Ce.hl)()&&(0,Ce.eu)().then(()=>!0).catch(()=>!1)})()}read(){var R=this;return(0,D.Z)(function*(){if(yield R._canUseIndexedDBPromise){const ge=yield function w(k){return v.apply(this,arguments)}(R.app);return ge?.heartbeats?ge:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(R){var J=this;return(0,D.Z)(function*(){var ge;if(yield J._canUseIndexedDBPromise){const rt=yield J.read();return A(J.app,{lastSentHeartbeatDate:null!==(ge=R.lastSentHeartbeatDate)&&void 0!==ge?ge:rt.lastSentHeartbeatDate,heartbeats:R.heartbeats})}})()}add(R){var J=this;return(0,D.Z)(function*(){var ge;if(yield J._canUseIndexedDBPromise){const rt=yield J.read();return A(J.app,{lastSentHeartbeatDate:null!==(ge=R.lastSentHeartbeatDate)&&void 0!==ge?ge:rt.lastSentHeartbeatDate,heartbeats:[...rt.heartbeats,...R.heartbeats]})}})()}}function Vn(k){return(0,Ce.L)(JSON.stringify({version:2,heartbeats:k})).length}!function to(k){Bn(new G.wA("platform-logger",R=>new un(R),"PRIVATE")),Bn(new G.wA("heartbeat",R=>new ft(R),"PRIVATE")),$r(_i,"0.9.27",k),$r(_i,"0.9.27","esm2017"),$r("fire-js","")}("")},537:(Li,Tn,xe)=>{xe.d(Tn,{H0:()=>Vt,wA:()=>N});var D=xe(861),G=xe(58);class N{constructor(Z,ie,De){this.name=Z,this.instanceFactory=ie,this.type=De,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Z){return this.instantiationMode=Z,this}setMultipleInstances(Z){return this.multipleInstances=Z,this}setServiceProps(Z){return this.serviceProps=Z,this}setInstanceCreatedCallback(Z){return this.onInstanceCreated=Z,this}}const Ce="[DEFAULT]";class _t{constructor(Z,ie){this.name=Z,this.container=ie,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Z){const ie=this.normalizeInstanceIdentifier(Z);if(!this.instancesDeferred.has(ie)){const De=new G.BH;if(this.instancesDeferred.set(ie,De),this.isInitialized(ie)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:ie});He&&De.resolve(He)}catch{}}return this.instancesDeferred.get(ie).promise}getImmediate(Z){var ie;const De=this.normalizeInstanceIdentifier(Z?.identifier),He=null!==(ie=Z?.optional)&&void 0!==ie&&ie;if(!this.isInitialized(De)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:De})}catch(yt){if(He)return null;throw yt}}getComponent(){return this.component}setComponent(Z){if(Z.name!==this.name)throw Error(`Mismatching Component ${Z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Z,this.shouldAutoInitialize()){if(function hn(lt){return"EAGER"===lt.instantiationMode}(Z))try{this.getOrInitializeService({instanceIdentifier:Ce})}catch{}for(const[ie,De]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(ie);try{const yt=this.getOrInitializeService({instanceIdentifier:He});De.resolve(yt)}catch{}}}}clearInstance(Z=Ce){this.instancesDeferred.delete(Z),this.instancesOptions.delete(Z),this.instances.delete(Z)}delete(){var Z=this;return(0,D.Z)(function*(){const ie=Array.from(Z.instances.values());yield Promise.all([...ie.filter(De=>"INTERNAL"in De).map(De=>De.INTERNAL.delete()),...ie.filter(De=>"_delete"in De).map(De=>De._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Z=Ce){return this.instances.has(Z)}getOptions(Z=Ce){return this.instancesOptions.get(Z)||{}}initialize(Z={}){const{options:ie={}}=Z,De=this.normalizeInstanceIdentifier(Z.instanceIdentifier);if(this.isInitialized(De))throw Error(`${this.name}(${De}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:De,options:ie});for(const[yt,An]of this.instancesDeferred.entries())De===this.normalizeInstanceIdentifier(yt)&&An.resolve(He);return He}onInit(Z,ie){var De;const He=this.normalizeInstanceIdentifier(ie),yt=null!==(De=this.onInitCallbacks.get(He))&&void 0!==De?De:new Set;yt.add(Z),this.onInitCallbacks.set(He,yt);const An=this.instances.get(He);return An&&Z(An,He),()=>{yt.delete(Z)}}invokeOnInitCallbacks(Z,ie){const De=this.onInitCallbacks.get(ie);if(De)for(const He of De)try{He(Z,ie)}catch{}}getOrInitializeService({instanceIdentifier:Z,options:ie={}}){let De=this.instances.get(Z);if(!De&&this.component&&(De=this.component.instanceFactory(this.container,{instanceIdentifier:(lt=Z,lt===Ce?void 0:lt),options:ie}),this.instances.set(Z,De),this.instancesOptions.set(Z,ie),this.invokeOnInitCallbacks(De,Z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Z,De)}catch{}var lt;return De||null}normalizeInstanceIdentifier(Z=Ce){return this.component?this.component.multipleInstances?Z:Ce:Z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Vt{constructor(Z){this.name=Z,this.providers=new Map}addComponent(Z){const ie=this.getProvider(Z.name);if(ie.isComponentSet())throw new Error(`Component ${Z.name} has already been registered with ${this.name}`);ie.setComponent(Z)}addOrOverwriteComponent(Z){this.getProvider(Z.name).isComponentSet()&&this.providers.delete(Z.name),this.addComponent(Z)}getProvider(Z){if(this.providers.has(Z))return this.providers.get(Z);const ie=new _t(Z,this);return this.providers.set(Z,ie),ie}getProviders(){return Array.from(this.providers.values())}}},879:(Li,Tn,xe)=>{xe.d(Tn,{Am:()=>lt,Ub:()=>Vt,Yd:()=>hn,in:()=>G});const D=[];var G=function(Z){return Z[Z.DEBUG=0]="DEBUG",Z[Z.VERBOSE=1]="VERBOSE",Z[Z.INFO=2]="INFO",Z[Z.WARN=3]="WARN",Z[Z.ERROR=4]="ERROR",Z[Z.SILENT=5]="SILENT",Z}(G||{});const N={debug:G.DEBUG,verbose:G.VERBOSE,info:G.INFO,warn:G.WARN,error:G.ERROR,silent:G.SILENT},Ce=G.INFO,_t={[G.DEBUG]:"log",[G.VERBOSE]:"log",[G.INFO]:"info",[G.WARN]:"warn",[G.ERROR]:"error"},qt=(Z,ie,...De)=>{if(ie<Z.logLevel)return;const He=(new Date).toISOString(),yt=_t[ie];if(!yt)throw new Error(`Attempted to log a message with an invalid logType (value: ${ie})`);console[yt](`[${He}]  ${Z.name}:`,...De)};class hn{constructor(ie){this.name=ie,this._logLevel=Ce,this._logHandler=qt,this._userLogHandler=null,D.push(this)}get logLevel(){return this._logLevel}set logLevel(ie){if(!(ie in G))throw new TypeError(`Invalid value "${ie}" assigned to \`logLevel\``);this._logLevel=ie}setLogLevel(ie){this._logLevel="string"==typeof ie?N[ie]:ie}get logHandler(){return this._logHandler}set logHandler(ie){if("function"!=typeof ie)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ie}get userLogHandler(){return this._userLogHandler}set userLogHandler(ie){this._userLogHandler=ie}debug(...ie){this._userLogHandler&&this._userLogHandler(this,G.DEBUG,...ie),this._logHandler(this,G.DEBUG,...ie)}log(...ie){this._userLogHandler&&this._userLogHandler(this,G.VERBOSE,...ie),this._logHandler(this,G.VERBOSE,...ie)}info(...ie){this._userLogHandler&&this._userLogHandler(this,G.INFO,...ie),this._logHandler(this,G.INFO,...ie)}warn(...ie){this._userLogHandler&&this._userLogHandler(this,G.WARN,...ie),this._logHandler(this,G.WARN,...ie)}error(...ie){this._userLogHandler&&this._userLogHandler(this,G.ERROR,...ie),this._logHandler(this,G.ERROR,...ie)}}function Vt(Z){D.forEach(ie=>{ie.setLogLevel(Z)})}function lt(Z,ie){for(const De of D){let He=null;ie&&ie.level&&(He=N[ie.level]),De.userLogHandler=null===Z?null:(yt,An,...ot)=>{const Ue=ot.map(Be=>{if(null==Be)return null;if("string"==typeof Be)return Be;if("number"==typeof Be||"boolean"==typeof Be)return Be.toString();if(Be instanceof Error)return Be.message;try{return JSON.stringify(Be)}catch{return null}}).filter(Be=>Be).join(" ");An>=(He??yt.logLevel)&&Z({level:G[An].toLowerCase(),message:Ue,args:ot,type:yt.name})}}}},365:(Li,Tn,xe)=>{xe.r(Tn);var D=xe(861),G=xe(106),N=xe(939),Ce=xe(58),hn=(xe(534),xe(879),xe(537));function Vt(){return window}function ie(){return ie=(0,D.Z)(function*(I,w,v){var A;const{BuildInfo:W}=Vt();(0,N.au)(w.sessionId,"AuthEvent did not contain a session ID");const _e=yield function Be(I){return bn.apply(this,arguments)}(w.sessionId),Ie={};return(0,N.av)()?Ie.ibi=W.packageName:(0,N.aw)()?Ie.apn=W.packageName:(0,N.ax)(I,"operation-not-supported-in-this-environment"),W.displayName&&(Ie.appDisplayName=W.displayName),Ie.sessionId=_e,(0,N.ay)(I,v,w.type,void 0,null!==(A=w.eventId)&&void 0!==A?A:void 0,Ie)}),ie.apply(this,arguments)}function He(){return(He=(0,D.Z)(function*(I){const{BuildInfo:w}=Vt(),v={};(0,N.av)()?v.iosBundleId=w.packageName:(0,N.aw)()?v.androidPackageName=w.packageName:(0,N.ax)(I,"operation-not-supported-in-this-environment"),yield(0,N.az)(I,v)})).apply(this,arguments)}function ot(){return(ot=(0,D.Z)(function*(I,w,v){const{cordova:A}=Vt();let W=()=>{};try{yield new Promise((_e,Ie)=>{let Ve=null;function ft(){var Te;_e();const Vn=null===(Te=A.plugins.browsertab)||void 0===Te?void 0:Te.close;"function"==typeof Vn&&Vn(),"function"==typeof v?.close&&v.close()}function fe(){Ve||(Ve=window.setTimeout(()=>{Ie((0,N.aB)(I,"redirect-cancelled-by-user"))},2e3))}function Rt(){"visible"===document?.visibilityState&&fe()}w.addPassiveListener(ft),document.addEventListener("resume",fe,!1),(0,N.aw)()&&document.addEventListener("visibilitychange",Rt,!1),W=()=>{w.removePassiveListener(ft),document.removeEventListener("resume",fe,!1),document.removeEventListener("visibilitychange",Rt,!1),Ve&&window.clearTimeout(Ve)}})}finally{W()}})).apply(this,arguments)}function bn(){return(bn=(0,D.Z)(function*(I){const w=function Zt(I){if((0,N.au)(/[0-9a-zA-Z]+/.test(I),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(I);const w=new ArrayBuffer(I.length),v=new Uint8Array(w);for(let A=0;A<I.length;A++)v[A]=I.charCodeAt(A);return v}(I),v=yield crypto.subtle.digest("SHA-256",w);return Array.from(new Uint8Array(v)).map(W=>W.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Dt extends N.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(w=>{this.resolveInialized=w})}addPassiveListener(w){this.passiveListeners.add(w)}removePassiveListener(w){this.passiveListeners.delete(w)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(w){return this.resolveInialized(),this.passiveListeners.forEach(v=>v(w)),super.onEvent(w)}initialized(){var w=this;return(0,D.Z)(function*(){yield w.initPromise})()}}function Ze(I){return te.apply(this,arguments)}function te(){return(te=(0,D.Z)(function*(I){const w=yield un()._get(fn(I));return w&&(yield un()._remove(fn(I))),w})).apply(this,arguments)}function Bt(){const I=[];for(let v=0;v<20;v++){const A=Math.floor(62*Math.random());I.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(A))}return I.join("")}function un(){return(0,N.aE)(N.b)}function fn(I){return(0,N.aF)("authEvent",I.config.apiKey,I.name)}function qe(I){if(!I?.includes("?"))return{};const[w,...v]=I.split("?");return(0,Ce.zd)(v.join("?"))}const L=class Ui{constructor(){this._redirectPersistence=N.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=N.aG,this._overrideRedirectResult=N.aH}_initialize(w){var v=this;return(0,D.Z)(function*(){const A=w._key();let W=v.eventManagers.get(A);return W||(W=new Dt(w),v.eventManagers.set(A,W),v.attachCallbackListeners(w,W)),W})()}_openPopup(w){(0,N.ax)(w,"operation-not-supported-in-this-environment")}_openRedirect(w,v,A,W){var _e=this;return(0,D.Z)(function*(){!function Ue(I){var w,v,A,W,_e,Ie,Ve,ft,fe,Rt;const Te=Vt();(0,N.aC)("function"==typeof(null===(w=Te?.universalLinks)||void 0===w?void 0:w.subscribe),I,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,N.aC)(typeof(null===(v=Te?.BuildInfo)||void 0===v?void 0:v.packageName)<"u",I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,N.aC)("function"==typeof(null===(_e=null===(W=null===(A=Te?.cordova)||void 0===A?void 0:A.plugins)||void 0===W?void 0:W.browsertab)||void 0===_e?void 0:_e.openUrl),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.aC)("function"==typeof(null===(ft=null===(Ve=null===(Ie=Te?.cordova)||void 0===Ie?void 0:Ie.plugins)||void 0===Ve?void 0:Ve.browsertab)||void 0===ft?void 0:ft.isAvailable),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.aC)("function"==typeof(null===(Rt=null===(fe=Te?.cordova)||void 0===fe?void 0:fe.InAppBrowser)||void 0===Rt?void 0:Rt.open),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(w);const Ie=yield _e._initialize(w);yield Ie.initialized(),Ie.resetRedirect(),(0,N.aI)(),yield _e._originValidation(w);const Ve=function Vr(I,w,v=null){return{type:w,eventId:v,urlResponse:null,sessionId:Bt(),postBody:null,tenantId:I.tenantId,error:(0,N.aB)(I,"no-auth-event")}}(w,A,W);yield function _n(I,w){return un()._set(fn(I),w)}(w,Ve);const ft=yield function Z(I,w,v){return ie.apply(this,arguments)}(w,Ve,v),fe=yield function yt(I){const{cordova:w}=Vt();return new Promise(v=>{w.plugins.browsertab.isAvailable(A=>{let W=null;A?w.plugins.browsertab.openUrl(I):W=w.InAppBrowser.open(I,(0,N.aA)()?"_blank":"_system","location=yes"),v(W)})})}(ft);return function An(I,w,v){return ot.apply(this,arguments)}(w,Ie,fe)})()}_isIframeWebStorageSupported(w,v){throw new Error("Method not implemented.")}_originValidation(w){const v=w._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function De(I){return He.apply(this,arguments)}(w)),this.originValidationPromises[v]}attachCallbackListeners(w,v){const{universalLinks:A,handleOpenURL:W,BuildInfo:_e}=Vt(),Ie=setTimeout((0,D.Z)(function*(){yield Ze(w),v.onEvent(j())}),500),Ve=function(){var Rt=(0,D.Z)(function*(Te){clearTimeout(Ie);const Vn=yield Ze(w);let to=null;Vn&&Te?.url&&(to=function ut(I,w){var v,A;const W=function yi(I){const w=qe(I),v=w.link?decodeURIComponent(w.link):void 0,A=qe(v).link,W=w.deep_link_id?decodeURIComponent(w.deep_link_id):void 0;return qe(W).link||W||A||v||I}(w);if(W.includes("/__/auth/callback")){const _e=qe(W),Ie=_e.firebaseError?function _i(I){try{return JSON.parse(I)}catch{return null}}(decodeURIComponent(_e.firebaseError)):null,Ve=null===(A=null===(v=Ie?.code)||void 0===v?void 0:v.split("auth/"))||void 0===A?void 0:A[1],ft=Ve?(0,N.aB)(Ve):null;return ft?{type:I.type,eventId:I.eventId,tenantId:I.tenantId,error:ft,urlResponse:null,sessionId:null,postBody:null}:{type:I.type,eventId:I.eventId,tenantId:I.tenantId,sessionId:I.sessionId,urlResponse:W,postBody:null}}return null}(Vn,Te.url)),v.onEvent(to||j())});return function(Vn){return Rt.apply(this,arguments)}}();typeof A<"u"&&"function"==typeof A.subscribe&&A.subscribe(null,Ve);const ft=W,fe=`${_e.packageName.toLowerCase()}://`;Vt().handleOpenURL=function(){var Rt=(0,D.Z)(function*(Te){if(Te.toLowerCase().startsWith(fe)&&Ve({url:Te}),"function"==typeof ft)try{ft(Te)}catch(Vn){console.error(Vn)}});return function(Te){return Rt.apply(this,arguments)}}()}};function j(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,N.aB)("no-auth-event")}}function ce(){var I;return(null===(I=self?.location)||void 0===I?void 0:I.protocol)||null}function me(I=(0,Ce.z$)()){return!("file:"!==ce()&&"ionic:"!==ce()&&"capacitor:"!==ce()||!I.toLowerCase().match(/iphone|ipad|ipod|android/))}function Kt(){try{const I=self.localStorage,w=N.aN();if(I)return I.setItem(w,"1"),I.removeItem(w),!function Mt(I=(0,Ce.z$)()){return function dt(){return(0,Ce.w1)()&&11===document?.documentMode}()||function $t(I=(0,Ce.z$)()){return/Edge\/\d+/.test(I)}(I)}()||(0,Ce.hl)()}catch{return Sn()&&(0,Ce.hl)()}return!1}function Sn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Rn(){return(function Xe(){return"http:"===ce()||"https:"===ce()}()||(0,Ce.ru)()||me())&&!function Re(){return(0,Ce.b$)()||(0,Ce.UG)()}()&&Kt()&&!Sn()}function Un(){return me()&&typeof document<"u"}function vi(){return(vi=(0,D.Z)(function*(){return!!Un()&&new Promise(I=>{const w=setTimeout(()=>{I(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(w),I(!0)})})})).apply(this,arguments)}const ht={LOCAL:"local",NONE:"none",SESSION:"session"},ji=N.aC,$i="persistence";function Ei(I){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,D.Z)(function*(I){yield I._initializationPromise;const w=Ur(),v=N.aF($i,I.config.apiKey,I.name);w&&w.setItem(v,I._getPersistence())})).apply(this,arguments)}function Ur(){var I;try{return(null===(I=function Bi(){return typeof window<"u"?window:null}())||void 0===I?void 0:I.sessionStorage)||null}catch{return null}}const Br=N.aC;class Bn{constructor(){this.browserResolver=N.aE(N.k),this.cordovaResolver=N.aE(L),this.underlyingResolver=null,this._redirectPersistence=N.a,this._completeRedirectFn=N.aG,this._overrideRedirectResult=N.aH}_initialize(w){var v=this;return(0,D.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._initialize(w)})()}_openPopup(w,v,A,W){var _e=this;return(0,D.Z)(function*(){return yield _e.selectUnderlyingResolver(),_e.assertedUnderlyingResolver._openPopup(w,v,A,W)})()}_openRedirect(w,v,A,W){var _e=this;return(0,D.Z)(function*(){return yield _e.selectUnderlyingResolver(),_e.assertedUnderlyingResolver._openRedirect(w,v,A,W)})()}_isIframeWebStorageSupported(w,v){this.assertedUnderlyingResolver._isIframeWebStorageSupported(w,v)}_originValidation(w){return this.assertedUnderlyingResolver._originValidation(w)}get _shouldInitProactively(){return Un()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Br(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var w=this;return(0,D.Z)(function*(){if(w.underlyingResolver)return;const v=yield function Ir(){return vi.apply(this,arguments)}();w.underlyingResolver=v?w.cordovaResolver:w.browserResolver})()}}function Ct(I){return I.unwrap()}function pn(I){return Qt(I)}function Qt(I){const{_tokenResponse:w}=I instanceof Ce.ZR?I.customData:I;if(!w)return null;if(!(I instanceof Ce.ZR)&&"temporaryProof"in w&&"phoneNumber"in w)return N.P.credentialFromResult(I);const v=w.providerId;if(!v||v===N.p.PASSWORD)return null;let A;switch(v){case N.p.GOOGLE:A=N.X;break;case N.p.FACEBOOK:A=N.W;break;case N.p.GITHUB:A=N.Y;break;case N.p.TWITTER:A=N.$;break;default:const{oauthIdToken:W,oauthAccessToken:_e,oauthTokenSecret:Ie,pendingToken:Ve,nonce:ft}=w;return _e||Ie||W||Ve?Ve?v.startsWith("saml.")?N.aQ._create(v,Ve):N.N._fromParams({providerId:v,signInMethod:v,pendingToken:Ve,idToken:W,accessToken:_e}):new N.Z(v).credential({idToken:W,accessToken:_e,rawNonce:ft}):null}return I instanceof Ce.ZR?A.credentialFromError(I):A.credentialFromResult(I)}function gn(I,w){return w.catch(v=>{throw v instanceof Ce.ZR&&function Na(I,w){var v;const A=null===(v=w.customData)||void 0===v?void 0:v._tokenResponse;if("auth/multi-factor-auth-required"===w?.code)w.resolver=new wi(I,N.as(I,w));else if(A){const W=Qt(w),_e=w;W&&(_e.credential=W,_e.tenantId=A.tenantId||void 0,_e.email=A.email||void 0,_e.phoneNumber=A.phoneNumber||void 0)}}(I,v),v}).then(v=>{const W=v.user;return{operationType:v.operationType,credential:pn(v),additionalUserInfo:N.aq(v),user:Pn.getOrCreate(W)}})}function Hi(I,w){return zi.apply(this,arguments)}function zi(){return(zi=(0,D.Z)(function*(I,w){const v=yield w;return{verificationId:v.verificationId,confirm:A=>gn(I,v.confirm(A))}})).apply(this,arguments)}class wi{constructor(w,v){this.resolver=v,this.auth=function jr(I){return I.wrapped()}(w)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(w){return gn(Ct(this.auth),this.resolver.resolveSignIn(w))}}class Pn{constructor(w){this._delegate=w,this.multiFactor=N.at(w)}static getOrCreate(w){return Pn.USER_MAP.has(w)||Pn.USER_MAP.set(w,new Pn(w)),Pn.USER_MAP.get(w)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(w){return this._delegate.getIdTokenResult(w)}getIdToken(w){return this._delegate.getIdToken(w)}linkAndRetrieveDataWithCredential(w){return this.linkWithCredential(w)}linkWithCredential(w){var v=this;return(0,D.Z)(function*(){return gn(v.auth,N.a2(v._delegate,w))})()}linkWithPhoneNumber(w,v){var A=this;return(0,D.Z)(function*(){return Hi(A.auth,N.l(A._delegate,w,v))})()}linkWithPopup(w){var v=this;return(0,D.Z)(function*(){return gn(v.auth,N.d(v._delegate,w,Bn))})()}linkWithRedirect(w){var v=this;return(0,D.Z)(function*(){return yield Ei(N.aJ(v.auth)),N.g(v._delegate,w,Bn)})()}reauthenticateAndRetrieveDataWithCredential(w){return this.reauthenticateWithCredential(w)}reauthenticateWithCredential(w){var v=this;return(0,D.Z)(function*(){return gn(v.auth,N.a3(v._delegate,w))})()}reauthenticateWithPhoneNumber(w,v){return Hi(this.auth,N.r(this._delegate,w,v))}reauthenticateWithPopup(w){return gn(this.auth,N.e(this._delegate,w,Bn))}reauthenticateWithRedirect(w){var v=this;return(0,D.Z)(function*(){return yield Ei(N.aJ(v.auth)),N.h(v._delegate,w,Bn)})()}sendEmailVerification(w){return N.ag(this._delegate,w)}unlink(w){var v=this;return(0,D.Z)(function*(){return yield N.ap(v._delegate,w),v})()}updateEmail(w){return N.al(this._delegate,w)}updatePassword(w){return N.am(this._delegate,w)}updatePhoneNumber(w){return N.u(this._delegate,w)}updateProfile(w){return N.ak(this._delegate,w)}verifyBeforeUpdateEmail(w,v){return N.ah(this._delegate,w,v)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Pn.USER_MAP=new WeakMap;const yn=N.aC;let Yn=(()=>{class I{constructor(v,A){if(this.app=v,A.isInitialized())return this._delegate=A.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:W}=v.options;yn(W,"invalid-api-key",{appName:v.name}),yn(W,"invalid-api-key",{appName:v.name});const _e=typeof window<"u"?Bn:void 0;this._delegate=A.initialize({options:{persistence:Fo(W,v.name),popupRedirectResolver:_e}}),this._delegate._updateErrorMap(N.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Pn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(v){this._delegate.languageCode=v}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(v){this._delegate.tenantId=v}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(v,A){N.K(this._delegate,v,A)}applyActionCode(v){return N.a7(this._delegate,v)}checkActionCode(v){return N.a8(this._delegate,v)}confirmPasswordReset(v,A){return N.a6(this._delegate,v,A)}createUserWithEmailAndPassword(v,A){var W=this;return(0,D.Z)(function*(){return gn(W._delegate,N.aa(W._delegate,v,A))})()}fetchProvidersForEmail(v){return this.fetchSignInMethodsForEmail(v)}fetchSignInMethodsForEmail(v){return N.af(this._delegate,v)}isSignInWithEmailLink(v){return N.ad(this._delegate,v)}getRedirectResult(){var v=this;return(0,D.Z)(function*(){yn(Rn(),v._delegate,"operation-not-supported-in-this-environment");const A=yield N.j(v._delegate,Bn);return A?gn(v._delegate,Promise.resolve(A)):{credential:null,user:null}})()}addFrameworkForLogging(v){!function H(I,w){(0,N.aJ)(I)._logFramework(w)}(this._delegate,v)}onAuthStateChanged(v,A,W){const{next:_e,error:Ie,complete:Ve}=$r(v,A,W);return this._delegate.onAuthStateChanged(_e,Ie,Ve)}onIdTokenChanged(v,A,W){const{next:_e,error:Ie,complete:Ve}=$r(v,A,W);return this._delegate.onIdTokenChanged(_e,Ie,Ve)}sendSignInLinkToEmail(v,A){return N.ac(this._delegate,v,A)}sendPasswordResetEmail(v,A){return N.a5(this._delegate,v,A||void 0)}setPersistence(v){var A=this;return(0,D.Z)(function*(){let W;switch(function Ii(I,w){ji(Object.values(ht).includes(w),I,"invalid-persistence-type"),(0,Ce.b$)()?ji(w!==ht.SESSION,I,"unsupported-persistence-type"):(0,Ce.UG)()?ji(w===ht.NONE,I,"unsupported-persistence-type"):Sn()?ji(w===ht.NONE||w===ht.LOCAL&&(0,Ce.hl)(),I,"unsupported-persistence-type"):ji(w===ht.NONE||Kt(),I,"unsupported-persistence-type")}(A._delegate,v),v){case ht.SESSION:W=N.a;break;case ht.LOCAL:W=(yield N.aE(N.i)._isAvailable())?N.i:N.b;break;case ht.NONE:W=N.U;break;default:return N.ax("argument-error",{appName:A._delegate.name})}return A._delegate.setPersistence(W)})()}signInAndRetrieveDataWithCredential(v){return this.signInWithCredential(v)}signInAnonymously(){return gn(this._delegate,N.a0(this._delegate))}signInWithCredential(v){return gn(this._delegate,N.a1(this._delegate,v))}signInWithCustomToken(v){return gn(this._delegate,N.a4(this._delegate,v))}signInWithEmailAndPassword(v,A){return gn(this._delegate,N.ab(this._delegate,v,A))}signInWithEmailLink(v,A){return gn(this._delegate,N.ae(this._delegate,v,A))}signInWithPhoneNumber(v,A){return Hi(this._delegate,N.s(this._delegate,v,A))}signInWithPopup(v){var A=this;return(0,D.Z)(function*(){return yn(Rn(),A._delegate,"operation-not-supported-in-this-environment"),gn(A._delegate,N.c(A._delegate,v,Bn))})()}signInWithRedirect(v){var A=this;return(0,D.Z)(function*(){return yn(Rn(),A._delegate,"operation-not-supported-in-this-environment"),yield Ei(A._delegate),N.f(A._delegate,v,Bn)})()}updateCurrentUser(v){return this._delegate.updateCurrentUser(v)}verifyPasswordResetCode(v){return N.a9(this._delegate,v)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return I.Persistence=ht,I})();function $r(I,w,v){let A=I;"function"!=typeof I&&({next:A,error:w,complete:v}=I);const W=A;return{next:Ie=>W(Ie&&Pn.getOrCreate(Ie)),error:w,complete:v}}function Fo(I,w){const v=function Lr(I,w){const v=Ur();if(!v)return[];const A=N.aF($i,I,w);switch(v.getItem(A)){case ht.NONE:return[N.U];case ht.LOCAL:return[N.i,N.a];case ht.SESSION:return[N.a];default:return[]}}(I,w);if(typeof self<"u"&&!v.includes(N.i)&&v.push(N.i),typeof window<"u")for(const A of[N.b,N.a])v.includes(A)||v.push(A);return v.includes(N.U)||v.push(N.U),v}class Cs{constructor(){this.providerId="phone",this._delegate=new N.P(Ct(G.Z.auth()))}static credential(w,v){return N.P.credential(w,v)}verifyPhoneNumber(w,v){return this._delegate.verifyPhoneNumber(w,v)}unwrap(){return this._delegate}}Cs.PHONE_SIGN_IN_METHOD=N.P.PHONE_SIGN_IN_METHOD,Cs.PROVIDER_ID=N.P.PROVIDER_ID;const eo=N.aC;class Gi{constructor(w,v,A=G.Z.app()){var W;eo(null===(W=A.options)||void 0===W?void 0:W.apiKey,"invalid-api-key",{appName:A.name}),this._delegate=new N.R(A.auth(),w,v),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function T(I){I.INTERNAL.registerComponent(new hn.wA("auth-compat",w=>{const v=w.getProvider("app-compat").getImmediate(),A=w.getProvider("auth");return new Yn(v,A)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:N.A.EMAIL_SIGNIN,PASSWORD_RESET:N.A.PASSWORD_RESET,RECOVER_EMAIL:N.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:N.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:N.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:N.A.VERIFY_EMAIL}},EmailAuthProvider:N.V,FacebookAuthProvider:N.W,GithubAuthProvider:N.Y,GoogleAuthProvider:N.X,OAuthProvider:N.Z,SAMLAuthProvider:N._,PhoneAuthProvider:Cs,PhoneMultiFactorGenerator:N.m,RecaptchaVerifier:Gi,TwitterAuthProvider:N.$,Auth:Yn,AuthCredential:N.L,Error:Ce.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),I.registerVersion("@firebase/auth-compat","0.5.2")}(G.Z)},861:(Li,Tn,xe)=>{function D(N,Ce,_t,qt,hn,Vt,lt){try{var Z=N[Vt](lt),ie=Z.value}catch(De){return void _t(De)}Z.done?Ce(ie):Promise.resolve(ie).then(qt,hn)}function G(N){return function(){var Ce=this,_t=arguments;return new Promise(function(qt,hn){var Vt=N.apply(Ce,_t);function lt(ie){D(Vt,qt,hn,lt,Z,"next",ie)}function Z(ie){D(Vt,qt,hn,lt,Z,"throw",ie)}lt(void 0)})}}xe.d(Tn,{Z:()=>G})},582:(Li,Tn,xe)=>{function Ce(L,j){var H={};for(var F in L)Object.prototype.hasOwnProperty.call(L,F)&&j.indexOf(F)<0&&(H[F]=L[F]);if(null!=L&&"function"==typeof Object.getOwnPropertySymbols){var Q=0;for(F=Object.getOwnPropertySymbols(L);Q<F.length;Q++)j.indexOf(F[Q])<0&&Object.prototype.propertyIsEnumerable.call(L,F[Q])&&(H[F[Q]]=L[F[Q]])}return H}function De(L,j,H,F){return new(H||(H=Promise))(function(K,ce){function Xe(dt){try{Re(F.next(dt))}catch($t){ce($t)}}function me(dt){try{Re(F.throw(dt))}catch($t){ce($t)}}function Re(dt){dt.done?K(dt.value):function Q(K){return K instanceof H?K:new H(function(ce){ce(K)})}(dt.value).then(Xe,me)}Re((F=F.apply(L,j||[])).next())})}function nt(L){return this instanceof nt?(this.v=L,this):new nt(L)}function Dt(L,j,H){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Q,F=H.apply(L,j||[]),K=[];return Q={},ce("next"),ce("throw"),ce("return"),Q[Symbol.asyncIterator]=function(){return this},Q;function ce(Mt){F[Mt]&&(Q[Mt]=function(Kt){return new Promise(function(Sn,Rn){K.push([Mt,Kt,Sn,Rn])>1||Xe(Mt,Kt)})})}function Xe(Mt,Kt){try{!function me(Mt){Mt.value instanceof nt?Promise.resolve(Mt.value.v).then(Re,dt):$t(K[0][2],Mt)}(F[Mt](Kt))}catch(Sn){$t(K[0][3],Sn)}}function Re(Mt){Xe("next",Mt)}function dt(Mt){Xe("throw",Mt)}function $t(Mt,Kt){Mt(Kt),K.shift(),K.length&&Xe(K[0][0],K[0][1])}}function _n(L){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var H,j=L[Symbol.asyncIterator];return j?j.call(L):(L=function ot(L){var j="function"==typeof Symbol&&Symbol.iterator,H=j&&L[j],F=0;if(H)return H.call(L);if(L&&"number"==typeof L.length)return{next:function(){return L&&F>=L.length&&(L=void 0),{value:L&&L[F++],done:!L}}};throw new TypeError(j?"Object is not iterable.":"Symbol.iterator is not defined.")}(L),H={},F("next"),F("throw"),F("return"),H[Symbol.asyncIterator]=function(){return this},H);function F(K){H[K]=L[K]&&function(ce){return new Promise(function(Xe,me){!function Q(K,ce,Xe,me){Promise.resolve(me).then(function(Re){K({value:Re,done:Xe})},ce)}(Xe,me,(ce=L[K](ce)).done,ce.value)})}}}xe.d(Tn,{FC:()=>Dt,KL:()=>_n,_T:()=>Ce,mG:()=>De,qq:()=>nt}),"function"==typeof SuppressedError&&SuppressedError}},Li=>{Li(Li.s=777)}]);